

<!DOCTYPE html><html> <head><title>Shelly Plug</title><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><style type=text/css>body{padding:0;margin:0;font-family:'Roboto',Sans-Serif;color:white;background-color:#262D2F;-webkit-tap-highlight-color:rgba(255,255,255,0);background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADcAAAA3AQMAAACSFUAFAAAABlBMVEUlLS4nLjCbZncXAAABmklEQVQY0w3QsWsTYRzG8WcR/wQXSwZBnBQnRTQ3iaCoo7SlDbgUxXZoweVsTpAiDtLBxalFHLo1oNhA0uSlIh0UElSwtU3yghavIs3bJty9l969v8dM3/XDF9UzPQmensfeoT07+rKLqMmr+UIDfO6Fpt3AfVEu//0bKJnmVIIyczuvvTUUKDdMKYPpxEcXd5cQxMLrD4vY5EG0+U7A31makxisB/Y28+ALHvS5junlIFXRL9jQ81zwCEpffkOpgCmVbu/Dc7zX1oKmWf4zf66DyO+bMX8Sbr4f0S8iko3u4YNZjMji27IRbLsr4edMMG2b/Q9mFZZZ2FCreGVOeT1zB5cqH1eSCcGAzIKWwFTleO2C4OcgqJSs4L29OXBKUOMz51gHyf3UZPDUrQV/ZlhufYldhrlrdGPcQcxima4HmrR2V5+G49yJiHv497e0XWQClSZedejROd08as0gNZyyuoWECz/IDmZHto6H7/ApV9BKunB6N2VN4AKyG06CltqpJxi3PtflMbgRWjf0L1Iz/VqHCuWkDeQ/VX8mJIHnrVUAAAAASUVORK5CYII=) repeat;height:100%}body.stop-scrolling{height:100%;overflow:hidden}.clear{clear:both;display:block}.opened{display:block}.hidden{display:none}.blue{color:#2886c7}.red{color:#cb4a4a}input:-webkit-autofill{-webkit-transition-delay:9999s;-webkit-transition:color 9999999999s ease-out,background-color 9999999999s ease-out,background-image 0s ease-out}input[type="number"]::-webkit-outer-spin-button,input[type="number"]::-webkit-inner-spin-button{-webkit-appearance:none}input:invalid{border:2px solid red}#settings_buttons div{background-color:#43484B}#channel_page,#device_settings{margin:0 auto 100px auto}.res_900{max-width:900px;min-height:calc(100vh - 100px);padding:20px 0;height:100%;margin:auto;position:relative;box-shadow:0 0px 0px 0px white,0 0 0px 0px white,7px 0 15px -4px rgba(0,0,0,0.7),-7px 0 15px -4px rgba(0,0,0,0.7)}h1,.hollow_bg h2,.hollow_bg li h3,#device_page h2{font-size:18px;width:100%;margin:0;padding:10px 15px;background-color:rgba(0,0,0,0.4);color:#fff;box-sizing:border-box;background-repeat:no-repeat;background-size:18px;background-position:93.5% 50%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:normal}#device_name h1{display:none;font-size:22px;font-weight:bold;background:transparent;text-align:center;margin-bottom:12px}#header{height:58px;border-bottom:2px solid white}#head_wrap{height:58px;max-width:900px;margin:auto}.logo{width:40%;cursor:pointer;background-size:45%!important;background-position-y:55%!important}#clock{text-align:right;line-height:60px;font-size:16px;width:35%}#status_icons{text-align:center;width:25%}#status_icons #status.off{height:60px}#header>div div{display:inline-block;float:left;box-sizing:border-box;height:100%}#status_icons span{display:inline-block;width:30px;height:58px}@media screen and (max-width:900px){.logo{background-position-x:10px!important}#clock{padding-right:5px}}@media screen and (max-width:650px){.logo{background-size:60%!important}}@media screen and (max-width:515px){.logo{background-size:75%!important}#cloud{margin-right:-5px}#auth{background-size:46%!important;margin-left:-5px}#cloud,#status{background-size:70%!important}}@media screen and (max-width:375px){#status_icons span{width:23px}#clock{font-size:14px}}#cloud.on{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAQBAMAAAD6/3KbAAAAD1BMVEVldC2hx1mhyFqiyFmiyFqjCiSXAAAAAXRSTlMAQObYZgAAAFFJREFUCNdjYAABZhdlBjhgcnFxUYDzXEAAxjEC8xTgykDAAaEMxmNB4Ym4wIEBA4MKgueE0AYxFpnnwGCCwmNB4TEi8QSQrXAC2QjT6czAAAAesCaJ741jUgAAAABJRU5ErkJggg==) no-repeat 50%}#cloud.off{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAQBAMAAAD6/3KbAAAAD1BMVEVldC3KSUnLSUnKSkrLSkrGMPd7AAAAAXRSTlMAQObYZgAAAFFJREFUCNdjYAABJRcjBjhgcXFxcYDzXEAAymZSBvMM4Mpc4EpdkHksKDwRFzhQYGAwQfBcENogxiLzHBhUUHgsKDxGJJ4AshXOIBthOp0YGABkcSbQLocHEAAAAABJRU5ErkJggg==) no-repeat 50%}#cloud.loading{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAQCAYAAAAI0W+oAAAABHNCSVQICAgIfAhkiAAAAS1JREFUOI21lL9RAlEQh7/fAxMSZQZMvQ68EDEQKxAqgA7EEuzgOkAqECvgDBgMsQKNhRkwwASGNcBxYODuGOC+dPft9/b9WbEjNio3MO4wfCQPmICFSB0Veu2k9UoUjEseM/eM5MekhWSnNeUHk6gEFy/xz5i5boIEoMIs141L2OjIRldVTJcY3t8RVRIkqzyo2Au2BbL/gmGpgrkWJm/7FnbBqkC0aHnRau1XfBXdREZsXPKYZz4OVQBgNkDWBFCx/7ouGpUDTPdHEW0SkJ0+Kj+YyIblT9BFSqJllyc/ty5VCYDkM881Y//R0TDqDuwldZHkOVhsffdHxXgXgH1dPyHqqYm0qDkAnfcaGIkTeC+Mtgr9ztosWI6hTANZFXR6QPVvIIRFoOJbCPALJxlhpKBh7EkAAAAASUVORK5CYII=) no-repeat 50%}#status.on1{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAARAQMAAAAMvaX+AAAABlBMVEUAAADLSkqkAs9vAAAAAXRSTlMAQObYZgAAABZJREFUCNdjYCAFVADxPyD+A2UbgEUBMAgDG0cjnHAAAAAASUVORK5CYII=) no-repeat 50%}#status.on2{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAARAQMAAAAMvaX+AAAABlBMVEUAAAD/6zsXfk4hAAAAAXRSTlMAQObYZgAAAChJREFUCNdjYMABGP8xMLD/b2DgP/+AgY3xAESwAoiB4gx/oGwDsCgA5E0IJQNeHcIAAAAASUVORK5CYII=) no-repeat 50%}#status.on{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAARAQMAAAAMvaX+AAAABlBMVEUAAACiyFr3BtVtAAAAAXRSTlMAQObYZgAAADtJREFUCNdjYPjHwMD+/wCD/P8PDHUMPxg+MNgwJDBwMDCCxRsY+M8/YGBjPMAABhVADBRn+ANlG4BFAaY7EAE19ravAAAAAElFTkSuQmCC) no-repeat 50%}#status.off{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGsAAABJAQMAAAAAFUpyAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAMZJREFUOMvt0C0OwkAQBeBXRqxc3RBSboHck5D0CFXY9gbVqB4CgcDsAXoESEahGrJyRVOooTvbBEECCYLnvmQyf8Aza2CBkAJQggxQFdgBy8CkBVIbeFG8FTzVvgukU9PfOPDQ9FfBoxl2gpuReczXxbNW8aBkX/tWbHVWbhWIljiVBxKLA1EQy2/kxCQIYvz5G0zuIfwFOuNNn03kjLVTE61mxTSxUnZGsolg9Q4tyVY66jzOlWuwcZnXE33Zl4P57DcQ8QGpckkpvJam0AAAAABJRU5ErkJggg==) no-repeat 50%;background-size:contain}#auth.lock{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAASAQMAAABRkn1yAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAABpJREFUCNdjkD/AYP+BwaKAwcAABf3/gwcBAPXHGGVTw2ouAAAAAElFTkSuQmCC) no-repeat 50%}#auth.unlock{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAASAQMAAABRkn1yAAAABlBMVEUAAADLSkqkAs9vAAAAAXRSTlMAQObYZgAAABxJREFUCNdjkH/AYP+BwaKAwcAAhBhg6P8fPAgA6JcX9S7QyDEAAAAASUVORK5CYII=) no-repeat 50%}div.content{padding:20px;box-shadow:-6px 0px 6px -6px #000000,6px 0px 6px -6px #000000}.settings_tabs,.settings_content{margin-top:10px;margin-bottom:80px}.settings_tab_cont{display:none}#settings_buttons{width:100%;display:inline-block}.settings_tabs{margin:15px auto}#settings_buttons div{display:inline-block;float:left;position:relative;border:0.1em solid #272E30;cursor:pointer;box-sizing:border-box;text-align:center}#settings_buttons .device_status{border-radius:50%;background-color:rgba(255,255,255,0.7);width:8%;position:absolute;height:8%;top:6%;right:6%}.settings_tabs .device_status.blue_color{border:1px solid #3dcdff;background-color:#3dcdff}#settings_buttons .device_status.blue_color{background-color:#3dcdff}#settings_buttons div:not(#device_info){border-right:0.1em solid #272E30}#settings_buttons div:first-child{border-left:0}img.icon_dev{display:inline-block;padding-top:20%;height:30%}#settings_buttons .set_name{display:block;text-align:center;color:white;text-transform:initial;margin:11% 10% 0 10%;font-size:14px}@media screen and (min-width:600px){#settings_buttons div{height:15.9vw;width:16.666666%;max-height:144px}}@media screen and (min-width:900px){#settings_buttons div{height:15.7vw}#settings_buttons .set_name{font-size:16px;margin-top:13%}}@media screen and (max-width:700px){#settings_buttons .set_name{font-size:11px}#settings .set_box div.settings_icon{background-size:40%}#settings .icon_holder .icon_dev_set{background-size:30%}}@media screen and (max-width:599px){#settings .icon_holder .icon_dev_set{background-size:35%}#settings_buttons div{width:33.33%}#settings_buttons div{height:31.4vw}#settings .set_box div.settings_icon{background-size:50%}img.icon_dev{height:25%}#settings_buttons .set_name{font-size:16px;margin-top:15%}}@media screen and (max-width:599px) and (min-width:500px){#settings_buttons .set_name{margin-top:20%}}@media screen and (max-width:400px){#settings_buttons .set_name{font-size:12px}#settings .set_box div.settings_icon{background-size:60%}}input.radio_btn,input.checkbox{display:none}#settings h2{font-size:18px;padding:10px 15px;overflow:hidden;margin:0;font-weight:normal;text-transform:uppercase;text-overflow:ellipsis;box-sizing:border-box;background-repeat:no-repeat;background-size:18px;background-position:calc(100% - 13px) 50%}#settings .hollow_bg{margin-top:10px;box-shadow:1px 1px 1.5px -0.5px rgba(255,255,255,0.1),0.5px 1px 4px 0px rgba(0,0,0,0.7) inset;position:relative;overflow:hidden}.colapse.closed{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAAgAQMAAACIM6IbAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAIhJREFUCNdFjcsNQyEMBBdFyjtSAumEltIBdJCW6CSUwJHDE86uQYolGD6eNZ5gPYAoXhWpkrEhNzJ1lE7mgTJIbnmS1pFuIFhDXNSt4jL40llv+lOPet0pJ4MXU2a61cJZS4pk6Qr4LDHYVzoDbDqLDWd2nQGuM8D1Pd0D1mbYOjAP34cv/OsHzf8+0tgaJ+gAAAAASUVORK5CYII=);display:block;margin-bottom:2px}.closed{display:none;cursor:pointer}.text_input,.url_input,#settings button{border:none;height:40px;margin:auto;color:#fff;background-color:transparent;width:100%;display:block;text-transform:none;font-size:16px;box-sizing:border-box;padding-left:42px;background-repeat:no-repeat;background-position:10px 50%;background-size:40px}.text_input option{color:#000}#settings .set_box h2{display:inline-block;float:right;width:90%;line-height:25px}#settings .input_holder{text-align:initial;padding:5px 30px;margin-bottom:20px}.icon_holder{padding-bottom:10px}.icon_holder .icon_dev_set{width:20%;height:60px;background-color:rgba(255,255,255,0.2);background-repeat:no-repeat;background-position:50%;background-size:20%;float:left}#device_settings,.settings_wrapper{width:96%}.settings_wrapper{margin:0 auto}.icon_holder .iac_info{width:80%;display:inline-block;background-color:#43484B}#settings h2.sett_title{float:left;width:80%;text-transform:none;line-height:40px;text-align:center}.set_box{width:90%;margin:auto;border-top:1px solid #63686a}#settings h2.colapse{padding-right:11%;font-size:16px}.set_box div.settings_icon{float:left;width:10%;background-repeat:no-repeat;height:45px;background-size:30%;background-position:50%;box-sizing:border-box}input.radio_btn + label span.fake_checkbox,input.checkbox + label span.fake_checkbox{background:none}input.radio_btn:checked + label span.fake_checkbox,input.checkbox:checked + label span.fake_checkbox{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAABlBMVEUAAAAohsf74MZJAAAAAXRSTlMAQObYZgAAAGZJREFUKM/N0bENgCAURVEMxW9M/gYyyh8NRmMURqCkMGrz7gB20PgSzMlNSGmD0/U9hkaeGsZwrgo/R9OoMA/MDbN+MyfMBRMw0cSULsaHGJti8qo0UPNSU6kJago1To1Rkzd4lg/2jyJmiI74kgAAAABJRU5ErkJggg==) no-repeat 50%;background-size:contain}.fake_checkbox{display:block;height:20px;width:20px;float:left;box-shadow:1px 1px 1.5px -0.5px rgba(255,255,255,0.1),0.5px 1px 4px 0px rgba(0,0,0,0.7) inset;margin-right:20px}.colapse.opened{cursor:pointer;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAAgAQMAAACIM6IbAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAIRJREFUCNc1jssNxCAMRAchZY+U4HRCS+kgdLAtpZOkBI45ILyZ8cYCPX7zDACsiNr+vANpBPMMfjxYvInmh1j9EnfvorsEyU8Jsn9nxENQZpbARpKg3pBg7xzg5jkCL20w3p5IdOfkmme84xu+ZUZZOuiqHZVuu2DsVQ4U/aFh0Z/w1g/l9D7SKmj3zgAAAABJRU5ErkJggg==)}#settings .hollow_bg,#settings button{margin-top:20px}#settings div.opened{margin:auto;width:91%;padding:20px 5px 0 5px}#settings button{transition:all .2s;position:relative;background:rgba(0,0,0,0.4);cursor:pointer;margin-bottom:20px;padding-top:1px}input:focus,button:focus{outline:none}#settings button .icon{height:40px;width:40px;position:absolute;top:0;left:0;background-color:#27516c;background-position:50%;background-size:contain;background-repeat:no-repeat;display:block;transition:all .2s}#settings button:hover{background:#fff;color:#272e30}[type="submit"] .icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAAA/AQMAAABtkYKcAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAIxJREFUKM+1kcENgCAMRTEm4kkWMGETWcVNYDTchMQFOHow1ib9fwP1gD9N+/IKzv307Qwd/+FCGG8E/yAEViJ7EqdyQ5AKjBRg5E/MRMxCTCQmFWByBUbLhtFGw+io2ehpNlo3G+00G52FjRywySdsksAmCpYKgqW8dJo37lK5XeG+vP2NYWWYv3jdF4Q5RvuUW7T8AAAAAElFTkSuQmCC);background-size:24px!important}#settings button.small_btn{max-width:200px;margin-left:0}#settings label span{text-transform:none;font-size:16px;cursor:pointer}.cols-3{width:30%;float:left;padding-right:5%;min-width:130px}.cols-3.no-padding{padding:0}#settings .cols-3 .hollow_bg{margin:10px 0}@media screen and (max-width:515px){.cols-3{width:100%;padding-right:0}}.disabled{position:relative}.disabled::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:100}.disabled:hover::after{content:attr(data-disabled-text);position:absolute;left:50%;top:0;transform:translateX(-50%);background:rgba(0,0,0,0.7);text-align:center;color:#fff;padding:4px 2px;min-width:80px;border-radius:5px;pointer-events:none;z-index:101}#loading_holder,#overlay{position:fixed;width:100%;height:100%;bottom:0;z-index:101;background:rgba(0,0,0,0.7);padding:0}#overlay #message{position:absolute;text-align:center;width:50%;padding:16px;left:21%;top:50%;transform:translateY(-50%);background-color:#000;border:1px solid #3dcdff;overflow:hidden}#overlay #message a{color:#2886c7;cursor:pointer}#loading_holder .loading_text{position:absolute;text-align:center;width:100%;top:50%;transform:translateY(-50%)}#loading_holder #control_icon:after{content:'';position:absolute;height:100px;width:100px;right:0;top:0;bottom:0;left:0;margin:auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWAQMAAAAGz+OhAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAATJJREFUSMftlkFuhDAMRTOTBbvJEXIUjjY5GkfhCCxZoHENZKr4+7dM1apSKyyBxFNMcPi2fgg1sowBIonIAEyRLH4ZLuw3NrXosiF5tKzbmZSG5coGt4Vd98xt3xcJY/uGnS2EzYbdfR21NntambCkeT2cS7duacpQtqZle6bXcMbfjwsC/a2xALspwy5TNcQJWK9KmYHdy64oI2NlVuzaFkXVaFmnykygzvU5O2WPemEHrAw7hbPe5U5fYPgt0/ZOy+YPGNb280wcW4Jgd5+sMn9Wv/GPXtUL09p3tMt7hjHWb1jHyPvX9fnA5wGbG26+FD6HcF4lPtfO+G8R32/oVawkEvE0mXgf5puIT6yeaz7ya8zXxU885pHvTMR3Pr3oeJBLPSarjXll5qmp925nxRvThsrYgZ0foQAAAABJRU5ErkJggg==);background-size:cover;background-position:50%;-webkit-animation:spin 2s linear infinite}#message_holder *{text-transform:none;color:#272e30}#message_holder{display:none;position:fixed;font-size:16px;top:0;z-index:1000;left:0!important;background-color:#fff;right:0!important;margin:auto!important}#message_holder .message{width:100%}#message_holder #title_mes{border-bottom:2px solid #27516c;text-shadow:none;padding:10px;font-weight:bold;overflow:hidden;text-align:center}#message_holder #content_mes{text-align:center;font-size:16px;padding:12px;overflow:hidden}#message_holder #msg_status{height:50px}#message_holder.suc #msg_status{background-color:#61b832}#message_holder.err #msg_status{background-color:#de4343}#message_holder.info #msg_status{background-color:#2886c7}#message_holder #foot_mes{border-top:1px solid #27516c;width:100%;text-align:center}#message_holder #reboot_mes{border-top:1px solid #27516c;text-align:center;width:100%}#message_holder .actions{max-width:280px;padding-top:0;width:100%;display:inline-block}#message_holder .btnbox_msg{height:58px;float:left;width:50%}#message_holder .singlebtnbox_msg{height:58px;float:left;width:100%}#message_holder .btn{background:none;border:0;min-width:80px;height:60px;font-size:16px;width:100%}#message_holder .btn:hover{cursor:pointer;background-color:rgba(0,0,0,0.2)}#message_holder .btn_no{border-left:1px solid black}#close_msg{position:fixed;top:0;left:0;width:100%;height:100%}@-webkit-keyframes spin{100%{-webkit-transform:rotate(360deg)}}#footer{margin:10px;text-align:center;position:absolute;bottom:30px;left:0;right:0;margin:0 auto}#footer div a{cursor:pointer;color:#5393CE}.roller_device .relay_only{display:none}.roller_only{display:none}.roller_device .roller_only{display:block}button.action_more .icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF0AAABeAQMAAAB7K4ouAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAACBJREFUOMtjYBgFAwjkHww9Dvt/IGigPWdohs4oGAAAALAgP/2cuLDlAAAAAElFTkSuQmCC)}</style><script type=text/javascript>!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):e(t)}(this,function(t){var e=function(){function $(t){return null==t?String(t):S[C.call(t)]||"object"}function F(t){return"function"==$(t)}function k(t){return null!=t&&t==t.window}function M(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function R(t){return"object"==$(t)}function Z(t){return R(t)&&!k(t)&&Object.getPrototypeOf(t)==Object.prototype}function z(t){var e=!!t&&"length"in t&&t.length,n=r.type(t);return"function"!=n&&!k(t)&&("array"==n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function q(t){return a.call(t,function(t){return null!=t})}function H(t){return t.length>0?r.fn.concat.apply([],t):t}function I(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function V(t){return t in l?l[t]:l[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function _(t,e){return"number"!=typeof e||h[I(t)]?e:e+"px"}function B(t){var e,n;return c[t]||(e=f.createElement(t),f.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),c[t]=n),c[t]}function U(t){return"children"in t?u.call(t.children):r.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function X(t,e){var n,r=t?t.length:0;for(n=0;r>n;n++)this[n]=t[n];this.length=r,this.selector=e||""}function J(t,r,i){for(n in r)i&&(Z(r[n])||L(r[n]))?(Z(r[n])&&!Z(t[n])&&(t[n]={}),L(r[n])&&!L(t[n])&&(t[n]=[]),J(t[n],r[n],i)):r[n]!==e&&(t[n]=r[n])}function W(t,e){return null==e?r(t):r(t).filter(e)}function Y(t,e,n,r){return F(e)?e.call(t,n,r):e}function G(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function K(t,n){var r=t.className||"",i=r&&r.baseVal!==e;return n===e?i?r.baseVal:r:void(i?r.baseVal=n:t.className=n)}function Q(t){try{return t?"true"==t||("false"==t?!1:"null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?r.parseJSON(t):t):t}catch(e){return t}}function tt(t,e){e(t);for(var n=0,r=t.childNodes.length;r>n;n++)tt(t.childNodes[n],e)}var e,n,r,i,O,P,o=[],s=o.concat,a=o.filter,u=o.slice,f=t.document,c={},l={},h={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,d=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,g=/^(?:body|html)$/i,v=/([A-Z])/g,y=["val","css","html","text","data","width","height","offset"],x=["after","prepend","before","append"],b=f.createElement("table"),E=f.createElement("tr"),j={tr:f.createElement("tbody"),tbody:b,thead:b,tfoot:b,td:E,th:E,"*":f.createElement("div")},w=/complete|loaded|interactive/,T=/^[\w-]*$/,S={},C=S.toString,N={},A=f.createElement("div"),D={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},L=Array.isArray||function(t){return t instanceof Array};return N.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var r,i=t.parentNode,o=!i;return o&&(i=A).appendChild(t),r=~N.qsa(i,e).indexOf(t),o&&A.removeChild(t),r},O=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},P=function(t){return a.call(t,function(e,n){return t.indexOf(e)==n})},N.fragment=function(t,n,i){var o,s,a;return d.test(t)&&(o=r(f.createElement(RegExp.$1))),o||(t.replace&&(t=t.replace(m,"<$1></$2>")),n===e&&(n=p.test(t)&&RegExp.$1),n in j||(n="*"),a=j[n],a.innerHTML=""+t,o=r.each(u.call(a.childNodes),function(){a.removeChild(this)})),Z(i)&&(s=r(o),r.each(i,function(t,e){y.indexOf(t)>-1?s[t](e):s.attr(t,e)})),o},N.Z=function(t,e){return new X(t,e)},N.isZ=function(t){return t instanceof N.Z},N.init=function(t,n){var i;if(!t)return N.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&p.test(t))i=N.fragment(t,RegExp.$1,n),t=null;else{if(n!==e)return r(n).find(t);i=N.qsa(f,t)}else{if(F(t))return r(f).ready(t);if(N.isZ(t))return t;if(L(t))i=q(t);else if(R(t))i=[t],t=null;else if(p.test(t))i=N.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==e)return r(n).find(t);i=N.qsa(f,t)}}return N.Z(i,t)},r=function(t,e){return N.init(t,e)},r.extend=function(t){var e,n=u.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){J(t,n,e)}),t},N.qsa=function(t,e){var n,r="#"==e[0],i=!r&&"."==e[0],o=r||i?e.slice(1):e,s=T.test(o);return t.getElementById&&s&&r?(n=t.getElementById(o))?[n]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:u.call(s&&!r&&t.getElementsByClassName?i?t.getElementsByClassName(o):t.getElementsByTagName(e):t.querySelectorAll(e))},r.contains=f.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},r.type=$,r.isFunction=F,r.isWindow=k,r.isArray=L,r.isPlainObject=Z,r.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},r.isNumeric=function(t){var e=Number(t),n=typeof t;return null!=t&&"boolean"!=n&&("string"!=n||t.length)&&!isNaN(e)&&isFinite(e)||!1},r.inArray=function(t,e,n){return o.indexOf.call(e,t,n)},r.camelCase=O,r.trim=function(t){return null==t?"":String.prototype.trim.call(t)},r.uuid=0,r.support={},r.expr={},r.noop=function(){},r.map=function(t,e){var n,i,o,r=[];if(z(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&r.push(n);else for(o in t)n=e(t[o],o),null!=n&&r.push(n);return H(r)},r.each=function(t,e){var n,r;if(z(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(r in t)if(e.call(t[r],r,t[r])===!1)return t;return t},r.grep=function(t,e){return a.call(t,e)},t.JSON&&(r.parseJSON=JSON.parse),r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){S["[object "+e+"]"]=e.toLowerCase()}),r.fn={constructor:N.Z,length:0,forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,splice:o.splice,indexOf:o.indexOf,concat:function(){var t,e,n=[];for(t=0;t<arguments.length;t++)e=arguments[t],n[t]=N.isZ(e)?e.toArray():e;return s.apply(N.isZ(this)?this.toArray():this,n)},map:function(t){return r(r.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return r(u.apply(this,arguments))},ready:function(t){return w.test(f.readyState)&&f.body?t(r):f.addEventListener("DOMContentLoaded",function(){t(r)},!1),this},get:function(t){return t===e?u.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return o.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return F(t)?this.not(this.not(t)):r(a.call(this,function(e){return N.matches(e,t)}))},add:function(t,e){return r(P(this.concat(r(t,e))))},is:function(t){return this.length>0&&N.matches(this[0],t)},not:function(t){var n=[];if(F(t)&&t.call!==e)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):z(t)&&F(t.item)?u.call(t):r(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return r(n)},has:function(t){return this.filter(function(){return R(t)?r.contains(this,t):r(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!R(t)?t:r(t)},last:function(){var t=this[this.length-1];return t&&!R(t)?t:r(t)},find:function(t){var e,n=this;return e=t?"object"==typeof t?r(t).filter(function(){var t=this;return o.some.call(n,function(e){return r.contains(e,t)})}):1==this.length?r(N.qsa(this[0],t)):this.map(function(){return N.qsa(this,t)}):r()},closest:function(t,e){var n=[],i="object"==typeof t&&r(t);return this.each(function(r,o){for(;o&&!(i?i.indexOf(o)>=0:N.matches(o,t));)o=o!==e&&!M(o)&&o.parentNode;o&&n.indexOf(o)<0&&n.push(o)}),r(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=r.map(n,function(t){return(t=t.parentNode)&&!M(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return W(e,t)},parent:function(t){return W(P(this.pluck("parentNode")),t)},children:function(t){return W(this.map(function(){return U(this)}),t)},contents:function(){return this.map(function(){return this.contentDocument||u.call(this.childNodes)})},siblings:function(t){return W(this.map(function(t,e){return a.call(U(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return r.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=B(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=F(t);if(this[0]&&!e)var n=r(t).get(0),i=n.parentNode||this.length>1;return this.each(function(o){r(this).wrapAll(e?t.call(this,o):i?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){r(this[0]).before(t=r(t));for(var e;(e=t.children()).length;)t=e.first();r(t).append(this)}return this},wrapInner:function(t){var e=F(t);return this.each(function(n){var i=r(this),o=i.contents(),s=e?t.call(this,n):t;o.length?o.wrapAll(s):i.append(s)})},unwrap:function(){return this.parent().each(function(){r(this).replaceWith(r(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var n=r(this);(t===e?"none"==n.css("display"):t)?n.show():n.hide()})},prev:function(t){return r(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return r(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;r(this).empty().append(Y(this,t,e,n))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=Y(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,r){var i;return"string"!=typeof t||1 in arguments?this.each(function(e){if(1===this.nodeType)if(R(t))for(n in t)G(this,n,t[n]);else G(this,t,Y(this,r,e,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(t))?i:e},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){G(this,t)},this)})},prop:function(t,e){return t=D[t]||t,1 in arguments?this.each(function(n){this[t]=Y(this,e,n,this[t])}):this[0]&&this[0][t]},removeProp:function(t){return t=D[t]||t,this.each(function(){delete this[t]})},data:function(t,n){var r="data-"+t.replace(v,"-$1").toLowerCase(),i=1 in arguments?this.attr(r,n):this.attr(r);return null!==i?Q(i):e},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=Y(this,t,e,this.value)})):this[0]&&(this[0].multiple?r(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var n=r(this),i=Y(this,e,t,n.offset()),o=n.offsetParent().offset(),s={top:i.top-o.top,left:i.left-o.left};"static"==n.css("position")&&(s.position="relative"),n.css(s)});if(!this.length)return null;if(f.documentElement!==this[0]&&!r.contains(f.documentElement,this[0]))return{top:0,left:0};var n=this[0].getBoundingClientRect();return{left:n.left+t.pageXOffset,top:n.top+t.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}},css:function(t,e){if(arguments.length<2){var i=this[0];if("string"==typeof t){if(!i)return;return i.style[O(t)]||getComputedStyle(i,"").getPropertyValue(t)}if(L(t)){if(!i)return;var o={},s=getComputedStyle(i,"");return r.each(t,function(t,e){o[e]=i.style[O(e)]||s.getPropertyValue(e)}),o}}var a="";if("string"==$(t))e||0===e?a=I(t)+":"+_(t,e):this.each(function(){this.style.removeProperty(I(t))});else for(n in t)t[n]||0===t[n]?a+=I(n)+":"+_(n,t[n])+";":this.each(function(){this.style.removeProperty(I(n))});return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf(r(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?o.some.call(this,function(t){return this.test(K(t))},V(t)):!1},addClass:function(t){return t?this.each(function(e){if("className"in this){i=[];var n=K(this),o=Y(this,t,e,n);o.split(/\s+/g).forEach(function(t){r(this).hasClass(t)||i.push(t)},this),i.length&&K(this,n+(n?" ":"")+i.join(" "))}}):this},removeClass:function(t){return this.each(function(n){if("className"in this){if(t===e)return K(this,"");i=K(this),Y(this,t,n,i).split(/\s+/g).forEach(function(t){i=i.replace(V(t)," ")}),K(this,i.trim())}})},toggleClass:function(t,n){return t?this.each(function(i){var o=r(this),s=Y(this,t,i,K(this));s.split(/\s+/g).forEach(function(t){(n===e?!o.hasClass(t):n)?o.addClass(t):o.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=g.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(r(t).css("margin-top"))||0,n.left-=parseFloat(r(t).css("margin-left"))||0,i.top+=parseFloat(r(e[0]).css("border-top-width"))||0,i.left+=parseFloat(r(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||f.body;t&&!g.test(t.nodeName)&&"static"==r(t).css("position");)t=t.offsetParent;return t})}},r.fn.detach=r.fn.remove,["width","height"].forEach(function(t){var n=t.replace(/./,function(t){return t[0].toUpperCase()});r.fn[t]=function(i){var o,s=this[0];return i===e?k(s)?s["inner"+n]:M(s)?s.documentElement["scroll"+n]:(o=this.offset())&&o[t]:this.each(function(e){s=r(this),s.css(t,Y(this,i,e,s[t]()))})}}),x.forEach(function(n,i){var o=i%2;r.fn[n]=function(){var n,a,s=r.map(arguments,function(t){var i=[];return n=$(t),"array"==n?(t.forEach(function(t){return t.nodeType!==e?i.push(t):r.zepto.isZ(t)?i=i.concat(t.get()):void(i=i.concat(N.fragment(t)))}),i):"object"==n||null==t?t:N.fragment(t)}),u=this.length>1;return s.length<1?this:this.each(function(e,n){a=o?n:n.parentNode,n=0==i?n.nextSibling:1==i?n.firstChild:2==i?n:null;var c=r.contains(f.documentElement,a);s.forEach(function(e){if(u)e=e.cloneNode(!0);else if(!a)return r(e).remove();a.insertBefore(e,n),c&&tt(e,function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var n=e.ownerDocument?e.ownerDocument.defaultView:t;n.eval.call(n,e.innerHTML)}})})})},r.fn[o?n+"To":"insert"+(i?"Before":"After")]=function(t){return r(t)[n](this),this}}),N.Z.prototype=X.prototype=r.fn,N.uniq=P,N.deserializeValue=Q,r.zepto=N,r}();return t.Zepto=e,void 0===t.$&&(t.$=e),function(e){function h(t){return t._zid||(t._zid=n++)}function p(t,e,n,r){if(e=d(e),e.ns)var i=m(e.ns);return(a[h(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||i.test(t.ns))&&(!n||h(t.fn)===h(n))&&(!r||t.sel==r)})}function d(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function m(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function g(t,e){return t.del&&!f&&t.e in c||!!e}function v(t){return l[t]||f&&c[t]||t}function y(t,n,i,o,s,u,f){var c=h(t),p=a[c]||(a[c]=[]);n.split(/\s/).forEach(function(n){if("ready"==n)return e(document).ready(i);var a=d(n);a.fn=i,a.sel=s,a.e in l&&(i=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?a.fn.apply(this,arguments):void 0}),a.del=u;var c=u||i;a.proxy=function(e){if(e=T(e),!e.isImmediatePropagationStopped()){e.data=o;var n=c.apply(t,e._args==r?[e]:[e].concat(e._args));return n===!1&&(e.preventDefault(),e.stopPropagation()),n}},a.i=p.length,p.push(a),"addEventListener"in t&&t.addEventListener(v(a.e),a.proxy,g(a,f))})}function x(t,e,n,r,i){var o=h(t);(e||"").split(/\s/).forEach(function(e){p(t,e,n,r).forEach(function(e){delete a[o][e.i],"removeEventListener"in t&&t.removeEventListener(v(e.e),e.proxy,g(e,i))})})}function T(t,n){return(n||!t.isDefaultPrevented)&&(n||(n=t),e.each(w,function(e,r){var i=n[e];t[e]=function(){return this[r]=b,i&&i.apply(n,arguments)},t[r]=E}),t.timeStamp||(t.timeStamp=Date.now()),(n.defaultPrevented!==r?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=b)),t}function S(t){var e,n={originalEvent:t};for(e in t)j.test(e)||t[e]===r||(n[e]=t[e]);return T(n,t)}var r,n=1,i=Array.prototype.slice,o=e.isFunction,s=function(t){return"string"==typeof t},a={},u={},f="onfocusin"in t,c={focus:"focusin",blur:"focusout"},l={mouseenter:"mouseover",mouseleave:"mouseout"};u.click=u.mousedown=u.mouseup=u.mousemove="MouseEvents",e.event={add:y,remove:x},e.proxy=function(t,n){var r=2 in arguments&&i.call(arguments,2);if(o(t)){var a=function(){return t.apply(n,r?r.concat(i.call(arguments)):arguments)};return a._zid=h(t),a}if(s(n))return r?(r.unshift(t[n],t),e.proxy.apply(null,r)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(t,e,n){return this.on(t,e,n)},e.fn.unbind=function(t,e){return this.off(t,e)},e.fn.one=function(t,e,n,r){return this.on(t,e,n,r,1)};var b=function(){return!0},E=function(){return!1},j=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,w={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,e,n){return this.on(e,t,n)},e.fn.undelegate=function(t,e,n){return this.off(e,t,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,a,u,f){var c,l,h=this;return t&&!s(t)?(e.each(t,function(t,e){h.on(t,n,a,e,f)}),h):(s(n)||o(u)||u===!1||(u=a,a=n,n=r),(u===r||a===!1)&&(u=a,a=r),u===!1&&(u=E),h.each(function(r,o){f&&(c=function(t){return x(o,t.type,u),u.apply(this,arguments)}),n&&(l=function(t){var r,s=e(t.target).closest(n,o).get(0);return s&&s!==o?(r=e.extend(S(t),{currentTarget:s,liveFired:o}),(c||u).apply(s,[r].concat(i.call(arguments,1)))):void 0}),y(o,t,u,a,n,l||c)}))},e.fn.off=function(t,n,i){var a=this;return t&&!s(t)?(e.each(t,function(t,e){a.off(t,n,e)}),a):(s(n)||o(i)||i===!1||(i=n,n=r),i===!1&&(i=E),a.each(function(){x(this,t,i,n)}))},e.fn.trigger=function(t,n){return t=s(t)||e.isPlainObject(t)?e.Event(t):T(t),t._args=n,this.each(function(){t.type in c&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,n){var r,i;return this.each(function(o,a){r=S(s(t)?e.Event(t):t),r._args=n,r.target=a,e.each(p(a,t.type||t),function(t,e){return i=e.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),i},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),e.Event=function(t,e){s(t)||(e=t,t=e.type);var n=document.createEvent(u[t]||"Events"),r=!0;if(e)for(var i in e)"bubbles"==i?r=!!e[i]:n[i]=e[i];return n.initEvent(t,r,!0),T(n)}}(e),function(e){function p(t,n,r){var i=e.Event(n);return e(t).trigger(i,r),!i.isDefaultPrevented()}function d(t,e,n,i){return t.global?p(e||r,n,i):void 0}function m(t){t.global&&0===e.active++&&d(t,null,"ajaxStart")}function g(t){t.global&&!--e.active&&d(t,null,"ajaxStop")}function v(t,e){var n=e.context;return e.beforeSend.call(n,t,e)===!1||d(e,n,"ajaxBeforeSend",[t,e])===!1?!1:void d(e,n,"ajaxSend",[t,e])}function y(t,e,n,r){var i=n.context,o="success";n.success.call(i,t,o,e),r&&r.resolveWith(i,[t,o,e]),d(n,i,"ajaxSuccess",[e,n,t]),b(o,e,n)}function x(t,e,n,r,i){var o=r.context;r.error.call(o,n,e,t),i&&i.rejectWith(o,[n,e,t]),d(r,o,"ajaxError",[n,r,t||e]),b(e,n,r)}function b(t,e,n){var r=n.context;n.complete.call(r,e,t),d(n,r,"ajaxComplete",[e,n]),g(n)}function E(t,e,n){if(n.dataFilter==j)return t;var r=n.context;return n.dataFilter.call(r,t,e)}function j(){}function w(t){return t&&(t=t.split(";",2)[0]),t&&(t==c?"html":t==f?"json":a.test(t)?"script":u.test(t)&&"xml")||"text"}function T(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function S(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=T(t.url,t.data),t.data=void 0)}function C(t,n,r,i){return e.isFunction(n)&&(i=r,r=n,n=void 0),e.isFunction(r)||(i=r,r=void 0),{url:t,data:n,success:r,dataType:i}}function O(t,n,r,i){var o,s=e.isArray(n),a=e.isPlainObject(n);e.each(n,function(n,u){o=e.type(u),i&&(n=r?i:i+"["+(a||"object"==o||"array"==o?n:"")+"]"),!i&&s?t.add(u.name,u.value):"array"==o||!r&&"object"==o?O(t,u,r,n):t.add(n,u)})}var i,o,n=+new Date,r=t.document,s=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,a=/^(?:text|application)\/javascript/i,u=/^(?:text|application)\/xml/i,f="application/json",c="text/html",l=/^\s*$/,h=r.createElement("a");h.href=t.location.href,e.active=0,e.ajaxJSONP=function(i,o){if(!("type"in i))return e.ajax(i);var c,p,s=i.jsonpCallback,a=(e.isFunction(s)?s():s)||"Zepto"+n++,u=r.createElement("script"),f=t[a],l=function(t){e(u).triggerHandler("error",t||"abort")},h={abort:l};return o&&o.promise(h),e(u).on("load error",function(n,r){clearTimeout(p),e(u).off().remove(),"error"!=n.type&&c?y(c[0],h,i,o):x(null,r||"error",h,i,o),t[a]=f,c&&e.isFunction(f)&&f(c[0]),f=c=void 0}),v(h,i)===!1?(l("abort"),h):(t[a]=function(){c=arguments},u.src=i.url.replace(/\?(.+)=\?/,"?$1="+a),r.head.appendChild(u),i.timeout>0&&(p=setTimeout(function(){l("timeout")},i.timeout)),h)},e.ajaxSettings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new t.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:f,xml:"application/xml, text/xml",html:c,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:j},e.ajax=function(n){var u,f,s=e.extend({},n||{}),a=e.Deferred&&e.Deferred();for(i in e.ajaxSettings)void 0===s[i]&&(s[i]=e.ajaxSettings[i]);m(s),s.crossDomain||(u=r.createElement("a"),u.href=s.url,u.href=u.href,s.crossDomain=h.protocol+"//"+h.host!=u.protocol+"//"+u.host),s.url||(s.url=t.location.toString()),(f=s.url.indexOf("#"))>-1&&(s.url=s.url.slice(0,f)),S(s);var c=s.dataType,p=/\?.+=\?/.test(s.url);if(p&&(c="jsonp"),s.cache!==!1&&(n&&n.cache===!0||"script"!=c&&"jsonp"!=c)||(s.url=T(s.url,"_="+Date.now())),"jsonp"==c)return p||(s.url=T(s.url,s.jsonp?s.jsonp+"=?":s.jsonp===!1?"":"callback=?")),e.ajaxJSONP(s,a);var P,d=s.accepts[c],g={},b=function(t,e){g[t.toLowerCase()]=[t,e]},C=/^([\w-]+:)\/\//.test(s.url)?RegExp.$1:t.location.protocol,N=s.xhr(),O=N.setRequestHeader;if(a&&a.promise(N),s.crossDomain||b("X-Requested-With","XMLHttpRequest"),b("Accept",d||"*/*"),(d=s.mimeType||d)&&(d.indexOf(",")>-1&&(d=d.split(",",2)[0]),N.overrideMimeType&&N.overrideMimeType(d)),(s.contentType||s.contentType!==!1&&s.data&&"GET"!=s.type.toUpperCase())&&b("Content-Type",s.contentType||"application/x-www-form-urlencoded"),s.headers)for(o in s.headers)b(o,s.headers[o]);if(N.setRequestHeader=b,N.onreadystatechange=function(){if(4==N.readyState){N.onreadystatechange=j,clearTimeout(P);var t,n=!1;if(N.status>=200&&N.status<300||304==N.status||0==N.status&&"file:"==C){if(c=c||w(s.mimeType||N.getResponseHeader("content-type")),"arraybuffer"==N.responseType||"blob"==N.responseType)t=N.response;else{t=N.responseText;try{t=E(t,c,s),"script"==c?(1,eval)(t):"xml"==c?t=N.responseXML:"json"==c&&(t=l.test(t)?null:e.parseJSON(t))}catch(r){n=r}if(n)return x(n,"parsererror",N,s,a)}y(t,N,s,a)}else x(N.statusText||null,N.status?"error":"abort",N,s,a)}},v(N,s)===!1)return N.abort(),x(null,"abort",N,s,a),N;var A="async"in s?s.async:!0;if(N.open(s.type,s.url,A,s.username,s.password),s.xhrFields)for(o in s.xhrFields)N[o]=s.xhrFields[o];for(o in g)O.apply(N,g[o]);return s.timeout>0&&(P=setTimeout(function(){N.onreadystatechange=j,N.abort(),x(null,"timeout",N,s,a)},s.timeout)),N.send(s.data?s.data:null),N},e.get=function(){return e.ajax(C.apply(null,arguments))},e.post=function(){var t=C.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=C.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,r){if(!this.length)return this;var a,i=this,o=t.split(/\s/),u=C(t,n,r),f=u.success;return o.length>1&&(u.url=o[0],a=o[1]),u.success=function(t){i.html(a?e("<div>").html(t.replace(s,"")).find(a):t),f&&f.apply(i,arguments)},e.ajax(u),this};var N=encodeURIComponent;e.param=function(t,n){var r=[];return r.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(N(t)+"="+N(n))},O(r,t,n),r.join("&").replace(/%20/g,"+")}}(e),function(t){t.fn.serializeArray=function(){var e,n,r=[],i=function(t){return t.forEach?t.forEach(i):void r.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,function(r,o){n=o.type,e=o.name,e&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked)&&i(t(o).val())}),r},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(e),function(){try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;t.getComputedStyle=function(t,e){try{return n(t,e)}catch(r){return null}}}}(),e});</script><script type=text/javascript>var Messages={callback:null,t:null,showLoading:function(text){if(text)
$('#loading_holder .loading_text').text(text);else
$('#loading_holder .loading_text').text('Loading');$("#loading_holder").show();$('body').addClass('stop-scrolling');},showBlockingOverlay:function(){$("#overlay").show();$('body').addClass('stop-scrolling');},hideLoading:function(){$("#loading_holder").hide();$('body').removeClass('stop-scrolling');},upgradeFirmMsg:function(){$('#message_holder').addClass('info');$('#msg_status').show();Messages.showLoading();$('#content_mes').html('This could take up to 5 minutes');$('#title_mes').html('Device is currently updating its firmware');$('#message_holder').show();$('#foot_mes').hide();},hideMsg:function(){if(!(this.t===null)){clearTimeout(this.t);this.t=null;}
$('#message_holder').removeClass('err').removeClass('suc').removeClass('info');$('#message_holder').hide();},showMessage:function(title,content,type,cb){this.callback=cb;if(!title)
title='';if(!content)
content='';$('#content_mes').html(content);$('#title_mes').html(title);if(type==='yes_no'){$('#foot_mes .btn_yes').html('Yes');$('#foot_mes .btn_no').html('No');$('#foot_mes').show();$('#close_msg').hide();$('#msg_status').hide();$('#reboot_mes').hide();$('#content_mes').css("background-color","white");}else if(type==='reboot'){$('#reboot_mes .btn_reboot').html('Reboot now');$('#reboot_mes').show();$('#foot_mes').hide();$('#close_msg').hide();$('#msg_status').hide();$('#content_mes').css("background-color","white");}else if(type==='sta_cache_reset'){$('#reboot_mes').hide();$('#foot_mes').hide();$('#close_msg').hide();$('#msg_status').hide();$('#content_mes').css("background-color","white");}else if(type==='next_cancel'){$('#foot_mes .btn_yes').html('Next');$('#foot_mes .btn_no').html('Cancel');$('#foot_mes').show();$('#close_msg').hide();$('#reboot_mes').hide();$('#msg_status').hide();$('#content_mes').css("background-color","white");}else if(type==='conf'){$('#close_msg').show();$('#message_holder').addClass('suc');$('#content_mes').css("background-color","white");}else if(type==='error'){$('#close_msg').show();$('#message_holder').addClass('err');$('#content_mes').css("background-color","white");}else if(type==="error_confirm"){$('#foot_mes').hide();$('#reboot_mes').hide();$('#close_msg').show();$('#title_mes').css("background-color","red");$('#message_holder').addClass('suc');}else if(type==='yes_no_red'){$('#foot_mes .btn_yes').html('Yes');$('#foot_mes .btn_no').html('No');$('#foot_mes').show();$('#close_msg').hide();$('#msg_status').hide();$('#reboot_mes').hide();$('#content_mes').css("background-color","red");}
if(type==='conf'||type==='error'){$('#message_holder').removeClass('yes_no');$('#foot_mes').hide();$('#reboot_mes').hide();$('#msg_status').show();if(!(this.t===null)){clearTimeout(this.t);}
this.t=setTimeout(function(){Messages.hideMsg();},3000);}
$('#message_holder').show();},answer:function(res){Messages.hideMsg();if(typeof this.callback==='function'){this.callback(res);}}};Zepto(function($){$('.btnbox_msg .btn_yes').on('click',function(){Messages.answer(true);});$('.singlebtnbox_msg .btn_reboot').on('click',function(){Messages.answer(true);});$('.btnbox_msg .btn_no').on('click',function(){Messages.answer(false);});$('#close_msg').on('click',function(evt){Messages.hideMsg();});});</script><script type=text/javascript>var Settings={initComponentTemplate:function(templateId,newId){$('#'+newId).find('[id]').each(function(){$(this).attr('id',$(this).attr('id').replace(templateId,newId));});$('#'+newId).find('label').each(function(){$(this).attr('for',$(this).attr('for').replace(templateId,newId));});$('#'+newId).find('[data-colapse]').each(function(){$(this).attr('data-colapse',$(this).attr('data-colapse').replace(templateId,newId));});$('#'+newId+' .colapse').on('click',function(){Settings.collapseSettings($(this));});},appendComponentTemplate:function(templateId,newId,toSelector){$('#'+templateId).clone().attr('id',newId).appendTo(toSelector);this.initComponentTemplate(templateId,newId);},prependComponentTemplate:function(templateId,newId,toSelector){$('#'+templateId).clone().attr('id',newId).prependTo(toSelector);this.initComponentTemplate(templateId,newId);},toggleContent:function(el){if(Settings.checkIfActive()){return;}else{var container_id=$(el).data("tab");var container=$(el).closest(".settings_wrapper").find("#"+container_id);if(container.hasClass(".open")){return;}
$(".settings_tab_cont.open").removeClass("open").hide();container.show().addClass("open");document.getElementById("settings_buttons").scrollIntoView();if($('#general_settings').length>0){document.getElementById("general_settings").scrollIntoView()}}},change:function(url,message,cb){Messages.showLoading();if(message===''||message===undefined)
message='Settings changed';Shelly.sendRequest(url,"",{},function(res){Messages.hideLoading();Messages.showMessage("Success",message,'conf');Shelly.updateConf('settings');if(typeof cb=='function')cb(true);},function(err){Messages.hideLoading();Messages.showMessage("Error",err,'error');if(typeof cb=='function')cb(false);});},changeTry:function(url,message,cb){Messages.showLoading();if(message===''||message===undefined)
message='Settings changed';Shelly.sendRequest(url,"",{},function(res){Messages.hideLoading();Messages.showMessage("Success",message,'conf');Shelly.updateConf('settings');if(typeof cb=='function')cb(true,'');},function(err){Messages.hideLoading();if(typeof cb=='function')cb(false,err);else
Messages.showMessage("Error",err,'error');});},changePost:function(url,params,message,errorCallback){if(!params){params={};}
Messages.showLoading();if(message===''||message===undefined)
message='Settings changed';Shelly.sendRequest(url,"POST",params,function(res){Messages.hideLoading();Messages.showMessage("Success",message,'conf');Shelly.updateConf('settings');},function(err){Messages.hideLoading();Messages.showMessage("Error",err,'error');if(typeof errorCallback=='function')errorCallback(err);});},updateCurrentStatus:function(url,loading_element){loading_element.show();Shelly.sendRequest(url,'',{},function success(){loading_element.hide();Shelly.updateConf('status');},function error(err){loading_element.hide();Messages.showMessage("Error","Could not update the current status",'error');});},checkIfActive:function(){if($.isEmptyObject(Shelly.currentSettings)&&$.isEmptyObject(Shelly.currentStatus)){return true;}},goToHomePage:function(){window.location.reload();},hasChannels:function(){return"1">1;},validateChannel:function(){var channel_num;if(this.hasChannels()){var chan=$('#channel_page').data('channel');chan==undefined||chan===-1?channel_num=0:channel_num=chan;}else{channel_num=0;}
return channel_num;},validateDevice:function(request){var type_set;var device_type=Shelly.currentSettings.mode;device_type==='roller'?type_set='roller':type_set='relay';if(request){}
return type_set;},checkChannelCount:function(){return Channel.selectedChannel===-1||Channel.selectedChannel===undefined?false:true;},collapseSettings:function(element){if(Settings.checkIfActive()){return;}else{if(element.hasClass('opened')){element.removeClass('opened').addClass('closed');element.closest('#settings').find('#'+element.data('colapse')).removeClass('opened').addClass('closed');}else{element.addClass('opened').removeClass('closed');;element.closest('#settings').find('#'+element.data('colapse')).addClass('opened').removeClass('closed');}}},fillValue:function(element,value){element.text(value);}};Zepto(function($){$('.settings_tab').on('click',function(){;Settings.toggleContent($(this));});$('.colapse').on('click',function(){Settings.collapseSettings($(this));});$('.logo').on('click',function(){Settings.goToHomePage();});});</script><script type=text/javascript>var Shelly={apiRequest:function(url,type,params,successCallback,errorCallback){if(!type)
type="GET";$.ajax({type:type,url:"https://api.shelly.cloud/"+url,data:params,timeout:60000,success:function(data){if(data&&data.isok){if(typeof successCallback=='function'){successCallback(data);}}else{if(typeof errorCallback=='function'){errorCallback(data);}}},error:function(xhr,errorType,error){if(typeof errorCallback=='function'){errorCallback({isok:false});}}});},sendRequest:function(url,type,params,successCallback,errorCallback){if(!type)
type="GET";$.ajax({type:type,url:"/"+url,data:params,timeout:60000,success:function(data){if(typeof successCallback=='function'){successCallback(data);}},error:function(xhr,errorType,error){var err_msg="Device could not be reached";if(xhr.response){err_msg=xhr.response;}
if(typeof errorCallback=='function')errorCallback(err_msg);}});},updateConf:function(type,cb){Shelly.sendRequest(type,'GET',{},function(s){Shelly.fillData('current'+type.charAt(0).toUpperCase()+type.slice(1),s);$(document).trigger('Shelly:'+type);if(typeof cb=='function')cb(true);},function(){if(typeof cb=='function')cb(false);});},fillData:function(object,data){Shelly[object]=data;},loadActions:function(ch,cb){Shelly.sendRequest("settings/actions/?index="+ch,'GET',{},function(s){Shelly['currentActions']=s;$(document).trigger('Shelly:actions');if(typeof cb=='function')cb(true);},function(){if(typeof cb=='function')cb(false);});},loadActionsAll:function(cb){Shelly.sendRequest("settings/actions/",'GET',{},function(s){Shelly['currentActions']=s;$(document).trigger('Shelly:actions');if(typeof cb=='function')cb(true);},function(){if(typeof cb=='function')cb(false);});},currentSettings:{},currentStatus:{},currentActions:{}};Zepto(function($){var statusUpdate=setInterval(function(){Shelly.updateConf('status');},5000);Shelly.updateConf('status');Shelly.updateConf('settings',function(isok){if(!isok){Messages.showMessage("Could not fetch device settings","Device is unavailable",'error');}
Messages.hideLoading();});});</script><script type=text/javascript>var Header={connection:'on',isIOS:'no',updateTime:function(){if(Settings.checkIfActive()){return;}else{if(Shelly.currentStatus.time===''){$('#time').html('--:--');}else{$('#time').html(Shelly.currentStatus.time);}}},detectIosDevice:function(){var iOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(iOS){this.isIOS='yes'}},updateWifiStatus:function(){if(typeof Shelly.currentSettings=='undefined')return;if(typeof Shelly.currentSettings.wifi_sta=='undefined')return;if(Settings.checkIfActive()){return;}else{var status=!Shelly.currentSettings.wifi_ap.enabled;$('#status').attr('title','Connected to WiFi network');$('#status').removeClass('off').removeClass('on1').removeClass('on2').removeClass('on');if(status){if(typeof Shelly.currentStatus=='undefined')return;if(typeof Shelly.currentStatus.wifi_sta=='undefined')return;var rssi=Shelly.currentStatus.wifi_sta.rssi;if(rssi>-67)$('#status').addClass('on');else if(rssi>-75)$('#status').addClass('on2');else $('#status').addClass('on1');}else{$('#status').addClass('off');$('#status').addClass('Access Point WiFi mode');}}},updateCloudStatus:function(){if(Settings.checkIfActive()){return;}else{var status=Shelly.currentStatus.cloud.connected;var isEnable=Shelly.currentStatus.cloud.enabled;if(!status&&isEnable){$('#cloud').removeClass('off').removeClass('off').addClass('loading');$('#cloud').attr('title','Trying to establish cloud connection');}else{if(status){$('#cloud').attr('title','Connected to cloud');$('#cloud').removeClass('off').removeClass('loading').addClass('on');}else{$('#cloud').attr('title','Cloud connection disabled');$('#cloud').removeClass('on').removeClass('loading').addClass('off');}}}},updateAuthenticationStatus:function(){if(Settings.checkIfActive()){return;}else{var status=Shelly.currentSettings.login.enabled;if(status){$('#auth').addClass('lock').removeClass('unlock');$('#auth').attr('title','The web interface of this device is protected by username and password');}else{$('#auth').addClass('unlock').removeClass('lock');$('#auth').attr('title','The web interface of this device is not protected by a password');}}}};Zepto(function($){$(document).on('Shelly:settings',function(){Header.updateWifiStatus();Header.updateAuthenticationStatus();if(Object.keys(Shelly.currentSettings).length>0){var dev_name=Shelly.currentSettings.name;if(dev_name&&dev_name.length>0){$("#device_name h1").html(dev_name).show();}}}).on('Shelly:status',function(){Header.updateTime();Header.updateWifiStatus();Header.updateCloudStatus();}).ready(function(){Header.detectIosDevice();});$('body').on('touchmove',function(event){if(Header.isIOS==='yes'){event=event.originalEvent||event;if(event.scale>1){event.preventDefault();}}});});</script><style type=text/css>#shelly_logo{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAiCAMAAAAtWWZIAAAAYFBMVEVraW1qZ2tma21sam5obG9pbXBubHBqbnFrb3JscHNxb3NtcXRvc3Y4kMk6kctGj8o8ksw9k80yltU+lM40l9ZClNU2mNdAls83mdhBl9BMlM85mtpDmNJEmdM8nNtGmtRDljc5AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfjAxQLExSzvwOaAAADGUlEQVRYw+1YYZObIBAlZzwwufE0Y3U4Z9r//y+rAsvbhUg6ybRNm/1whwbNPt57uxClXvGK3xl2onjE64bpMvwJGBOLy/3vU/McxgftI1ye47xjuLuEoaHmTyyrLOIWOtawdwP5roZR9ZQsJlbro8okv6RvBAxCYu2tSLb0+0iNQ9bdQCKN+ORWjcRI4/IxPq9G15C8BnIawqHY6CtJ/BoSsMbgGJnLXllnOBuMGRLtMFiZrN64gNwXmX3QuNbvPnvA6b7JAi83AOlJY+7OvsB6InF7Zrw6sfIrHdacLoXMjOfNpML/gfraAwLSQs+Uq1x7w+SapFTrw4oGMm10xVXG+GBCIgi2CGTC4lksXbG6Fdg76zcCotc/JmsR7ejK4JiQhGlXWn5RO5alLVt9I6QtsKc1GzWYKsisWomrUXchvoCKgtmVqLpSaZmI1WAqFLiQW629eBRPHhVodG6Vo0VKOKS2xl+pWftWX5KlMLIdosyMFuxRJ7H7RQsbYLhq4bM+1GLZMmPN6rjGAvztzhyTDXF2latGryvpdflUo5CItGhNHAcXyGUdfzKacHrHlMU1NoY7VCpOkQ2X+zHr9cOqwAraSuBFMbPKopVuD9Ek/iMb75FpRr/8cdFpThvm8DeLOoSXbyCzKjFQmO1JACDge5tsc1MgAJYT1/nnLW8iYdCzVx/0iaf2gX29Eu0wQd14r0d3WKastIeBtIZEd3PIu/N3xlRZn4GkGd22rPQ7fs0JUzXRL36jZVj53foOtcPlv03aoc0S4isuQaDKNKNqeKUijU1hNn/1GT3Bcl+l1aAZ3D8syJuzqKPveD2rLNrKW+95D6TbPrtas8ILB36gEWJh7dB3c9zwGg1bTFchXBtRioov2wxzJOxqDON5ujNWfqRFxNEEWwwh4TeT0we/znyv3J7ci2OknTseCNmRycijICK5djyUwPIwnKAyps/Ht3g6vrYw+yFgRJ548yidDh/4a8MGfPB6fPbfYSx2yqeNrUK3/wAhl7CtGdTTM2IV6+pPGv3DfhT7O350fX4ccQfziv80fgJrSHmg/kL7mgAAAABJRU5ErkJggg==) no-repeat 0 60%}#shelly_plug_ch #channel_page{display:block}#shelly_plug_ch .def_switch{display:none}#overtemperature_warning{display:none;margin:auto;width:96%;position:relative;margin-bottom:12px;background-color:#43484B;padding-top:10px;padding-bottom:10px;text-align:center;font-weight:bold;text-shadow:2px 2px #333333;color:#FA2020}</style><script type=text/javascript>var Plug={setChanNum:function(el){var channelNum=0;if(!$.isEmptyObject(Shelly.currentStatus)){if(Shelly.currentStatus.update.has_update)
$('#settings_buttons .device_bulk_status').show();else
$('#device_settings .device_bulk_status').hide();$('#shelly_plug_ch #channel_page').attr('data-channel',channelNum);}}};Zepto(function($){$(document).on('Shelly:status',function(){Plug.setChanNum();if(typeof Shelly.currentStatus.overtemperature!=='undefined'&&Shelly.currentStatus.overtemperature===true){$("#overtemperature_warning").show();}else{$("#overtemperature_warning").hide();}});});</script></head> <body> <div id=loading_holder><div id=control_icon></div><div class=loading_text>Loading</div></div> <div id=overlay class=hidden> <div id=message><p></p></div> </div> <div id=header> <div id=head_wrap> <div id=shelly_logo title="Shelly Plug" class="logo one_channel"></div> <div id=status_icons> <span id=cloud></span> <span id=status></span> <span id=auth></span> </div> <div id=clock><span>Time: </span><span id=time>--:--</span></div> </div> </div> <div class=res_900> <div id=device_name><h1></h1></div> <div id=component_templates class=hidden> <div class=settings_item id=text_set> <div class=set_box> <div class=settings_icon></div> <h2 id=text_set_title data-colapse=text_set_div class="colapse closed"></h2> <div class=clear></div> </div> <div id=text_set_div class=closed> <div class=input_holder id=text_set_checkbox_div> <input type=checkbox id=text_set_enable class=checkbox> <label for=text_set_enable> <span class=fake_checkbox></span> <span id=text_set_enable_description></span> <div class=clear></div> </label> </div> <div class=input_holder id=text_set_input_div> <span id=text_set_description></span> <div class=clear></div> <div class=hollow_bg> <input type=text id=text_set_text class=text_input> </div> <button id=text_set_submit type=submit> <span class=icon></span> <span>SAVE</span> </button> <div class=clear></div> </div> </div> </div> <script type=text/javascript>
function appendTextSet(
    id,
    toId,
    title,
    enableDescription,
    description
) {
    Settings.appendComponentTemplate(
        "text_set",
        id,
        toId
    );
    $('#'+id+'_title').html(title);
    if(enableDescription == '') {
        $('#'+id+'_checkbox_div').hide();
    } else {
        $('#'+id+'_enable_description').html(enableDescription);
    }
    $('#'+id+'_description').html(description);
    
}
function prependTextSet(
    id,
    toId,
    title,
    enableDescription,
    description
) {
    Settings.prependComponentTemplate(
        "text_set",
        id,
        toId
    );
    $('#'+id+'_title').html(title);
    if(enableDescription == '') {
        $('#'+id+'_checkbox_div').hide();
    } else {
        $('#'+id+'_enable_description').html(enableDescription);
    }
    $('#'+id+'_description').html(description);
    
}
</script> <div class=timer_channel id=timer_channel> <span class=timer_channel_title id=timer_channel_title></span> <span class=timer_channel_value id=timer_channel_value>-</span> </div> <style type=text/css> 
.timer_channel {
    float: left;
    line-height: 50px;
    margin-left: 2%;
    margin-right: 2%;
    margin-bottom: 10px;
    margin-top: 0px;
    width: 96%;
    background-color: #43484B;
    font-size: 15px;
    font-weight: bold;
    text-align: right;
}
.timer_channel_title {
    width: 48%;
    text-align: right;
    display: inline-block;
    box-sizing: border-box;
}
.timer_channel_value {
    width: 1;
    text-align: left;
    margin-left: 10px;
    margin-right: 0%;
    display: inline-block;
    box-sizing: border-box;
    color:  #2886c7;
}

</style> <script type=text/javascript>
function appendTimerChan(
    id,
    toId,
    title
) {
    Settings.appendComponentTemplate(
        "timer_channel",
        id,
        toId
    );
    $('#'+id+'_title').html(title);
}
</script> <div class=settings_item id=action_set> <div class=set_box> <div class=settings_icon></div> <h2 id=action_set_title data-colapse=action_set_div class="colapse closed"></h2> <div class=clear></div> </div> <div id=action_set_div class=closed> <div class=input_holder id=action_set_checkbox_div> <input type=checkbox id=action_set_enable class=checkbox> <label for=action_set_enable> <span class=fake_checkbox></span> <span id=action_set_enable_description></span> <div class=clear></div> </label> </div> <div class=input_holder id=action_set_urls> <span id=action_set_description></span> <div class=clear></div> <div class=url_set> <div class=hollow_bg> <input type=text class=url_input> </div> <div class=right_holder> <div class=delete_icon></div> </div> </div> <div class=clear></div> <div class=blue><p>Мore than 2 actions can affect the normal operation of the device depending on the network infrastructure and the controlled devices.</p></div> <button type=button class="full_width_btn action_more"> <span class=icon></span> <span class=text>ADD</span> </button> <div class=clear></div> <button id=action_set_submit type=submit> <span class=icon></span> <span>SAVE</span> </button> <div class=clear></div> </div> </div> </div> <script type=text/javascript>
function appendActionSet(
    id,
    toId,
    title,
    enableDescription,
    description
) {
    Settings.appendComponentTemplate(
        "action_set",
        id,
        toId
    );
    $('#'+id+'_title').html(title);
    if(enableDescription == '') {
        $('#'+id+'_checkbox_div').hide();
    } else {
        $('#'+id+'_enable_description').html(enableDescription);
    }
    $('#'+id+'_description').html(description);
}
</script> </div> <div id=overtemperature_warning> <span>Device is switched off because temperature is too high!</span> </div> <div id=shelly_plug_ch> <div id=channel_page class="chan "> <div id=dev_info class=dev_status> <div class=channel> <span class=chname>Switch<span id=channel_numb></span></span> </div> <div class=consum_value> <span class=cons_icon></span> <span id=overpower></span> <span id=consumption_enab> <span class=consumption>0</span> <span class=unit_cons> W</span> </span> </div> <div class=animation></div> <div class="power_on_off_icon state"></div> <div class="input_on_off_icon state"></div> <div class=ext_switch_on_off_icon></div> </div> <div id=timer_info_chpg_0 class="timer_info_chpg timer_info_chpg_0 hidden"></div> <div id=ext_sensors_on_channel_page> <div id=ext_temp_sensors_on_channel_page></div> <div id=ext_hum_sensors_on_channel_page></div> </div> <div class=settings_wrapper> <div id=settings_wrapper class=settings_tabs> <div id=settings_buttons> <div data-tab=settings_timer id=timers class="is_enable settings_tab"> <img id=icon_timer class=icon_dev alt=Timer src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAQMAAACQp+OdAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAN5JREFUKM+NksENhCAQRb/hwJESLIXOxNIohRI4cjDMzv/ixssmOyb6wAGcNwJAvqAIZqdgN+uCYqZ3m3mslDspWkvWmDsBZefhg8FFPp24jIlhcjVC9Ru2iVhRToQLsSFXxEHYK1IXNKRGSJp0iH1B6MinYCzYHCC4UAS4cPyC6Zfg8Ln/wC38B1NiqoBx8FDGfEBfeEPWc/uCyqHawUrf4LUnKqacpIYkCaF1qaP1Spm0ftIzrb/Mo/hGke9zX93ZfVS4R7Ia1MHIntZ3l9n3+fwJOoZJ9a6grCLv+ACKv6iuzHaN0QAAAABJRU5ErkJggg=="> <span class=device_status></span> <span class=set_name>Timer</span> </div> <div data-tab=settings_weekly_schedule id=weekly_schedule class="is_enable settings_tab"> <img id=icon_weekly_schedule class=icon_dev alt="Weekly schedule" src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAQMAAACQp+OdAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAARxJREFUKM9d0TFuhDAQBdBhQXI6R8oBzA2yZarMbpXrpNwCra1QZLtcCW5iKRdw6QJB/njsJi7gCfDgmU/UVn/I2ohswUHkFIH4H4h8ue8N2KVvckNqiA1Lw9xggmK3FZtbFPk1KtJHUsTvirXPhL9Q99VVDN1WcHoixfAsMME8RrpTdotLFwFHjkHgk18DvQPZzwtxgYmCI99t0ieTywXpxpvi7As4jmidpfJVQTRXdAbjEZxsxYAxyr/MA9Mr50lewfFQ+FVmiTP7uQFldulrR5lNWp5eKm4jWjSJ8ucFsJHy+IM6DrgKeKENTSEaTBXfYdpEd5v5+EVek8HFIq+3HokwTn4m1JW8NEzZWZIPAltClimXbGWxvqnrD4zlJwdDXrPsAAAAAElFTkSuQmCC> <span class=device_status></span> <span class=set_name>Weekly schedule</span> </div> <div data-tab=settings_internet id=internet class=settings_tab> <img id=icon_device_info class=icon_dev alt="internet img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAQMAAACQp+OdAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAPZJREFUKM99kk1qwzAQhZ/QQkvfILpIiK6V0hIZcq1SBnyAXsG7brXUQmg6M3JcE0JHC3+g+dG8ZwBIDRaeeTaIzMUgM9udY4ktZSQF/vnm1XI9WXbqAlWLFLSMvzy9d60+e3qTetcFrnmGbwqJpM2HpzMTJrZY/yAOKIiLfu8Faa65XXxV8HRyAjBoyCgCaLi9hogux+CG5gSmI3RXgl2Nmdz/g5flG2CDfej+jP2FycDtYOsEOslekXSAwmP36QlWUax5SqJYqCqdaDjEFFVN56v6xJ9DefMit6M7sW9+Tbws5mDQxnR0WX3vjz+hGoSRYi1xiF+r+whWSwBGIAAAAABJRU5ErkJggg=="> <span class=device_protected_status></span> <span class=set_name>Internet & Security</span> </div> <div data-tab=settings_safety id=safety class=settings_tab> <img id=icon_safety class=icon_dev alt=Safety src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAQMAAACQp+OdAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAOdJREFUKM+tksGNxSAMRAdx4EgJKYXOAqVRCiXkyCHCf8bwV9o9L4rQCxhiPwcAygsf0aw5XGaPQzXzvWAcJ8SsE5KNbEOxC/DoMvkydYjLWcd0W1w6jT2F5Zc2RL+1dKTp3+vID0LDNZAHks9cZGLpISSzESdKY2LzBwIBDi+qA17cf2B94SYeeP8b1i94CDeyYG0YUIZJ5l7mLM9BEAQqB7TLulhyXQd27fIwHfYzxPRDUVQXuxxSJtXRqnuGHfMuu7JXSVDYokvWNVX1K1uL3sH07al3uZ2+e6tQVBd2UN9/ydk54wNOLtzXm3BIqQAAAABJRU5ErkJggg=="> <span class=set_name>Safety</span> </div> <div data-tab=settings_actions id=actions class=settings_tab> <img id=icon_actions class=icon_dev alt=Actions src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAQMAAACQp+OdAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAN1JREFUKM990lEOgjAMANASosZEJX4aP/AYfhjwKB5jH0T48ASciFvwuyNg/CFxobZrRwxBCWUP1o3SAACQI2JPI9CIwzwsxe4XBkXcKpZ1I1jUV0GCVrDenwSHgDRMHcOTMWdctX03k53jthJEGMo4z1bIX4eWUDK6bxjO+oMXTvHE+eSkUuQWuGMGyk4xcBcdmMjdKAcIvVW4QhC7u+KRCWATMFwULsAYRdQr6F2CtFH4wgAKioiRUcTcj5Ri1dCFKvbh7/ipn+c8v4JXAvT+pKPkhoH8K9YjReRtPm+wmYmt/OniAAAAAElFTkSuQmCC> <span class=set_name>Actions</span> </div> <div data-tab=settings_info id=info class=settings_tab> <img id=icon_dev_info class=icon_dev alt="Device info" src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAQMAAACQp+OdAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAN1JREFUKM+tkrsRwyAQRI8hIHQJlKLGPEKlUYpKUEjA6Ly7YEnj2ATM434ce5iZ5cO0ovsmyO7DVNy7wLFmyAhKXpPvjD3hZfTScGhMgjkxjYER7sBUbuFU0c2iqi7VUtN9AF2Yd3uxKHcYo+z0gg9bNkEjwBUAai50K+MF3dYHIPGG1d7GLED/N1yV1x84v6AOqU5nz4DQv83rOZS2Wb6gEvD2oUaCLMeUZQolHYaGQ0yoKp3Np/ISu9Q5i+WY08k4FdZ4+RY1wcSZVo1oTvmeO36CrmFQHdKW0x7rA4T7k/2AYAtPAAAAAElFTkSuQmCC> <span class=device_bulk_status></span> <span class=set_name>Settings</span> </div> </div> </div> <div id=settings class=settings_content> <div id=settings_timer class=settings_tab_cont> <div class=is_enable id=timer_template> <div class=icon_holder> <div class=icon_dev_set></div> <div class=iac_info> <h2 class=sett_title> <span>Timers<br> </span> </h2> </div> </div> </div> <div id=auto_settings_on class=settings_item> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=auto_on class="colapse closed">Auto OFF</h2> <div class=clear></div> </div> <div id=auto_on class=closed> <div class=input_holder> <input type=checkbox name=auto_turn_off id=auto_turn_off class=checkbox> <label for=auto_turn_off> <span class=fake_checkbox></span> <span> When On - Turn Off After <span class="range_value blue">0</span> seconds<br><br> </span> <div class=clear></div> </label> <div class=hollow_bg> <input type=number name=auto_turn_off_range id=auto_turn_off_range value=0 class=text_input> </div> <button id=auto_turn_off_button type=submit> <span class=icon></span> <span>SAVE</span> </button> </div> </div> </div> <style type=text/css></style> <script type=text/javascript>var SettingsAutoOn={turnOn:function(){var time=$('#auto_turn_on_range').val();var device_type=Settings.validateDevice(true);var channel_num=Settings.validateChannel();if(!(time>=0&&time<=65535)){$("#auto_turn_on").prop('checked',false);return Messages.showMessage('Wrong power value','Please enter value between 1 and 65535!',"error");}
Settings.change("settings/"+device_type+"/"+channel_num+"?auto_on="+time);}};Zepto(function($){$("#auto_turn_on_button").on('click',function(){SettingsAutoOn.turnOn();});$("#auto_turn_on_range").on('focus',function(){SettingsTimer.checkCheckbox($("#auto_turn_on"));});$("#auto_turn_on").on('change',function(){SettingsTimer.uncheckCheckbox($(this),$('#auto_turn_on_range'),$('#auto_turn_on_button'));});$("#auto_turn_on_range").on('keyup',function(){Settings.fillValue($(this).closest('.input_holder').find('.range_value'),$(this).val());});$(document).on('Shelly:settings',function(){SettingsTimer.fillSettings("auto_on",$("#auto_turn_on_range"),$('#auto_turn_on'));});});</script> <div id=auto_settings_off> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=auto_off class="colapse closed">Auto ON</h2> <div class=clear></div> </div> <div id=auto_off class=closed> <div class=input_holder> <input type=checkbox name=auto_turn_on id=auto_turn_on class=checkbox> <label for=auto_turn_on> <span class=fake_checkbox></span> <span> When Off - Turn On After <span class="range_value blue">0</span> seconds<br><br> </span> <div class=clear></div> </label> <div class=hollow_bg> <input type=number name=auto_turn_on_range id=auto_turn_on_range value=0 class=text_input> </div> <button id=auto_turn_on_button type=submit> <span class=icon></span> <span>SAVE</span> </button> <div class=clear></div> </div> </div> </div> <style type=text/css></style> <script type=text/javascript>var SettingsAutoOff={turnOff:function(){var time=$('#auto_turn_off_range').val();var device_type=Settings.validateDevice(true);var channel_num=Settings.validateChannel();if(!(time>=0&&time<=65535)){$("#auto_turn_off").prop('checked',false);return Messages.showMessage('Wrong power value','Please enter value between 1 and 65535!','error');}
Settings.change("settings/"+device_type+"/"+channel_num+"?auto_off="+time);}};Zepto(function($){$("#auto_turn_off_range").on('focus',function(){SettingsTimer.checkCheckbox($("#auto_turn_off"));});$("#auto_turn_off_button").on('click',function(){SettingsAutoOff.turnOff($(this));});$("#auto_turn_off").on('change',function(){SettingsTimer.uncheckCheckbox($(this),$('#auto_turn_off_range'),$('#auto_turn_off_button'));});$("#auto_turn_off_range").on('keyup',function(){Settings.fillValue($(this).closest('.input_holder').find('.range_value'),$(this).val());});$(document).on('Shelly:settings',function(){SettingsTimer.fillSettings("auto_off",$("#auto_turn_off_range"),$('#auto_turn_off'));});});</script> </div> <style type=text/css>#settings_timer .settings_icon,#settings_timer .icon_holder .icon_dev_set{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAQMAAACQp+OdAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAN5JREFUKM+NksENhCAQRb/hwJESLIXOxNIohRI4cjDMzv/ixssmOyb6wAGcNwJAvqAIZqdgN+uCYqZ3m3mslDspWkvWmDsBZefhg8FFPp24jIlhcjVC9Ru2iVhRToQLsSFXxEHYK1IXNKRGSJp0iH1B6MinYCzYHCC4UAS4cPyC6Zfg8Ln/wC38B1NiqoBx8FDGfEBfeEPWc/uCyqHawUrf4LUnKqacpIYkCaF1qaP1Spm0ftIzrb/Mo/hGke9zX93ZfVS4R7Ia1MHIntZ3l9n3+fwJOoZJ9a6grCLv+ACKv6iuzHaN0QAAAABJRU5ErkJggg==)}</style> <script type=text/javascript>var SettingsTimer={fillSettings:function(propertyType,inputField,checkbox){if(Settings.checkIfActive()){return;}
var set;var device_type=Settings.validateDevice(false);var chan_num=Settings.validateChannel();set=Shelly.currentSettings[device_type+'s'][chan_num][propertyType];if(set!==undefined&&set!==""&&set!==0){checkbox.prop("checked",true);$('#timers .device_status').addClass('blue_color');}else if(set!==undefined&&set!==""&&set==0){checkbox.prop("checked",false);}
if(!$('#auto_turn_on').is(':checked')&&!$('#auto_turn_off').is(':checked')){$('#timers .device_status').removeClass('blue_color');}
inputField.closest('.input_holder').find('.range_value').text(set);inputField.val(set);},checkCheckbox:function(element){element.prop("checked",true);},uncheckCheckbox:function(element,input,button){var range_value=input.closest('.input_holder').find('.range_value');if(!(element.prop('checked'))){input.val(0);range_value.text(0);button.trigger('click');}else{input.val(30);range_value.text(30);button.trigger('click');}}};</script> <div id=settings_weekly_schedule data-mode class=settings_tab_cont> <div id=schedule_set class=is_enable> <div class=icon_holder> <div class=icon_dev_set></div> <div class=iac_info> <h2 class=sett_title> <span>Weekly schedule </span> </h2> </div> </div> </div> <div id=schedule> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=sch_set class="colapse opened">Schedule timer</h2> <div class=clear></div> </div> <div class=opened> <div id=sch_set class=input_holder> <span><span class=blue>Shelly</span> device can turn automatically on/off at given time. This feature works only if you have connection to the Internet and <span class=blue>Shelly</span> was able to synchronize the time.</span><br><br> <div class=clear></div> <input type=checkbox name=enable_timer id=enable_timer class=checkbox> <label for=enable_timer> <span class=fake_checkbox></span> <span> Enable schedule timer </span> </label> <div class=clear></div> <div id=advanced_sched_holder> <div id=sched_values style="display: none"></div> <div id=dummy_del style="display: none" data-del_id></div> </div> </div> </div> <div id=sched_repeat class=advanced_sched style="display: none"> <div class=left_holder> <div class=sched_time>6:00</div> <div class=sched_comm>off</div> <div class=sched_days> <div class="sched_day_0 text">M</div> <div class="sched_day_1 text">T</div> <div class="sched_day_2 text">W</div> <div class="sched_day_3 text">T</div> <div class="sched_day_4 text">F</div> <div class="sched_day_5 text">S</div> <div class="sched_day_6 text">S</div> </div> </div> <div class=right_holder> <div class=sched_buttons_holder> <div class=edit_icon></div> <div class=delete_icon></div> </div> </div> <div class=clear></div> </div> <button id=add_advanced_sched_button type=button class=full_width_btn style="display: none;"> <span class=icon></span> <span class=text>ADD</span> </button> </div> <div id=sched_add_popup_back style="display: none"> <div id=sched_add_popup> <h1>Add Schedule</h1> <div id=sched_base_select_holder> <select id=set_schedule_base class="text_input hollow_bg"> <option name=on_time value=on_time>Time</option> <option name=sunrise value=sunrise>Sunrise</option> <option name=sunset value=sunset>Sunset</option> </select> </div> <div id=start_active_time class=opened> <div class=not_mobile_arrow_scene_active_time> <div id=up_arrow class=scene_contr_arrows> <span class="arrow_main_class up_arrow_icon arrows_symbowls hour_arrow_up"></span> </div> <div id=up_arrow class=scene_contr_arrows> <span class="arrow_main_class up_arrow_icon arrows_symbowls minute_arrow_up"></span> </div> </div> <div class=input_holder> <span class=offset_flag_holder></span> <input type=hidden id=sched_sign value> <input type=text min=0 max=23 value=00 class="set_start_time left" id=sched_hours> <span class=colon>:</span> <input type=text min=0 max=59 value=00 class="set_start_time right" id=sched_minutes> <span class=offset_flag_holder>offset</span> </div> <div class=not_mobile_arrow_scene_active_time> <div id=down_arrow class=scene_contr_arrows> <span class="arrow_main_class down_arrow_icon arrows_symbowls hour_arrow_down"></span> </div> <div id=down_arrow class=scene_contr_arrows> <span class="arrow_main_class down_arrow_icon arrows_symbowls minute_arrow_down"></span> </div> </div> </div> <h1>Select command</h1> <div class="input_holder advanced_select_schedule" id=sched_select_holder> <select id=set_schedule_comm class="text_input hollow_bg"> <option name=on>On</option> <option name=off>Off</option> </select> </div> <h1>Choose Day</h1> <div id=set_sched_days class=opened> <div id=set_days_sched> <div class="sched_weekdays_settings first_day"> <input class="days checkbox" value=1 type=checkbox id=mon> <span class=fake_checkbox data-index=1></span> <label for=mon>Mon</label> </div> <div class=sched_weekdays_settings> <input class="days checkbox" value=2 type=checkbox id=tue> <span class=fake_checkbox data-index=2></span> <label for=tue>Tue</label> </div> <div class=sched_weekdays_settings> <input class="days checkbox" value=3 type=checkbox id=wed> <span class=fake_checkbox data-index=3></span> <label for=wed>Wed</label> </div> <div class=sched_weekdays_settings> <input class="days checkbox" value=4 type=checkbox id=thu> <span class=fake_checkbox data-index=4></span> <label for=thu>Thu</label> </div> <div class=sched_weekdays_settings> <input class="days checkbox" value=5 type=checkbox id=fri> <span class=fake_checkbox data-index=5></span> <label for=fri>Fri</label> </div> <div class=sched_weekdays_settings> <input class="days checkbox" value=6 type=checkbox id=sat> <span class=fake_checkbox data-index=6></span> <label for=sat>Sat</label> </div> <div class=sched_weekdays_settings> <input class="days checkbox" value=7 type=checkbox id=sun> <span class=fake_checkbox data-index=7></span> <label for=sun>Sun</label> </div> </div> </div> <button id=save_advanced_sched class=full_width_btn> <span class=icon></span> <span class="text lang">SAVE</span> </button> <button id=cancel_advanced_sched class=full_width_btn> <span class=icon></span> <span class="text lang">CANCEL</span> </button> <input type=hidden id=edit_id> </div> </div> <style type=text/css>#advanced_sched_holder .sched_holder{border-bottom:1px solid gray;padding:0;position:relative;margin-top:15px}#advanced_sched_holder .sched_comm{max-width:65%;overflow:hidden;height:60px;font-size:18px;text-transform:uppercase;position:relative;display:inline}.sched_holder:not(.ac_container) .sched_comm{padding-top:10px}#advanced_sched_holder .sched_days{width:100%;padding:10px 0;box-sizing:border-box}@media (max-width:950px) and (min-width:765px){#advanced_sched_holder .edit_icon,#advanced_sched_holder .delete_icon{width:35px;height:35px}#advanced_sched_holder .sched_time{font-size:25px;margin:0px 5px 0px 0px;max-height:30px}.sched_comm{max-height:30px;font-size:12px}}#sched_select_holder select{text-transform:uppercase;padding:0 0 0 10px;text-align:center;width:100%}#sched_base_select_holder select{text-transform:uppercase;padding:0 0 0 10px;text-align:center;width:100%}#sched_select_holder .hollow_bg{border-radius:5px;margin-top:3px}#sched_select_holder select#set_schedule_comm{width:90%;max-width:350px}#sched_base_select_holder select#set_schedule_base{width:90%;max-width:350px}#sched_select_holder.advanced_select_schedule .hollow_bg{margin-top:20px}#sched_base_select_holder .hollow_bg{margin-top:20px;margin-bottom:0px}#sched_add_popup select option,#threshold option{color:#000}#sched_select_holder span.text{margin:3px auto}#sched_select_holder select option{text-align:center}#settings #advanced_sched_holder .right_holder{padding-top:15px}@media(max-width:410px){#settings #advanced_sched_holder .right_holder{padding-top:0px}}@media(max-width:600px){#sched_select_holder div.select_holder{display:inline-block;width:49%}#sched_add_popup #start_active_time{margin-bottom:0}#advanced_sched_holder .sched_holder{width:100%}#sched_add_popup .sched_weekdays_settings{margin-top:0px;padding:5px 0 10px 0}#advanced_sched_holder .sched_time{font-size:25px;margin:0px 5px 0px 0px;max-height:30px}.sched_comm{max-height:30px;font-size:12px}#advanced_sched_holder .sched_comm{font-size:14px}.sched_holder:not(.ac_container) .sched_comm{padding-top:5px}div.sched_weekdays_settings label{margin-left:20%}}@media(max-width:375px){#advanced_sched_holder .sched_time{font-size:20px;margin:0px 5px 0px 0px}#settings #advanced_sched_holder .sched_days div{font-size:12px;width:5%;padding:0 4px}#advanced_sched_holder .edit_icon,#advanced_sched_holder .delete_icon{width:35px;height:35px}#advanced_sched_holder .sched_comm{max-width:60%;font-size:14px}#sched_add_popup{margin-top:5px!important}}</style> </div> <script type=text/javascript>var SettingsWeekSchedule={checkDeviceType:function(){var device_type=Shelly.currentSettings.mode;$('#set_schedule_comm').empty();if(device_type==='roller'){$('#set_schedule_comm').append($('<option>',{name:'open',text:'open'}));$('#set_schedule_comm').append($('<option>',{name:'90%',text:'90%'}));$('#set_schedule_comm').append($('<option>',{name:'80%',text:'80%'}));$('#set_schedule_comm').append($('<option>',{name:'70%',text:'70%'}));$('#set_schedule_comm').append($('<option>',{name:'60%',text:'60%'}));$('#set_schedule_comm').append($('<option>',{name:'50%',text:'50%'}));$('#set_schedule_comm').append($('<option>',{name:'40%',text:'40%'}));$('#set_schedule_comm').append($('<option>',{name:'30%',text:'30%'}));$('#set_schedule_comm').append($('<option>',{name:'20%',text:'20%'}));$('#set_schedule_comm').append($('<option>',{name:'10%',text:'10%'}));$('#set_schedule_comm').append($('<option>',{name:'close',text:'close'}));}else
if(device_type==='color'||device_type==='white'){$('#set_schedule_comm').append($('<option>',{name:'on',text:'on'}));$('#set_schedule_comm').append($('<option>',{name:'100%',text:'100%'}));$('#set_schedule_comm').append($('<option>',{name:'95%',text:'95%'}));$('#set_schedule_comm').append($('<option>',{name:'90%',text:'90%'}));$('#set_schedule_comm').append($('<option>',{name:'85%',text:'85%'}));$('#set_schedule_comm').append($('<option>',{name:'80%',text:'80%'}));$('#set_schedule_comm').append($('<option>',{name:'75%',text:'75%'}));$('#set_schedule_comm').append($('<option>',{name:'70%',text:'70%'}));$('#set_schedule_comm').append($('<option>',{name:'65%',text:'65%'}));$('#set_schedule_comm').append($('<option>',{name:'60%',text:'60%'}));$('#set_schedule_comm').append($('<option>',{name:'55%',text:'55%'}));$('#set_schedule_comm').append($('<option>',{name:'50%',text:'50%'}));$('#set_schedule_comm').append($('<option>',{name:'45%',text:'45%'}));$('#set_schedule_comm').append($('<option>',{name:'40%',text:'40%'}));$('#set_schedule_comm').append($('<option>',{name:'35%',text:'35%'}));$('#set_schedule_comm').append($('<option>',{name:'30%',text:'30%'}));$('#set_schedule_comm').append($('<option>',{name:'25%',text:'25%'}));$('#set_schedule_comm').append($('<option>',{name:'20%',text:'20%'}));$('#set_schedule_comm').append($('<option>',{name:'15%',text:'15%'}));$('#set_schedule_comm').append($('<option>',{name:'10%',text:'10%'}));$('#set_schedule_comm').append($('<option>',{name:'5%',text:'5%'}));$('#set_schedule_comm').append($('<option>',{name:'0%',text:'0%'}));$('#set_schedule_comm').append($('<option>',{name:'off',text:'off'}));}else{$('#set_schedule_comm').append($('<option>',{name:'on',text:'on'}));$('#set_schedule_comm').append($('<option>',{name:'off',text:'off'}));}},fillAdvancedSchedPopup:function(index){$('#sched_add_popup_back').show();$('#sched_add_popup').addClass('edit');var dd={0:'mon',1:'tue',2:'wed',3:'thu',4:'fri',5:'sat',6:'sun'};this.checkDeviceType();var scheds=$('#sched_values').html().split(',');var sched=scheds[index].split('-');var time=sched[0];var base=time.substr(4)
var days=sched[1];var comm=sched[2];var hours=time.substr(0,2);var minutes=time.substr(2,2);var prop_base='';var sign='';switch(base){case'bsr':sign='-';case'asr':prop_base='sunrise';break;case'bss':sign='-';case'ass':prop_base='sunset';break;default:prop_base='on_time';}
$('#sched_hours').val(hours);$('#sched_minutes').val(minutes);days=days.split('');$('#edit_id').val(index);if(String(hours).length==1){hours='0'+hours;}
$('#sched_sign').val(sign);$('#sched_hours').val(sign+hours);$('#sched_minutes').val(minutes);$('.sched_weekdays_settings input[type=checkbox]').prop('checked',false);$('#set_schedule_comm option[name="'+comm+'"]').prop('selected',true);$('#set_schedule_base option[name="'+prop_base+'"]').prop('selected',true);SettingsWeekSchedule.onSetScheduleBase(false);$.map(days,function(v,index){$('.sched_weekdays_settings #'+dd[v]).prop('checked',true);});},onSetScheduleBase:function(reset_time){if(reset_time){$('#sched_hours').val('00');$('#sched_minutes').val('00');$('#sched_sign').val('');}
switch($('#set_schedule_base').val()){case'on_time':$('#sched_hours').prop('min',0);$('#sched_hours').prop('max',23);$('.offset_flag_holder').hide();break;case'sunrise':case'sunset':$('#sched_hours').prop('min',-2);$('#sched_hours').prop('max',+2);$('.offset_flag_holder').show();break;}},setAdvancedScheduleValues:function(schedules){$('.sched_holder').remove();var result={};$.map(schedules,function(value,index){var settings=value.split('-');var new_shed={};new_shed.time=settings[0].substr(0,2)+':'+settings[0].substr(2,2);var zt=(new_shed.time=='00:00');new_shed.base=settings[0].substr(4);switch(new_shed.base){case'bsr':new_shed.base='Sunrise'+(zt?'':' -');if(zt)new_shed.time='';break;case'asr':new_shed.base='Sunrise'+(zt?'':' +');if(zt)new_shed.time='';break;case'bss':new_shed.base='Sunset'+(zt?'':' -');if(zt)new_shed.time='';break;case'ass':new_shed.base='Sunset'+(zt?'':' +');if(zt)new_shed.time='';break;}
new_shed.command=settings[2];new_shed.days=settings[1];result[index]=new_shed;});var sched_container=$('#sched_repeat');$.each(result,function(key,value){if($('#sched_'+key).length===0){$('<div/>',{id:'sched_'+key,'class':'sched_holder'}).appendTo('#advanced_sched_holder');}
$('#sched_'+key).html(sched_container.html());$('#sched_'+key+' .left_holder .sched_time').html(value.base+value.time);$('#sched_'+key+' .left_holder .sched_comm').html(value.command);$.map(value.days.split(''),function(v){$('#sched_'+key+' .sched_day_'+v).addClass('active');});$('#sched_'+key+' .edit_icon').prop('id','sched_edit_'+key);$('#sched_'+key+' .delete_icon').prop('id','sched_del_'+key);});$('#add_advanced_sched').remove();var $add_advanced_sched=$('#add_advanced_sched_button').clone();$add_advanced_sched.prop('id','add_advanced_sched');$add_advanced_sched.appendTo('#advanced_sched_holder').show();$add_advanced_sched.on('click',function(){$('#add_advanced_sched_button').trigger('click');});$('#sched_active').html(1);$('#sched_values').html(schedules+'');$('#advanced_sched_holder').show();$('#advanced_sched_holder .edit_icon').on('click',function(){$('#schedule_set, #schedule, #general_settings, #settings_wrapper, #shelly_bulb, .dev_status').hide();$('#sched_add_popup_back').show();var index=$(this).attr('id').split('_')[2];SettingsWeekSchedule.fillAdvancedSchedPopup(index);});$('#advanced_sched_holder .delete_icon').on('click',function(){var index=$(this).attr('id').split('_')[2];WeeklySchedule.deleteAdvancedSchedule(index);});},showWeekSettings:function(){if(Settings.checkIfActive()){return;}else{var device_type=Settings.validateDevice(true);var channel_num=Settings.validateChannel();if($('#enable_timer').is(":checked")){Settings.change("settings/"+device_type+"/"+channel_num+"?schedule=1");$("#advanced_sched_holder").show();var scheds=$('#sched_values').html();if(scheds==='')
scheds=[];else
scheds=scheds.split(',');}else{$('#advanced_sched_holder').hide('slow');Settings.change("settings/"+device_type+"/"+channel_num+"?schedule=0");}}},showAdvSched:function(){var max_schedule_rules=20;var scheds=[];if($('#sched_values').html()!==''){scheds=$('#sched_values').html().split(',');}
if(scheds.length>=max_schedule_rules){Messages.showMessage("Error",'You have reached the maximum number of schedule rules!','error');return;}
$('#schedule_set, #schedule, #general_settings, #settings_wrapper, .dev_status').hide();$('#sched_add_popup_back').show();$('#sched_add_popup').removeClass('edit');$('#set_schedule_comm option').eq(0).prop('selected',true);$('#set_schedule_base option[name="on_time"]').prop('selected',true);SettingsWeekSchedule.onSetScheduleBase(true);$('.offset_flag_holder').hide();this.checkDeviceType();$('.sched_weekdays_settings input[type=checkbox]').prop('checked',true);},saveAdvSched:function(){if(Settings.checkIfActive()){return;}else{var device_type=Settings.validateDevice(true);var channel_num=Settings.validateChannel();var schedule_rules="";var time=WeeklySchedule.setTimeValue();var command="";var command_temp="";$('#set_schedule_comm option').each(function(el){if(this.selected){command_temp=$('#set_schedule_comm option')[el];command=command_temp.getAttribute('name');}});var days=$('.days.checkbox');var days_str='';$.each(days,function(key,value){if(value.checked)
days_str+=key;});if(days_str.length===0){Messages.showMessage('Please select week day.','ok','conf');return;}
var setting_srting=time+'-'+days_str+'-'+command;if($('#sched_values').html()==='')
var scheds=[];else
var scheds=$('#sched_values').html().split(',');if($('#sched_add_popup').hasClass('edit')){var index=parseInt($('#edit_id').val());scheds[index]=setting_srting;}else{scheds.push(setting_srting);}
var max_schedule_rules=20;if(scheds.length>max_schedule_rules){$('#schedule_set, #schedule, #settings_wrapper, #general_settings, .dev_status').show();$('#sched_add_popup_back').hide();Messages.showMessage("Error",'You have reached the maximum number of schedule rules!','error')}else{scheds=scheds+'';Messages.showLoading();Shelly.sendRequest("settings/"+device_type+"/"+channel_num+"?schedule_rules="+encodeURIComponent(scheds),'GET',{},function(res){var schedule_days=res.schedule_rules;var schedule_active=res.schedule;if(schedule_days!==undefined&&schedule_days.length!==0||schedule_active){SettingsWeekSchedule.setAdvancedScheduleValues(schedule_days);}
Messages.hideLoading();Messages.showMessage("Success",'Schedule saved!','conf');},function(err){Messages.hideLoading();Messages.showMessage('Error',"Could not save the schedule",'error');});$('#schedule_set, #schedule, #settings_wrapper, #general_settings, .dev_status').show();$('#sched_add_popup_back').hide();}}},delSchedule:function(element){if(Settings.checkIfActive()){return;}else{var device_type=Settings.validateDevice(true);var channel_num=Settings.validateChannel()
var index=parseInt(element.data('del_id'));var scheds=$('#sched_values').html().split(',');scheds.splice(index,1);scheds=scheds+'';$('#sched_'+index).remove();$('#sched_values').html(scheds);Settings.change("settings/"+device_type+"/"+channel_num+"?schedule_rules="+encodeURIComponent(scheds));}},closePopUp:function(){$('#schedule_set, #schedule, #general_settings, #settings_wrapper, .dev_status').show();$('#channel_page').removeClass('hide');$('#sched_add_popup_back').hide();},fillScheduleSettings:function(){if(Settings.checkIfActive()){return;}else{var device_type=Settings.validateDevice(false);var channel_num=Settings.validateChannel()
var schedule_days="";var schedule_active;schedule_days=Shelly.currentSettings[device_type+"s"][channel_num]['schedule_rules'];schedule_active=Shelly.currentSettings[device_type+"s"][channel_num]['schedule'];if(schedule_days!==undefined&&schedule_days.length!==0||schedule_active){this.setAdvancedScheduleValues(schedule_days);$('#enable_timer').prop('checked',true);$('#weekly_schedule .device_status').addClass('blue_color');}
if(!schedule_active){$('#enable_timer').prop('checked',false);$('#weekly_schedule .device_status').removeClass('blue_color');$('#advanced_sched_holder').hide();}}}};Zepto(function($){$("#enable_timer").on('change',function(){SettingsWeekSchedule.showWeekSettings();});$("#add_advanced_sched_button").on('click',function(){SettingsWeekSchedule.showAdvSched($(this));});$("#save_advanced_sched").on('click',function(){SettingsWeekSchedule.saveAdvSched();});$("#cancel_advanced_sched").on('click',function(){SettingsWeekSchedule.closePopUp();});$("#sched_add_popup_back").on('click',function(e){var is_in_popup=$(e.target).parents('#sched_add_popup').length===1;if(!$(e.target).is('#sched_add_popup')&&!is_in_popup){SettingsWeekSchedule.closePopUp();$('div.choosen_command').addClass('hidden');}});$('#advanced_sched_holder #dummy_del').on('click',function(){SettingsWeekSchedule.delSchedule($(this));});$(document).on('Shelly:settings',function(){SettingsWeekSchedule.fillScheduleSettings();});$("#set_schedule_base").on('change',function(){SettingsWeekSchedule.onSetScheduleBase(true);});});</script> <style type=text/css>#sched_add_popup_back{width:96%;margin:0 auto;height:100%}#sched_add_popup_back #sched_add_popup{width:100%;color:#fff;border-radius:3px}#advanced_sched_holder .sched_days div.active{color:#2886c7}#advanced_sched_holder .right_holder .edit_icon,#night_preview .right_holder .edit_icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA6AQMAAADSnngRAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAIRJREFUKM/F0bsNwjAYReGgW4TOCyB5E7IKm8Rs5lE8QkoKxAXJ9/TpSJMjx/n+PJbl7LESpSVqT2wjsR8Jv4g3lz5s9jxfa+JWEvc1e3blLj+nc3Gfsjwe82mcUYVRlVGbYVixYQzjEcY9jFsY/40RjGAEIxjBiBcXn0JhftGJdvr/fgFJjGjnHRXMCQAAAABJRU5ErkJggg==);background-color:#ffcc00}#advanced_sched_holder .right_holder .delete_icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA6AQMAAADSnngRAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAD5JREFUKM9jYMAHGP//gzCY//+HMNj//28A0fL/geABqQxMwAySghoMMXqUQTYDHphwBiOQhkQhkPEHb1wDADqN2sVsuXGFAAAAAElFTkSuQmCC);background-color:#d23830;margin-left:7px}#advanced_sched_holder .sched_buttons_holder{position:relative;display:table;width:100%;right:10px;text-align:right}#settings #set_sched_days{padding:0}#advanced_sched_holder .left_holder{float:left;padding:7px;width:70%;box-sizing:border-box}#advanced_sched_holder .sched_holder:last-of-type,#night_preview{margin-bottom:30px}#sched_add_popup_back input.mobile_time{outline:none;background-color:transparent;display:block;border:none;color:#fff;font-size:35px;text-align:center;max-width:90%;padding-left:10%;margin-top:0px;margin:0 auto;-webkit-appearance:none;appearance:none}.colon{font-size:35px}#settings #settings_weekly_schedule #sch_set{text-transform:none}#sched_add_popup input[type="number"]{-moz-appearance:textfield;appearance:textfield}#sched_select_holder select:disabled{color:gray}#sched_add_popup input[type='number']::selection{color:rgb(19,133,196)}#advanced_sched_holder .sched_time{font-size:30px;position:relative;margin:5px 10px 0px 5px}#advanced_sched_holder .sched_days div{width:12%;text-align:center;display:inline-block}#advanced_sched_holder .edit_icon,#advanced_sched_holder .delete_icon,#night_preview .edit_icon{display:inline-block;width:40px;height:40px;background-size:50%;background-repeat:no-repeat;background-position:50% 50%;border-radius:3px;cursor:pointer;border:none}#settings_weekly_schedule div.settings_icon,#settings_weekly_schedule .icon_holder .icon_dev_set{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAQMAAACQp+OdAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAARxJREFUKM9d0TFuhDAQBdBhQXI6R8oBzA2yZarMbpXrpNwCra1QZLtcCW5iKRdw6QJB/njsJi7gCfDgmU/UVn/I2ohswUHkFIH4H4h8ue8N2KVvckNqiA1Lw9xggmK3FZtbFPk1KtJHUsTvirXPhL9Q99VVDN1WcHoixfAsMME8RrpTdotLFwFHjkHgk18DvQPZzwtxgYmCI99t0ieTywXpxpvi7As4jmidpfJVQTRXdAbjEZxsxYAxyr/MA9Mr50lewfFQ+FVmiTP7uQFldulrR5lNWp5eKm4jWjSJ8ucFsJHy+IM6DrgKeKENTSEaTBXfYdpEd5v5+EVek8HFIq+3HokwTn4m1JW8NEzZWZIPAltClimXbGWxvqnrD4zlJwdDXrPsAAAAAElFTkSuQmCC)}#advanced_sched_holder .sched_days div,#advanced_sched_holder .left_holder,#advanced_sched_holder .right_holder,#advanced_sched_holder .sched_time,#night_preview .left_holder,#night_preview .right_holder{display:inline-block}#advanced_sched_holder .right_holder,#night_preview .right_holder{width:30%}#add_advanced_sched .icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF0AAABeAQMAAAB7K4ouAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAACBJREFUOMtjYBgFAwjkHww9Dvt/IGigPWdohs4oGAAAALAgP/2cuLDlAAAAAElFTkSuQmCC)}#settings #save_advanced_sched .icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAAA/AQMAAABtkYKcAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAIxJREFUKM+1kcENgCAMRTEm4kkWMGETWcVNYDTchMQFOHow1ib9fwP1gD9N+/IKzv307Qwd/+FCGG8E/yAEViJ7EqdyQ5AKjBRg5E/MRMxCTCQmFWByBUbLhtFGw+io2ehpNlo3G+00G52FjRywySdsksAmCpYKgqW8dJo37lK5XeG+vP2NYWWYv3jdF4Q5RvuUW7T8AAAAAElFTkSuQmCC);background-color:#98cb4a;background-size:26px}#settings #cancel_advanced_sched .icon{background-color:#ff3b30;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADcAAAA3AQMAAACSFUAFAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAMxJREFUGNM9kcEJxCAUBb/kkKMlWIqNBbOwhWwrwjaS21495iC6bxQTSAbUN/w8zcz3bDxnv8HWe4e7+BKDeImxuV44dlngoDb3aubafLfKmmJl7nllnMw+o8wWMsrLopz+Vyyi/k7Gd7GE2t2DTTwUr3abtBvfOtSsoB6UMkEpB0+bbJOKDyo+yGSQyZIMTISXiaDi+h7EdSoRZx7iYiS+aV7i8JPHRIGStOYpTT/riUtNN3a+nl5WT6u3p8fV6+p59b7uYd3Lc0/D8gejPojKDgvz0gAAAABJRU5ErkJggg==);background-size:65%}.sched_weekdays_settings label{padding-bottom:30px;position:relative}#sched_add_popup .sched_weekdays_settings label{display:block;padding-left:17px;text-indent:-15px;font-size:16px}input.set_start_time.left{text-align:right}input.data_activation_scene{background-size:26px;background-position-x:10px}#set_days_sched{box-sizing:border-box;height:110px;width:100%;text-align:center}#set_days_sched .sched_weekdays_settings{display:inline-block;position:relative;float:left;width:14%;height:50px;margin-top:30px}div.sched_weekdays_settings .fake_checkbox{position:absolute;top:30px;left:40%;margin:0}.sched_weekdays_settings input.days.checkbox:checked ~ label{color:#2886c7}#set_active_time.full_width_btn.time_btn{margin:10px auto 20px auto}#set_schedule .sched_weekdays_settings.first_day{margin-left:1%}@media (max-width:320px){#sched_select_holder.input_holder:not(.advanced_select_schedule){margin-bottom:5px}}div.sched_weekdays_settings .days:checked + span.fake_checkbox,div.sched_weekdays_trigger .gen_cond_days:checked + span.fake_checkbox{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAABlBMVEUAAAAohsf74MZJAAAAAXRSTlMAQObYZgAAAGZJREFUKM/N0bENgCAURVEMxW9M/gYyyh8NRmMURqCkMGrz7gB20PgSzMlNSGmD0/U9hkaeGsZwrgo/R9OoMA/MDbN+MyfMBRMw0cSULsaHGJti8qo0UPNSU6kJago1To1Rkzd4lg/2jyJmiI74kgAAAABJRU5ErkJggg==) no-repeat 50%;background-size:contain}.not_mobile_arrow_scene_active_time .scene_contr_arrows span{height:40px;width:40px;left:0;position:absolute}.not_mobile_arrow_scene_active_time{display:inline-block;width:120px;height:40px}.not_mobile_arrow_scene_active_time .scene_contr_arrows{margin-left:3px;margin-right:3px;height:40px;width:40px;cursor:pointer;background-repeat:no-repeat;background-size:contain;background-position:50%;transition:background 0.2s;display:inline-block;position:relative}.up_arrow_icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAeAQMAAABKVu8MAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAGtJREFUGNNNzLENgCAYRGGIiZSOwCiMBqM5CiNYUhhO4P0kXnOv+pz77dxx7YjFIt0WuVro4b0aceglgroxkjESUJKAsgQkAfkRDUZAYUQ3BijOKDBAeUaFWZBf0WAWFFZ0YyYUiQIzoUzUD/kOa6r0i25wAAAAAElFTkSuQmCC)}#settings #start_active_time{padding:5px 0}.down_arrow_icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAeAQMAAABKVu8MAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAG5JREFUGNMtzLEVwCAMQ0GRFC4zAqMwGozGKB6BkiKPBCS7sK76qB9voAiOLHQ8QoMJwM1dQCJeAMTcqMpAId/IykChtmHKKLQOUmQYmkRVhiEnsjIMNcKUOaElpMjs0AzUESgeyD3wtIDF4jrvB5zdb5rNwHynAAAAAElFTkSuQmCC)}div#start_active_time div.input_holder,div#end_active_time div.input_holder,div#set_triggered_time div.input_holder{margin-bottom:0}.arrows_symbowls{background-size:40%}input.set_start_time{background-color:transparent;border:none;height:40px;display:inline-block;text-transform:none;font-size:35px;color:#fff;font-family:Roboto;box-sizing:border-box;max-width:60px}.offset_flag_holder{height:32px;width:0;text-align:center;display:inline-block;text-transform:none;font-size:28px;color:#fff;font-family:Roboto}input.mobile_time::-webkit-inner-spin-button,input.mobile_time::-webkit-outer-spin-button,#sched_add_popup input[type="number"]::-webkit-outer-spin-button,#sched_add_popup input[type="number"]::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;margin:0}.arrow_main_class{display:inline-block;background-position:50%;transition:background 0.2s;width:80px;height:80px;background-repeat:no-repeat}.not_mobile .full_width_btn:hover,#device_page .device_actions ul li:hover{background:#fff;color:#272e30}#sched_add_popup button{width:235px}#start_active_time,#end_active_time,#set_triggered_time{text-align:center;margin-bottom:20px}#settings #start_active_time .input_holder{text-align:center;padding:0 20px}#set_schedule .start_active_time span.icon,#set_schedule .set_weekdays_scene span.icon_week,#set_schedule .end_active_time span.icon{display:inline-block;width:40px;height:40px;display:block;float:left;margin-top:10px}#sched_select_holder div.select_holder{display:inline-block;width:24%;text-align:center;padding-top:5px}@media(max-width:640px){#advanced_sched_holder .sched_buttons_holder{right:4px}}@media(max-width:375px){#advanced_sched_holder .sched_buttons_holder{right:0}}</style> <script type=text/javascript>var WeeklySchedule={deleteAdvancedSchedule:function(index){$('#dummy_del').data('del_id',index);$('#dummy_del').trigger('click');},setTimeValue:function(){var hours;var minutes;var sign;var time;var base;sign=$('#sched_sign').val();base=$('#set_schedule_base').val();hours=$('#sched_hours').val();hours=parseInt(hours);if(hours<0)hours=-hours;minutes=$('#sched_minutes').val();if(String(hours).length===1)
hours='0'+hours;if(String(minutes).length===1)
minutes='0'+minutes;time=hours+minutes;switch(base){case'on_time':base='';break;case'sunset':base=($('#sched_sign').val()=='-')?'bss':'ass';break;case'sunrise':base=($('#sched_sign').val()=='-')?'bsr':'asr';break;}
return time+base;},checkValues:function(input,value){if(input.hasClass('left')){if(value>23){value=23;}else if(value<0){value='00';}}else{if(value>59){value=59;}else if(value<0){value='00';}}
input.val(value);},changeSymbow:function(field){var hours=parseInt($('#sched_hours').val());var minutes=parseInt($('#sched_minutes').val());var sign=$('#sched_sign').val();var min_h=parseInt($('#sched_hours').prop('min'));var max_h=parseInt($('#sched_hours').prop('max'));var section=0;if(field.hasClass('hour_arrow_up')){hours+=1;}else if(field.hasClass('hour_arrow_down')){hours-=1;}else if(field.hasClass('minute_arrow_up')){minutes+=parseInt(sign+1);section=1;}else if(field.hasClass('minute_arrow_down')){minutes-=parseInt(sign+1);section=1;}
if(section===0){if(hours>max_h)
hours=min_h==0?0:max_h;else if(hours<min_h)
hours=min_h==0?max_h:min_h;if(hours>=0){sign='';if(String(hours).length===1)
hours='0'+hours;}else{hours=-hours;sign='-';if(String(hours).length===1)
hours='0'+hours;}
$('#sched_sign').val(sign);$('#sched_hours').val(sign+hours);}else{if(minutes>59){minutes=0;if((hours==0)&&(min_h<0)){sign='';}}else if(minutes<0){if((hours==0)&&(min_h<0)){minutes=-minutes;sign='-';$('#sched_hours').val('-00');}else{minutes=59;}}else if(minutes==0){if(hours==0){sign='';$('#sched_hours').val('00');}}
if(String(minutes).length===1)
minutes='0'+minutes;$('#sched_sign').val(sign)
$('#sched_minutes').val(minutes);}}};Zepto(function($){$("#sched_add_popup input[type=number]").on('focus',function(e){this.select();});$('#sched_add_popup .arrows_symbowls').on('click',function(){WeeklySchedule.changeSymbow($(this));});$("#sched_add_popup .start_active_time input[type=number]").on('blur',function(e){WeeklySchedule.checkValues($(this),$(this).val());});});</script> <div id=settings_internet class=settings_tab_cont> <div id=internet_set> <div class=icon_holder> <div class=icon_dev_set></div> <div class=iac_info> <h2 class=sett_title> <span>Internet & Security </span> </h2> </div> </div> </div> <div id=wifi_sta_settings> <div class="settings_item wifi_sta_settings"> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=wf_sta class="colapse closed">WiFi mode - Client</h2> <div class=clear></div> </div> <div class="closed wf_sta"> <div class=input_holder> <input type=checkbox name=set_wifi value=wifi_sta class="checkbox set_wifi_sta"> <label class=set_wifi_sta_label> <span class=fake_checkbox></span> <span class=label_text>Connect the <span class=blue>Shelly</span> device to an existing WiFi Network</span> <div class=clear></div> </label> <div class=clear></div> <form class=set_sta_form> <div class=hollow_bg> <input type=text name=wifi_sta_ssid class="text_input wifi_sta_ssid" placeholder="WiFi Name"> </div> <div class="hollow_bg key_sta"> <input type=password name=wifi_sta_key class="text_input wifi_sta_key" placeholder=Password> <div class=v_password></div> </div> <input type=checkbox name=set_static_ip class="checkbox set_static_ip"> <label class=set_static_ip_label> <span class=fake_checkbox></span> <span>Set static IP address</span> <div class=clear></div> </label> <div class=set_ip> <p>IP address:</p> <div class=hollow_bg> <input type=text name=sta_ip class="text_input ip_set sta_ip" placeholder="IP address"> </div> <p>Network mask:</p> <div class=hollow_bg> <input type=text name=netmask value=255.255.255.0 class="text_input ip_set netmask" placeholder="Network mask"> </div> <p>Gateway (optional):</p> <div class=hollow_bg> <input type=text name=gateway class="text_input ip_set gateway" placeholder=Gateway> </div> <p>DNS (optional):</p> <div class=hollow_bg> <input type=text name=dns class="text_input ip_set dns" placeholder=DNS> </div> <p class=blue>WARNING: Cloud must be disabled in order to set static IP address without a gateway.</p> </div> <button class=connect_wifista type=submit> <span class=icon></span> <span>SAVE</span> </button> <div class=clear></div> </form> </div> </div> </div> </div> <style type=text/css>.wifi_sta_settings .ip_set,.set_ip p{padding-left:10px}.key_sta{margin-bottom:20px}.set_ip{display:none}.sta1{margin-left:25px}</style> <script type=text/javascript>var SettingsWifiSta={enableWifiClientMode:function(sta_sel,checkbox){if(checkbox.is(":checked")){$(sta_sel+' .set_sta_form').removeClass('hidden');$('#set_wifi_ap').prop('checked',false);$('#set_wifi_ap_form').addClass('hidden');if(Shelly.currentSettings.wifi_sta['enabled']){$('.sta .set_wifi_sta').prop('checked',true);}
if(Shelly.currentSettings.wifi_sta1['enabled']){$('.sta1 .set_wifi_sta').prop('checked',true);}
$('.sta1').removeClass('hidden');}else if(sta_sel=='.sta')$('.sta1').addClass('hidden');},onChangeStaSsid:function(sta_sel){if($(sta_sel+' .wifi_sta_key').hasClass('prefilled')){$(sta_sel+' .wifi_sta_key').val("");}
$(sta_sel+' .wifi_sta_key').removeClass('prefilled')
$(sta_sel+' .wifi_sta_ssid').removeClass('prefilled')},setDhcpIP:function(sta_sel,checkbox){if(checkbox.is(":checked")){checkbox.prop('checked',true);$(sta_sel+' .set_ip').show();}else{checkbox.prop('checked',false);$(sta_sel+' .set_ip').hide();}},validateIPaddress:function(ipaddress){if(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(ipaddress)){return true;}
return false;},sendWifiRequest:function(url,ssid,ip,ssid1,ip1){var ip_msg="";var ip_msg1="";Messages.showLoading();Shelly.sendRequest(url,"",{},function(res){Messages.hideLoading();Messages.showMessage("Success",'Settings changed','conf');if(ssid){if(ip){ip_msg=' (<a href="http://'+ip+'">http://'+ip+'</a>)';}
if(ssid1&&ip1){ip_msg1=' (<a href="http://'+ip1+'">http://'+ip1+'</a>)';}
$('body').addClass('stop-scrolling');$('#overlay #message p').html('The device will try to connect to <span class="blue">'
+ssid+'</span> '+ip_msg
+(ssid1?' or <span class="blue">'+ssid1+'</span>'+ip_msg1:'')
+', you can continue operating it at its new address.');$('#overlay').removeClass('hidden');}
Shelly.updateConf('settings');},function(err){Messages.hideLoading();Messages.showMessage("Error","Could not change settings:"+err,'error');});},setWifiClientMode:function(sta_sel,sta){var ssid=$(sta_sel+' .wifi_sta_ssid').val();var password=$(sta_sel+' .wifi_sta_key').val();var is_static_ip=$(sta_sel+' .set_static_ip').is(':checked');var ip=$(sta_sel+' .sta_ip').val();var mask=$(sta_sel+' .netmask').val();var dns=$(sta_sel+' .dns').val();var gateway=$(sta_sel+' .gateway').val();var enabled=true;var url='settings/'+sta+'?';var url_args=[];if(!$(sta_sel+' .set_wifi_sta').is(":checked")){enabled=false;url_args.push("enabled=0");}
if((sta_sel=='.sta')&&(!enabled)){SettingsWifiAp.createAccessPoint();return;}
if($(sta_sel+' .wifi_sta_key').hasClass('prefilled')){$(sta_sel+' .wifi_sta_key').removeClass('prefilled');$(sta_sel+' .wifi_sta_key').val("");}
ssid=$(sta_sel+' .wifi_sta_ssid').val();password=$(sta_sel+' .wifi_sta_key').val();if(ssid.length<1||ssid.length>31){Messages.showMessage('Error',"WiFi Network name (SSID) must be between 1 and 31 symbols!",'error');return;}
if(password.length>0&&(password.length<8||password.length>63)){Messages.showMessage('Error',"WiFi Network password must be between 8 and 63 symbols",'error');return;}
url_args.push("enabled=1");url_args.push("ssid="+encodeURIComponent(ssid));url_args.push("key="+encodeURIComponent(password));if(is_static_ip){if(!this.validateIPaddress(ip)){Messages.showMessage('Error',"Invalid IP address",'error');return;}
if(!this.validateIPaddress(mask)){Messages.showMessage('Error',"Invalid Network mask",'error');return;}
if(gateway&&!this.validateIPaddress(gateway)){Messages.showMessage('Error',"Invalid gateway",'error');return;}
url_args.push("ipv4_method=static");url_args.push("ip="+encodeURIComponent(ip));url_args.push("netmask="+encodeURIComponent(mask));url_args.push("gateway="+encodeURIComponent(gateway));if(dns.length){if(!this.validateIPaddress(dns)){Messages.showMessage('Error',"Invalid DNS",'error');return;}
url_args.push("dns="+encodeURIComponent(dns));}}else{url_args.push("ipv4_method=dhcp");}
url=url+url_args.join("&");if(sta_sel=='.sta'){if(is_static_ip){this.sendWifiRequest(url,ssid,ip,Shelly.currentSettings.wifi_sta1.ssid,Shelly.currentSettings.wifi_sta1.ip);}else{this.sendWifiRequest(url,ssid,null,Shelly.currentSettings.wifi_sta1.ssid,null);}}else{if(!Shelly.currentSettings.wifi_sta.enabled){this.sendWifiRequest(url,null,null,null,null);}else{if(is_static_ip){this.sendWifiRequest(url,Shelly.currentSettings.wifi_sta.ssid,Shelly.currentSettings.wifi_sta.ip,enabled?ssid:null,enabled?ip:null);}else{this.sendWifiRequest(url,Shelly.currentSettings.wifi_sta.ssid,null,enabled?ssid:null,null);}}}},fillWifiStaSet:function(sta_sel){var ipv4_method=Shelly.currentSettings.wifi_sta.ipv4_method;var static_IP=Shelly.currentSettings.wifi_sta.ip;var net_mask=Shelly.currentSettings.wifi_sta.mask;var dns=Shelly.currentSettings.wifi_sta.dns;var gateway=Shelly.currentSettings.wifi_sta.gw;if(sta_sel=='.sta1'){ipv4_method=Shelly.currentSettings.wifi_sta1.ipv4_method;static_IP=Shelly.currentSettings.wifi_sta1.ip;net_mask=Shelly.currentSettings.wifi_sta1.mask;dns=Shelly.currentSettings.wifi_sta1.dns;gateway=Shelly.currentSettings.wifi_sta1.gw;}
if(ipv4_method==="static"){$(sta_sel+' .set_static_ip').prop('checked',true);$(sta_sel+' .set_ip').show();$(sta_sel+' .sta_ip').val(static_IP);$(sta_sel+' .netmask').val(net_mask);$(sta_sel+' .dns').val(dns);$(sta_sel+' .gateway').val(gateway);}else{$(sta_sel+' .set_static_ip').prop('checked',false);$(sta_sel+' .set_ip').hide();}}};Zepto(function($){var stas=['sta','sta1'];var i;for(i=0;i<stas.length;i++)(function(){var sta=stas[i];var sta_sel='.'+sta;if(i==0){$('.wifi_sta_settings').addClass(stas[0]);}else{$('.'+stas[0]).clone().removeClass(stas[0]).addClass(sta).appendTo('#wifi_sta_settings');}
$(sta_sel+' .colapse').attr('data-colapse',sta);if(i>0){$(sta_sel+' .colapse').on('click',function(){Settings.collapseSettings($(this));});$(sta_sel+' .colapse').html('WiFi Client Backup');$(sta_sel+' .set_wifi_sta_label .label_text').text('Enable backup WiFi');}
$(sta_sel+' .wf_sta').attr('id',sta);$(sta_sel+' .set_wifi_sta').attr('id',sta+'_set_wifi_sta');$(sta_sel+' .set_wifi_sta_label').attr('for',sta+'_set_wifi_sta');$(sta_sel+' .set_static_ip').attr('id',sta+'_set_static_ip');$(sta_sel+' .set_static_ip_label').attr('for',sta+'_set_static_ip');$(sta_sel+' .connect_wifista').on('click',function(e){e.preventDefault();SettingsWifiSta.setWifiClientMode(sta_sel,sta);});$(sta_sel+' .wifi_sta_ssid').on('input',function(){SettingsWifiSta.onChangeStaSsid(sta_sel);});$(sta_sel+' .wifi_sta_key').on('focus',function(){SettingsWifiSta.onChangeStaSsid(sta_sel);});$(sta_sel+' .set_wifi_sta').on('change',function(){SettingsWifiSta.enableWifiClientMode(sta_sel,$(this));});$(sta_sel+' .set_static_ip').on('change',function(){SettingsWifiSta.setDhcpIP(sta_sel,$(this));});$(document).on('Shelly:settings',function(){SettingsWifiSta.fillWifiStaSet(sta_sel);});})();});</script> <div id=ap_roaming> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=ap_roaming_div class="colapse closed">WiFi Client AP Roaming</h2> <div class=clear></div> </div> <div id=ap_roaming_div class=closed> <div class=input_holder> <input type=checkbox name=ap_roaming_enable id=ap_roaming_enable class=checkbox> <label for=ap_roaming_enable> <span class=fake_checkbox></span> <span> Enable AP Roaming<br> </span> <div class=clear></div> </label> <br> <span>RSSI signal strength value below which the device will periodically scan for better access point:</span> <div class=input_holder> <select id=ap_roaming_threshold class="text_input hollow_bg"> <option value=-50>-50 dBm</option> <option value=-55>-55 dBm</option> <option value=-60>-60 dBm</option> <option value=-65>-65 dBm</option> <option value=-70>-70 dBm</option> <option value=-75>-75 dBm</option> <option value=-80>-80 dBm</option> <option value=-85>-85 dBm</option> <option value=-90>-90 dBm</option> </select> </div> <div class=clear></div> </div> </div> </div> <style type=text/css></style> <script type=text/javascript>Zepto(function($){$("#ap_roaming_threshold").on('change',function(){var thr=$('#ap_roaming_threshold').val();Settings.change("settings?ap_roaming_threshold="+thr);});$("#ap_roaming_enable").on('change',function(){var e=$('#ap_roaming_enable').prop("checked");Settings.change("settings?ap_roaming_enabled="+e);});$(document).on('Shelly:settings',function(){$('#ap_roaming_enable').prop("checked",Shelly.currentSettings.ap_roaming.enabled);var thr=Shelly.currentSettings.ap_roaming.threshold;if($("#ap_roaming_threshold option[value='"+thr+"']").length==0){$("#ap_roaming_threshold option").each(function(i){if($(this).val()<thr){$('#ap_roaming_threshold option').eq(i).before('<option value="'+thr+'">'+thr+' dBm</option>');return false;}});if($("#ap_roaming_threshold option[value='"+thr+"']").length==0){$("#ap_roaming_threshold").append('<option value="'+thr+'">'+thr+' dBm</option>');}}
$('#ap_roaming_threshold').val(thr);});});</script> <div id=wifi_ap_settings class=settings_item> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=wf_app class="colapse closed">WiFi mode - Access Point</h2> <div class=clear></div> </div> <div id=wf_app class=closed> <div class=input_holder> <input type=checkbox name=set_wifi id=set_wifi_ap value=wifi_ap class=checkbox> <label for=set_wifi_ap> <span class=fake_checkbox></span> <span>Configure <span class=blue>Shelly</span> device to create WiFi Access Point and you can connect to its network</span> <div class=clear></div> </label> <div class=clear></div> <form id=set_wifi_ap_form> <div class=hollow_bg> <input type=text id=wifi_ap_ssid name=wifi_ap_ssid class=text_input placeholder disabled=disabled> </div> <div class=hollow_bg> <input type=password id=wifi_ap_key name=wifi_ap_key class=text_input placeholder=Password> <div class=v_password></div> </div> <button id=connect_wifiap type=submit> <span class=icon></span> <span>CREATE Access Point</span> </button> </form> </div> </div> </div> <style type=text/css></style> <script type=text/javascript>var SettingsWifiAp={enableAccessPoint:function(checkbox){if(checkbox.is(":checked")){$('#set_wifi_ap_form').removeClass('hidden');$('#sta_set_wifi_sta').prop('checked',false);$('#sta1_set_wifi_sta').prop('checked',false);$('.set_sta_form').addClass('hidden');}},createAccessPoint:function(){var password=$('#wifi_ap_key').val();var key=$('#wifi_ap_ssid').val();var url="settings/ap?&enabled=1&key="+encodeURIComponent(password);var string='';if((password.length!==0&&password.length<8)||password.length>63){Messages.showMessage('Error',"Access point password must be between 8 and 63 symbols",'error');}else{if(password.length===0){string=" open";}
Messages.showMessage('Warning','You are about to run this device in'+string+' Access Point Mode ! Are you sure you want to continue ?','yes_no',function(result){if(result){Messages.showLoading();Shelly.sendRequest(url,"",{},function(res){Messages.hideLoading();$('body').addClass('stop-scrolling');Messages.showMessage("Success",'Settings changed','conf');$('#overlay #message p').html('The device is switched to Access Point Mode with WiFi network name <span class="blue">'+key+'</span> and can be reached at address <a href="http://192.168.33.1">192.168.33.1</a>.');$('#overlay').removeClass('hidden');Shelly.updateConf('settings');},function(err){Messages.hideLoading();Messages.showMessage("Error","Could not set wifi access point mode",'error');});}});}},setWifiApKey:function(){if(Settings.checkIfActive()){return;}else{var key=Shelly.currentSettings.wifi_ap.ssid;$('#wifi_ap_ssid').val(key);}}};Zepto(function($){$('#connect_wifiap').on('click',function(e){e.preventDefault();SettingsWifiAp.createAccessPoint();});$('#set_wifi_ap').on('change',function(){SettingsWifiAp.enableAccessPoint($(this));});$(document).on('Shelly:settings',function(){SettingsWifiAp.setWifiApKey();});});</script> <div id=login_settings class=settings_item> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=lg_set class="colapse closed">RESTRICT LOGIN</h2> <div class=clear></div> </div> <div id=lg_set class=closed> <div class="input_holder unprot_box"> <span class=unprotected_info>The web interface of this device is not protected by a password.</span> <button id=leave_unprot type=button> <span class=icon></span> <span>Leave unprotected</span> </button> </div> <div class=input_holder> <input type=checkbox name=set_login id=set_login class=checkbox> <label for=set_login> <span class=fake_checkbox></span> <span>Restrict the web interface <span class="blue device_ip"></span> of the <span class=blue>Shelly</span> device with "Username" and "Password"</span> <div class=clear></div> </label> <div class=clear></div> <form id=set_login_form> <div class=hollow_bg> <input type=text id=username name=username class=text_input placeholder=Username> </div> <div class=hollow_bg> <input type=password id=password name=username class=text_input placeholder=Password> <div class=v_password></div> </div> <button id=restrict type=submit> <span class=icon></span> <span>SAVE</span> </button> </form> </div> </div> </div> <style type=text/css>#settings #leave_unprot .icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAASAQMAAABRkn1yAAAABlBMVEUAAADLSkqkAs9vAAAAAXRSTlMAQObYZgAAABxJREFUCNdjkH/AYP+BwaKAwcAAhBhg6P8fPAgA6JcX9S7QyDEAAAAASUVORK5CYII=);background-size:inherit}.unprotected_info{color:red}</style> <script type=text/javascript>var SettingsRestrictLogin={showLoginForm:function(){if(Settings.checkIfActive()){return}else{if($('#set_login').is(":checked")){$('#set_login_form').show();$('#login_settings #username').val(Shelly.currentSettings.login.username);$('#login_settings #password').val(Shelly.currentSettings.login.password);}else{$('#set_login_form').hide();Settings.change("settings/login?enabled=0");}}},loginAuthentication:function(){var username=$('#login_settings #username').val();var password=$('#login_settings #password').val();username=encodeURIComponent(username);password=encodeURIComponent(password);var url="settings/login?enabled=1&username="+username+"&password="+password;if(username.length<1||username.length>50){Messages.showMessage('Error',"Username and password must be from 1 to 50 characters!",'error');}
else if(password.length<1||password.length>50){Messages.showMessage('Error',"Username and password must be from 1 to 50 characters!",'error');}else{Settings.change(url);}},leave_unprotected:function(){$('#lg_set .unprot_box').hide();Settings.change("settings/login?unprotected=1");},fillRestrLog:function(){if(Settings.checkIfActive()){return;}else{var username=Shelly.currentSettings.login.username;var password=Shelly.currentSettings.login.password;var unprotected_login=Shelly.currentSettings.login.unprotected;if(unprotected_login){$('.device_protected_status').show();$('#lg_set .unprot_box').show();}else{$('.device_protected_status').hide();$('#lg_set .unprot_box').hide();}
if(Shelly.currentSettings.login.enabled){$('#set_login_form').show();$('#set_login').prop('checked',true);$('#login_settings #username').val(username);$('#login_settings #password').val(password);}else{$('#set_login_form').hide();}}}};Zepto(function($){$("#set_login_form").on('submit',function(e){e.preventDefault();SettingsRestrictLogin.loginAuthentication();});$("#lg_set #leave_unprot").on('click',function(e){SettingsRestrictLogin.leave_unprotected();});$(document).on('Shelly:settings',function(){SettingsRestrictLogin.fillRestrLog();});$('#set_login').on('change',function(){SettingsRestrictLogin.showLoginForm();});});</script> <div id=sntp_settings class=settings_item> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=sntp_actions class="colapse closed">SNTP Server</h2> <div class=clear></div> </div> <div id=sntp_actions class=closed> <form id=sntp_settings_form> <div class=input_holder> Server: <div class=hollow_bg> <input type=text id=sntp_server name=sntp_server class=text_input> </div> <button id=save_sntp_settings type=submit> <span class=icon></span> <span>SAVE</span> </button> </div> </form> </div> </div> <style type=text/css>#wifi_sta_settings .ip_set,#set_ip p{padding-left:10px}#key_sta{margin-bottom:20px}#set_ip{display:none}</style> <script type=text/javascript>var SettingsSntpServer={fillSntpSettings:function(){if(Settings.checkIfActive()){return;}
if(typeof Shelly.currentSettings.sntp==='undefined'){return;}
$('#sntp_server').val(Shelly.currentSettings.sntp.server);},saveSntpSettings:function(){var params={sntp_server:$('#sntp_server').val(),};Settings.changePost("settings",params,"SNTP Settings changed!");},}
Zepto(function($){$(document).on('Shelly:settings',function(){SettingsSntpServer.fillSntpSettings();});$('#sntp_settings_form').on('submit',function(e){e.preventDefault();SettingsSntpServer.saveSntpSettings();});});</script> <div id=coap_wrapper> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=coap_actions class="colapse closed">Advanced - Developer Settings</h2> <div class=clear></div> </div> <div id=coap_actions class=closed> <div class=input_holder> <input type=checkbox name=cross_origin id=cross_origin class=checkbox> <label for=cross_origin> <span class=fake_checkbox></span> <span>Allow Cross-Origin Resource Sharing</span> <span class=clear></span> </label> </div> <div id=coiot_checkbox class=input_holder> <input type=checkbox name=coiot_enable id=coiot_enable class=checkbox> <label for=coiot_enable> <span class=fake_checkbox></span> <span>Enable CoIoT</span> <span class=clear></span> </label> </div> <div class=input_holder> <form id=coiot_peer_form> <p>CoIoT peer:</p> <div class=hollow_bg> <input type=text id=coiot_peer name=coiot_peer class=text_input> </div> <p>Enter mcast for multicast or ip:port for unicast.</p> <p id=coiot_peer_warning class=blue style="visibility: visible;">Restart required when CoIoT peer is changed!</p> <div class=input_holder> <button id=save_coiot_peer type=submit> <span class=icon></span> <span>SAVE</span> </button> </div> </form> </div> <div id=coap_checkbox class="input_holder hidden"> <input type=checkbox name=coap_actions_enable id=coap_actions_enable class=checkbox> <label for=coap_actions_enable> <span class=fake_checkbox></span> <span>Listen CoAp for color change commands</span> <span class=clear></span> </label> </div> <div class=input_holder> <input type=checkbox name=mqtt_actions_enable id=mqtt_actions_enable class=checkbox> <label for=mqtt_actions_enable> <span class=fake_checkbox></span> <span>Enable MQTT</span> <span class=clear></span> </label> <p id=cloud_mqtt_warning class=blue style="visibility: visible;">WARNING: If you enable MQTT - actions via Cloud connection will be disabled!</p> <form id=mqtt_settings_form class=hidden> <div class=input_holder> <p>Username:</p> <div class=hollow_bg> <input type=text id=mqtt_user name=mqtt_user class=text_input placeholder=Username> </div> <p>Password:</p> <div id=key_sta class=hollow_bg> <input type=password id=mqtt_pass name=mqtt_pass class=text_input placeholder=Password> <div class=v_password></div> </div> <p>Server:</p> <div class=hollow_bg> <input type=text id=mqtt_server name=mqtt_user class=text_input placeholder="Eg: my-server.com:1883"> </div> <p>Custom MQTT prefix:</p> <input type=checkbox name=mqtt_id_enable id=mqtt_id_enable class=checkbox> <label for=mqtt_id_enable> <span class=fake_checkbox></span> <span>Use custom MQTT prefix</span> <div class=clear></div> </label> <div class=hollow_bg id=mqtt_id_form> <input type=text id=mqtt_id name=mqtt_id class=text_input maxlength=32 placeholder="Max 32 characters"> </div> <div class=clear></div> </div> <div class=input_holder> </div> <div class=input_holder> <div class=cols-3> <label for=mqtt_reconnect_timeout_min> Min reconnect timeout </label> <span class=clear></span> <div class=hollow_bg> <input name=mqtt_reconnect_timeout_min type=number id=mqtt_reconnect_timeout_min placeholder=seconds class=text_input> </div> </div> <div class=cols-3> <label for=mqtt_reconnect_timeout_max> Max reconnect timeout: </label> <div class=hollow_bg> <input name=mqtt_reconnect_timeout_max type=number id=mqtt_reconnect_timeout_max placeholder=seconds class=text_input> </div> </div> <div class="cols-3 no-padding"> <label for=mqtt_keep_alive> Keep alive: </label> <span class=clear></span> <div class=hollow_bg> <input name=mqtt_keep_alive type=number id=mqtt_keep_alive placeholder=seconds class=text_input> </div> </div> <div class=clear></div> </div> <div class=input_holder> <div class> <input type=checkbox name=mqtt_clean_session id=mqtt_clean_session class=checkbox> <label for=mqtt_clean_session> <span class=fake_checkbox></span> <span>Clean Session</span> <div class=clear></div> </label> </div> </div> <div class=input_holder> <div class> <input type=checkbox name=mqtt_retain id=mqtt_retain class=checkbox> <label for=mqtt_retain> <span class=fake_checkbox></span> <span>Retain</span> <div class=clear></div> </label> </div> </div> <div class=input_holder> <div class> <p>Max QoS</p> <div class=hollow_bg> <select name=mqtt_max_qos id=mqtt_max_qos class=text_input> <option name=0 value=0>0</option> <option name=1 value=1>1</option> <option name=2 value=2>2</option> </select> </div> </div> <div class=clear></div> </div> <div class=input_holder> <button id=save_mqtt_settings type=submit> <span class=icon></span> <span>SAVE</span> </button> </div> </form> </div> </div> </div> <style type=text/css></style> <script type=text/javascript>var SettingsAdvancedDev={changeCrossOrigin:function(value){Settings.change("settings?allow_cross_origin="+!!value);},fillCrossOrigin:function(){if(Settings.checkIfActive()){return;}
if(typeof Shelly.currentSettings.allow_cross_origin!='undefined'){$("#cross_origin").prop("checked",!!Shelly.currentSettings.allow_cross_origin);}},fillCoiotEnable:function(){if(Settings.checkIfActive()){return;}
if(typeof Shelly.currentSettings.coiot.enabled!='undefined'){$("#coiot_checkbox").removeClass('hidden');$("#coiot_enable").prop("checked",!!Shelly.currentSettings.coiot.enabled);}},fillCoapEnable:function(){if(Settings.checkIfActive()){return;}
if(typeof Shelly.currentSettings.coiot.execute_enable!='undefined'){$("#coap_checkbox").removeClass('hidden');$("#coap_actions_enable").prop("checked",!!Shelly.currentSettings.coiot.execute_enable);}},fillCoiotPeer:function(){if(Shelly.currentSettings.coiot.peer===""){$('#coiot_peer').val("mcast");}else{$('#coiot_peer').val(Shelly.currentSettings.coiot.peer);}},saveCoiotPeerSettings:function(){var params={coiot_peer:$('#coiot_peer').val(),};Settings.changePost("settings",params,"Coiot peer changed!");},changeCoiotEnable:function(value){Settings.change("settings?coiot_enable="+!!value);},changeCoapEnable:function(value){Settings.change("settings?coiot_execute_enable="+!!value);},fillMQTTEnable:function(){if(Settings.checkIfActive()){return;}
if(typeof Shelly.currentSettings.mqtt==='undefined')
var mqtt_enabled=false;else
var mqtt_enabled=!!Shelly.currentSettings.mqtt.enable;$('#mqtt_actions_enable').prop('checked',mqtt_enabled);if(mqtt_enabled){$('#mqtt_settings_form').removeClass('hidden');SettingsAdvancedDev.fillMQTTSettings();}
if(Shelly.currentSettings.mqtt.id===Shelly.currentSettings.device.hostname){$("#mqtt_id_enable").prop("checked",false);$('#mqtt_id_form').addClass('hidden');}else{$("#mqtt_id_enable").prop("checked",true);$('#mqtt_id_form').removeClass('hidden');}},fillMQTTSettings:function(){$('#mqtt_pass').val("********").addClass("prefilled");if(typeof Shelly.currentSettings.mqtt==='undefined')
return false;$('#mqtt_server').val(Shelly.currentSettings.mqtt.server);$('#mqtt_id').val(Shelly.currentSettings.mqtt.id);$('#mqtt_user').val(Shelly.currentSettings.mqtt.user);$('#mqtt_reconnect_timeout_max').val(Shelly.currentSettings.mqtt.reconnect_timeout_max);$('#mqtt_reconnect_timeout_min').val(Shelly.currentSettings.mqtt.reconnect_timeout_min);$('#mqtt_keep_alive').val(Shelly.currentSettings.mqtt.keep_alive);$('#mqtt_clean_session').prop('checked',Shelly.currentSettings.mqtt.clean_session);$('#mqtt_retain').prop('checked',Shelly.currentSettings.mqtt.retain);$('#mqtt_max_qos').val(Shelly.currentSettings.mqtt.max_qos);},saveMQTTSettings:function(){var params={mqtt_enable:!!$("#mqtt_actions_enable").prop("checked"),mqtt_server:$('#mqtt_server').val(),mqtt_id:$('#mqtt_id').val(),mqtt_user:$('#mqtt_user').val(),mqtt_reconnect_timeout_max:$('#mqtt_reconnect_timeout_max').val(),mqtt_reconnect_timeout_min:$('#mqtt_reconnect_timeout_min').val(),mqtt_clean_session:!!$("#mqtt_clean_session").prop("checked"),mqtt_keep_alive:$('#mqtt_keep_alive').val(),mqtt_max_qos:$('#mqtt_max_qos').val(),mqtt_retain:!!$("#mqtt_retain").prop("checked")};if(!$("#mqtt_pass").hasClass("prefilled")){params.mqtt_pass=$("#mqtt_pass").val();}
if(!params.mqtt_keep_alive||params.mqtt_keep_alive<=0){Messages.showMessage('Error',"Keep alive should be greater than 0",'error');return;}
var start=11;Messages.showMessage('','Reboot device to apply','reboot',function(res){if(res){Messages.showLoading();Messages.hideMsg();$('#reboot_mes').addClass('hidden');Shelly.sendRequest("settings","POST",params,function(res){Messages.hideLoading();Shelly.updateConf('settings');},function(err){Messages.hideLoading();Messages.showMessage("Error",err,'error');if(typeof errorCallback=='function')errorCallback(err);});Shelly.sendRequest('reboot',"",{},function(res){setInterval(function(){start--;if(start<0){start=0;}
Messages.showMessage("Restarting device","The page will refresh after "+start+" seconds");},1000);setTimeout(function(){window.location.reload();},10000)},function(err){Messages.hideLoading();Messages.showMessage("Error","Could not reboot the device.",'error');});}});},changeMQTTEnable:function(value){if(!!value){$('#mqtt_settings_form').removeClass('hidden');}else{$('#mqtt_settings_form').addClass('hidden');var start=11;Messages.showMessage('','Reboot device to apply','reboot',function(res){if(res){Messages.showLoading();Messages.hideMsg();$('#reboot_mes').addClass('hidden');Shelly.sendRequest("settings?mqtt_enable=false","",{},function(res){Messages.hideLoading();Shelly.updateConf('settings');},function(err){Messages.hideLoading();Messages.showMessage("Error",err,'error');return;});Shelly.sendRequest('reboot',"",{},function(res){setInterval(function(){start--;if(start<0){start=0;}
Messages.showMessage("Restarting device","The page will refresh after "+start+" seconds");},1000);setTimeout(function(){window.location.reload();},10000)},function(err){Messages.hideLoading();Messages.showMessage("Error","Could not reboot the device.",'error');});}});}},changeMQTTIdEnable:function(value){if(!!value){$('#mqtt_id_form').removeClass('hidden');}else{$('#mqtt_id_form').addClass('hidden');Settings.change("settings?mqtt_id=null");}},onChangePass:function(){if($("#mqtt_pass").hasClass('prefilled')){$("#mqtt_pass").val("");}
$("#mqtt_pass").removeClass('prefilled')},cloudMQTTHideWarning:function(){}};Zepto(function($){$("#cross_origin").on('change',function(){SettingsAdvancedDev.changeCrossOrigin($(this).prop("checked"));});$("#coiot_enable").on('change',function(){SettingsAdvancedDev.changeCoiotEnable($(this).prop("checked"));});$("#coap_actions_enable").on('change',function(){SettingsAdvancedDev.changeCoapEnable($(this).prop("checked"));});$('#coiot_peer_form').on('submit',function(e){e.preventDefault();SettingsAdvancedDev.saveCoiotPeerSettings();});$('#mqtt_actions_enable').on('change',function(){SettingsAdvancedDev.changeMQTTEnable($(this).prop("checked"));});$('#mqtt_id_enable').on('change',function(){SettingsAdvancedDev.changeMQTTIdEnable($(this).prop("checked"));});$(document).on('Shelly:settings',function(){SettingsAdvancedDev.fillCrossOrigin();SettingsAdvancedDev.fillCoiotEnable();SettingsAdvancedDev.fillCoapEnable();SettingsAdvancedDev.fillCoiotPeer();SettingsAdvancedDev.fillMQTTEnable();SettingsAdvancedDev.fillMQTTSettings();SettingsAdvancedDev.cloudMQTTHideWarning();});$('#mqtt_settings_form').on('submit',function(e){e.preventDefault();SettingsAdvancedDev.saveMQTTSettings();});$('#mqtt_pass').on('focus',function(){SettingsAdvancedDev.onChangePass();});});</script> <div id=cloud_settings class=settings_item> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=cloud_set class="colapse closed">Cloud</h2> <div class=clear></div> </div> <div id=cloud_set class=closed> <div class=input_holder> <span>Connecting your <span class=blue>Shelly</span> to its cloud allows you to control it remotely, receive notifications and updates about your devices.</span> <br><br> <span class="blue cloud_disable_warning">WARNING: If you disable the device cloud support, you will lose connection to your device from outside its local network!</span> <button id=cloud_enable type=button> <span class=icon></span> <span>ENABLE CLOUD</span> </button> <button id=cloud_disable type=button> <span class=icon></span> <span>DISABLE CLOUD</span> </button> </div> </div> </div> <style type=text/css>#settings #cloud_enable .icon{background-size:70%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABAAQMAAADf+uBNAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAPdJREFUKM99krmtBCEMhr0iIJwSKIXSmNIohRIICVbj5wMbv5V2HYzmQz5+HwBs5Q1uL8Tb4UKcDhXx+CFZCDlBmWGc+JOh4LxweTLKYeka/dTHMk+OMxic0cp0gLQLJXnkl08okqipBC1RhyqT4mWqsgBVNV7ybRuWtqmhS9s8kHZbmfXkLSqzg2lPXNsmm5BUlWVA/nU69C1QYESY0LoPmcA3U1cAKnJ2dhH4lvITIEV4fQcMAD/hDtC+Qw+prTkp+h9mEGqjkhbOeVJzfhr8nF0CDcRWIqOSm1Sbeq1qgxds1uWot918odseO2S2t927H7P5AfwBjZjtddWBVjYAAAAASUVORK5CYII=)}#settings #cloud_disable .icon{background-color:#ff3b30;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF0AAABdAQMAAAD9v/iAAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAARVJREFUOMvlks2NAyEMhc1ymL1RAikkEq1sJQtSDmlrVmlk0sEcOYzw+peMVttBOPGB7fdsAHjv9XGGZe7yBqnZPuCAvHoIYit+kxHX6ikFcRsOFfHncMA13fosBnHZDSKFpM0rU8hLhkKmDIfUVzEAl4nYIBwXiyKI/cudcY3dndHt06BSsfwwO5QC5YYiFLhqDSh+ApsfASUpdj4IKElx54OAhwNZjWJo2dTqBO6mOnA3RcBOczMYJxBdB9bVZ6ACMjQHGZqDDE1yyI4MTaGruEDoaqtocyJjM0WRsZlWkdF+4Ds9kZa+4zU/GHRwn+XO4CNNDPaOIzPo04WjzHztBk7vO9f8AmJ3Pd+0f3/n33/7jusXzL6TiCg40qUAAAAASUVORK5CYII=)}</style> <script type=text/javascript>var SettingsCloud={cloudStatus:function(){if(Shelly.currentSettings.cloud['enabled']){$('#cloud_enable').hide();$('#cloud_disable').show();}else{$('#cloud_disable').hide()
$('#cloud_enable').show();}},enableCloud:function(){Messages.showMessage('Cloud enable?','Are you sure that you want to enable the connection with the cloud?','yes_no',function(res){if(res){Settings.change("settings/cloud/?enabled=1");}});},disableCloud:function(){Messages.showMessage('Cloud disable?','Are you sure that you want to disable the connection with the cloud? Warning: you will not be able to control the device out of his network','yes_no',function(res){if(res)
Settings.change("settings/cloud/?enabled=0");});}};Zepto(function($){$('#cloud_enable').on('click',function(){SettingsCloud.enableCloud();});$('#cloud_disable').on('click',function(e){SettingsCloud.disableCloud();});$(document).on('Shelly:settings',function(){SettingsCloud.cloudStatus();});});</script> </div> <style type=text/css>#settings_internet div.settings_icon,#settings_internet .icon_holder .icon_dev_set{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAQMAAACQp+OdAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAPZJREFUKM99kk1qwzAQhZ/QQkvfILpIiK6V0hIZcq1SBnyAXsG7brXUQmg6M3JcE0JHC3+g+dG8ZwBIDRaeeTaIzMUgM9udY4ktZSQF/vnm1XI9WXbqAlWLFLSMvzy9d60+e3qTetcFrnmGbwqJpM2HpzMTJrZY/yAOKIiLfu8Faa65XXxV8HRyAjBoyCgCaLi9hogux+CG5gSmI3RXgl2Nmdz/g5flG2CDfej+jP2FycDtYOsEOslekXSAwmP36QlWUax5SqJYqCqdaDjEFFVN56v6xJ9DefMit6M7sW9+Tbws5mDQxnR0WX3vjz+hGoSRYi1xiF+r+whWSwBGIAAAAABJRU5ErkJggg==)}.connect_wifista .icon,.wifi_sta_ssid{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAARAQMAAAAMvaX+AAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAADtJREFUCNdjYPjHwMD+/wCD/P8PDHUMPxg+MNgwJDBwMDCCxRsY+M8/YGBjPMAABhVADBRn+ANlG4BFAaY7EAE19ravAAAAAElFTkSuQmCC);background-size:20px}input[type="password"],input.password{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAASAQMAAABRkn1yAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAABpJREFUCNdjkD/AYP+BwaKAwcAABf3/gwcBAPXHGGVTw2ouAAAAAElFTkSuQmCC);padding-right:35px;background-size:14px;background-position-x:13px}.text_input#username{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF0AAABdAQMAAAD9v/iAAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAGpJREFUOMtjYBjBQL4BiVP/AMFm/P8DwWH+/wfBYf//DweH//9/HBz5//8bqMfBbQ9ut6F4AcVzKN5GDRAagv8fcITO//8IKWYg5w+SRxFelQdxYJrsQZwDMN+AOA+wcUBsuNkDzxkFFAIAm7ORwABqnYoAAAAASUVORK5CYII=);background-position:5px 50%;background-size:32px}#connect_wifiap .icon,#wifi_ap_ssid{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF0AAABdAQMAAAD9v/iAAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAMlJREFUOMvlkrERwyAMRcEUlGQD1khHBssdHo1RGIGSwmeCBI755FymMsXnHkaWkL4Qd12Ptr1Ynw0i65tVJt52VpX5qDDo7QdUh/3Ufta+99smtzxlncGmpeoifCCImiKFI3DR1AtmdVScC7ae2WA7xENrIF1w0VLZfvUEyXSgmC/Q3xqUmtsGk3VuUMP1CT4NUPIBcpdlU9s/APLMFYy1nVXDe+aXDj0YuwN9w46OvYYpwHyuxwjTBh+AQ66NBH5DJ4JHwb13XB8QYr8H1QBZOgAAAABJRU5ErkJggg==);background-size:24px}.device_protected_status{display:none;width:13%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAASAQMAAABRkn1yAAAABlBMVEUAAADLSkqkAs9vAAAAAXRSTlMAQObYZgAAABxJREFUCNdjkH/AYP+BwaKAwcAAhBhg6P8fPAgA6JcX9S7QyDEAAAAASUVORK5CYII=);background-size:contain;background-repeat:no-repeat;position:absolute;height:13%;top:6%;right:6%}.v_password:hover,.v_password.shown{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF0AAABdBAMAAAA1X3fwAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAYUExURQAAACdRbCdRbCdRbCdRbCdRbCdRbCdRbNjzwhwAAAAHdFJOUwDaK68JV4BSS7FrAAABH0lEQVRYw+2VzQ/BQBDFaXD2Fb1WCFeS4ooEV+LgKiRctaL779tlp61tduuFE/s7Tdq3s2+n09lCwWKxWP6G+dFlgsZh+o6891QLWl6+fMtSXNd58g17IchZ0GEKV6OlMstwM8hLE7IxPg1pga/Xt6kuXb6W6hRoHTlSET3rvpSr6zp9X0lI23nm9L56HM0GM5l+aniSRmYLebgY1kZc5EhDA1Pt99KZcHE2fAM6LQ93j4i3wspwYmknim1wYxW9IbITpo/p6JuiKF81yY4wVHITkwq7ZOtJNsy2tZuUh8JqXCARKjCj/vJxftQ/Wh+0/uj3hfsH7U+0/+H/S/v/Nr8zH+D5g843eH6i8xme//D9At9f8P0I378Wi8XyG9wBbeVT3kSXqRYAAAAASUVORK5CYII=) no-repeat;background-size:contain}.v_password{bottom:0;display:block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF0AAABdBAMAAAA1X3fwAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAbUExURQAAAP///////////////////////////////+tNPsIAAAAIdFJOUwDgKwmld8hTDnap2AAAATdJREFUWMPtlT0LwjAQhmuLuPoJjgU/cLSCuioKOoo4OIouHTuJo4q2+dkmekmkbVIPO2neKeiTy3vXy8WyjIyMjP5Gg02TMNXX/U/wzotmarjZ+JG8KQxQePaGLokp1FoqkoTuGtxZAnSZb6Z8wyzbTaNF9/I6qR3ZQNxfdR/C7qqK78UC8uNcffiDSMfXHuBBeNkFI8g+vS+gOFe6HE8rCwrZYGiiq/2KcszInv621XwDyPZCl6fnKhAWUzP2RSxbGCuqDZWIoDyRJk8gSvIF+KvG7TBDTlOajOkkj14ml4HKPoP4BStLfpfgiSznGw8FJeev42P9Y+uDrT8/+tPvi+4fTX9GefR/yv3ytPdLeX9r+cwH9PzBzjf0/MTOZ8tqx/Gbm+v7gn6/0O8j+v01MjIy+g09AEaDhMrGh9cvAAAAAElFTkSuQmCC) no-repeat;height:30px;width:30px;position:absolute;background-size:contain;top:0;transition:all .2s;right:10px;margin:auto;cursor:pointer}</style> <script type=text/javascript>var SettingNetwork={fillWifiSet:function(){if(Settings.checkIfActive()){return;}
var ssid;var wifi_sta=Shelly.currentSettings.wifi_sta['enabled'];if(!wifi_sta)$('.sta1').addClass('hidden');else $('.sta1').removeClass('hidden');var wifi_sta1=Shelly.currentSettings.wifi_sta1['enabled'];var wifi_ap=Shelly.currentSettings.wifi_ap['enabled'];ssid=Shelly.currentSettings.wifi_sta['ssid'];$('.sta .wifi_sta_ssid').val(ssid).addClass("prefilled");$('.sta .wifi_sta_key').val("********").addClass("prefilled");ssid=Shelly.currentSettings.wifi_sta1['ssid'];$('.sta1 .wifi_sta_ssid').val(ssid).addClass("prefilled");$('.sta1 .wifi_sta_key').val("********").addClass("prefilled");if(wifi_sta){$('.sta .set_wifi_sta').prop('checked',true);$('.sta .set_sta_form').removeClass('hidden');$('#set_wifi_ap').prop('checked',false);$('#set_wifi_ap_form').addClass('hidden');}else{$('.sta .set_wifi_sta').prop('checked',false);$('.sta .set_sta_form').addClass('hidden');$('#wifi_ap_ssid').val(Shelly.currentSettings.wifi_ap['ssid']);$('#set_wifi_ap').prop('checked',true);$('#set_wifi_ap_form').removeClass('hidden');}
if(wifi_sta&&wifi_sta1){$('.sta1 .set_wifi_sta').prop('checked',true);$('.sta1 .set_sta_form').removeClass('hidden');}else{$('.sta1 .set_wifi_sta').prop('checked',false);$('.sta1 .set_sta_form').addClass('hidden');}},wifiInputsValidation:function(key,pass,url){if(key.length<1||key.length>31){Messages.showMessage('Error',"Client mode SSID must be between 1 and 31 symbols!",'error');}else if(pass.length<8||pass.kength>64){Messages.showMessage('Error',"Client mode key must be between 8 and 64 symbols!",'error');}else{Settings.change(url);}}};Zepto(function($){$(document).on('Shelly:settings',function(){SettingNetwork.fillWifiSet();});$(document).on('input keypress paste change','input[type="password"]',function(){if($(this).val()){$(this).closest('.hollow_bg').find('.v_password').addClass("show_it");}else{$(this).closest('.hollow_bg').find('.v_password').removeClass("show_it");}});$(document).on('click','.v_password',function(){if($(this).hasClass('shown')){$(this).removeClass('shown');$(this).closest('.hollow_bg').find('input').attr('type','password');$(this).closest('.hollow_bg').find('input').removeClass('password');}else{$(this).addClass('shown');$(this).closest('.hollow_bg').find('input').attr('type','text');$(this).closest('.hollow_bg').find('input').addClass('password');}});});</script> <div id=settings_safety class=settings_tab_cont> <div id=safety_set> <div class=icon_holder> <div class=icon_dev_set></div> <div class=iac_info> <h2 class=sett_title> <span>Safety </span> </h2> </div> </div> </div> <div id=max_power_settings class=settings_item> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=pow_set class="colapse opened">Max Power Protection</h2> <div class=clear></div> </div> <div id=pow_set class=opened> <div class=input_holder> <input type=checkbox name=enable_max_power id=enable_max_power class=checkbox> <label for=enable_max_power> <span class=fake_checkbox></span> <span>Custom Max Power Protection</span> <div class=clear></div> </label> </div> <div class=input_holder> <label for=enable_max_power> <span> Configure <span class=blue>Shelly</span> device to turn off when power consumption reach <span class="range_value blue">0</span> W. Range - 1W - <span class=max_power_val></span> W. </span> <div class=clear></div> </label> <div class=hollow_bg> <input type=tel name=power_max_range id=power_max_range class=text_input maxlength=4> </div> <button id=power_max_button type=submit> <span class=icon></span> <span>SAVE</span> </button> <div class=clear></div> </div> </div> </div> <style type=text/css></style> <script type=text/javascript>var SettingsSafetyMaxPower={activeSafetyMode:function(element){element.is(':checked')?$("#power_max_range").val(SettingsPowProt.getMaxPower()):$("#power_max_range").val(0);$("#power_max_button").trigger('click');},changeMaxPower:function(channel){var chan=channel.closest('#channel_page').attr('data-channel');var channel_num;if(1===1||chan==undefined){channel_num='';}else{channel_num="relay/"+chan;}
var power=$('#power_max_range').val();var max_power=SettingsPowProt.getMaxPower();power=parseInt(power);if(!(power>=0&&power<=max_power)){Messages.showMessage('Wrong power value','Please enter value between 1 and '+max_power+'. 0 means no power protection!','error');}else{Settings.change("settings/"+channel_num+"?max_power="+power);$("#enable_max_power").prop("checked",(power!=0));}}};Zepto(function($){$('#enable_max_power').on('change',function(){SettingsSafetyMaxPower.activeSafetyMode($(this));});$("#safety").on("click",function(){$("#pow_set .max_power_val").html(function(){return SettingsPowProt.getMaxPower();});});$("#power_max_button").on('click',function(){SettingsSafetyMaxPower.changeMaxPower($(this));});$("#power_max_range").on('keyup',function(){var max_power=SettingsPowProt.getMaxPower();$('#enable_max_power').prop('checked',$(this).val()!=0&&$(this).val()<=max_power);Settings.fillValue($('#max_power_settings .range_value'),$(this).val()==0?max_power:$(this).val());});});</script> </div> <style type=text/css>#settings_safety div.settings_icon,#settings_safety .icon_holder .icon_dev_set{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAQMAAACQp+OdAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAOdJREFUKM+tksGNxSAMRAdx4EgJKYXOAqVRCiXkyCHCf8bwV9o9L4rQCxhiPwcAygsf0aw5XGaPQzXzvWAcJ8SsE5KNbEOxC/DoMvkydYjLWcd0W1w6jT2F5Zc2RL+1dKTp3+vID0LDNZAHks9cZGLpISSzESdKY2LzBwIBDi+qA17cf2B94SYeeP8b1i94CDeyYG0YUIZJ5l7mLM9BEAQqB7TLulhyXQd27fIwHfYzxPRDUVQXuxxSJtXRqnuGHfMuu7JXSVDYokvWNVX1K1uL3sH07al3uZ2+e6tQVBd2UN9/ydk54wNOLtzXm3BIqQAAAABJRU5ErkJggg==)}</style> <script type=text/javascript>var SettingsPowProt={getMaxPower:function(){var max_power=0;max_power=2500;return max_power;},fillSettings:function(accessPoint,inputField,checkbox){if(Settings.checkIfActive()){return;}
var set;if((Channel.selectedChannel===-1||typeof Channel.selectedChannel==='undefined')){set=Shelly.currentSettings[accessPoint];}else{set=Shelly.currentSettings.relays[Channel.selectedChannel][accessPoint];}
if(set!==undefined&&set!==""&&set!==0){checkbox.prop('checked',true);}else{checkbox.prop('checked',false);}
inputField.val(set==0?SettingsPowProt.getMaxPower():set);$('#max_power_settings .range_value').text(set==0?SettingsPowProt.getMaxPower():set);}};Zepto(function($){$(document).on('Shelly:settings',function(){SettingsPowProt.fillSettings("max_power",$("#power_max_range"),$('#enable_max_power'));});});</script> <div id=settings_actions class=settings_tab_cont> <div class=icon_holder> <div class=icon_dev_set></div> <div class=iac_info> <h2 class=sett_title> <span>Actions</span> </h2> </div> </div> <script type=text/javascript>Zepto(function($){appendActionSet("btn_on_url","#settings_actions","Button switched ON url","Enabled","Url to be hit when the button is switched ON");appendActionSet("btn_off_url","#settings_actions","Button switched OFF url","Enabled","Url to be hit when the button is switched OFF");$(document).on('Shelly:settings Shelly:actions',function(){if((typeof Shelly.currentActions=='undefined')||(typeof Shelly.currentActions.actions=='undefined')){return;}
var url=Shelly.currentActions.actions["btn_off_url"];if(typeof url=="undefined"){$("#btn_off_url").hide();$("#btn_on_url_title").html("Button pressed url");$("#btn_on_url_description").html("Url to be hit when the button is pressed");}});});</script> <script type=text/javascript>Zepto(function($){appendActionSet("out_on_url","#settings_actions","Output switched ON url","Enabled","Url to be hit when the output is switched ON");appendActionSet("out_off_url","#settings_actions","Output switched OFF url","Enabled","Url to be hit when the output is switched OFF");});</script> </div> <style type=text/css>#settings_actions div.settings_icon,#settings_actions .icon_holder .icon_dev_set{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAQMAAACQp+OdAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAN1JREFUKM990lEOgjAMANASosZEJX4aP/AYfhjwKB5jH0T48ASciFvwuyNg/CFxobZrRwxBCWUP1o3SAACQI2JPI9CIwzwsxe4XBkXcKpZ1I1jUV0GCVrDenwSHgDRMHcOTMWdctX03k53jthJEGMo4z1bIX4eWUDK6bxjO+oMXTvHE+eSkUuQWuGMGyk4xcBcdmMjdKAcIvVW4QhC7u+KRCWATMFwULsAYRdQr6F2CtFH4wgAKioiRUcTcj5Ri1dCFKvbh7/ipn+c8v4JXAvT+pKPkhoH8K9YjReRtPm+wmYmt/OniAAAAAElFTkSuQmCC)}.url_set .hollow_bg{width:90%;float:left;height:44px}.url_set .delete_icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA6AQMAAADSnngRAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAD5JREFUKM9jYMAHGP//gzCY//+HMNj//28A0fL/geABqQxMwAySghoMMXqUQTYDHphwBiOQhkQhkPEHb1wDADqN2sVsuXGFAAAAAElFTkSuQmCC);background-color:#d23830;margin-left:7px;display:inline-block;width:40px;height:40px;background-size:50%;background-repeat:no-repeat;background-position:50% 50%;border-radius:3px;cursor:pointer;border:none}.url_set .right_holder{position:relative;width:10%;text-align:right;float:right;margin-top:20px}@media(max-width:640px){.url_set .right_holder{right:4px}}@media(max-width:375px){.url_set .right_holder{right:0}</style> <script type=text/javascript>function msgSucc(res){Messages.hideLoading();Messages.showMessage("Success","Url saved",'conf');}
function msgErr(err){Messages.hideLoading();Messages.showMessage("Error","Url not saved!",'error');}
function getChannelActive(){var ch=0;ch=0;return ch;}
var SettingsActions={save:function(w){this.save_params(w,w,-1);},save_params:function(w,realid,idx){var urls={};urls["urls"]=[];var error=false;var send_urls=false;$("#"+w+"_div .url_set .url_input").each(function(){if($(this).parents().closest(".input_holder").data("changed")){send_urls=true;}
var url=$(this).val();if(url.length>256){Messages.showMessage("Error","The url is too long!",'error');$(this).css("border","2px solid red");error=true;return;}
if(url!=''&&!error)urls["urls"].push(encodeURIComponent(url));});if(error)return;var checked=$("#"+w+"_enable").is(":checked");Messages.showLoading();var urls_to_save="";if(send_urls){if(urls.urls.length>0){urls_to_save="&"+decodeURIComponent($.param(urls));}else{urls_to_save="&urls[]="}}
if(idx<0)idx=getChannelActive();var pv=[];$("#"+w+"_div .act_ext input").each(function(){if(typeof $(this).data("pname")!='undefined'){if(($(this).attr('type')=='radio')){pv[$(this).data("pname")]=$(this).prop("checked");}else{pv[$(this).data("pname")]=$(this).val();}}});var ext_values=""
for(const[key,value]of Object.entries(pv)){ext_values+=(`&${key}=${value}`);}
Shelly.sendRequest("settings/actions/?index="+idx+
"&"+"enabled="+checked+
ext_values+
"&name="+realid+
urls_to_save,"",{},msgSucc,msgErr);$("#"+w+"_div .url_set .url_input").each(function(){$(this).parents().closest(".input_holder").data("changed","false");});},setupEl:function(act){this.setupEl_params(act,"",-1);},setupEl_params:function(act,actsave,idx){$("#"+act+"_submit").off("click").on("click",function(){if(actsave.length>0){SettingsActions.save_params(act,actsave,idx);}else{SettingsActions.save(act);}});$("#"+act+"_urls .url_input").prop('placeholder','http://').on('focus',function(){$(this).css("border","none");}).on('change',function(){$(this).parents().closest(".input_holder").data("changed","true");});$("#"+act+"_urls .delete_icon").hide();$("#"+act+"_urls .action_more").off("click").on("click",function(){if($(this).closest("div").find(".url_set").length<5)
SettingsActions.cloneUrlInput(act,"");});},cloneUrlInput:function(act,val){var s=$("#"+act+"_urls .action_more");var el=$(s).closest("div").find(".url_set").last();el.clone(true).insertAfter(el).find(".url_input").val(val).on('focus',function(){$(this).css("border","none");}).on('change',function(){$(this).parents().closest(".input_holder").data("changed","true");}).parents().closest(".input_holder").data("changed","false");$(s).closest("div").find(".url_set .delete_icon").last().show().on("click",function(){$(this).parents().eq(1).closest(".input_holder").data("changed","true");$(this).parents().eq(1).remove();});},fillUrls:function(act,v){urls=v.urls
$("#"+act+"_enable").prop("checked",v.enabled);$("#"+act+"_urls .url_set").slice(1).remove();$("#"+act+"_urls .url_input").val(urls[0]);for(let i=0;i<urls.length;i++){if(i<1){$("#"+act+"_urls .url_input").val(urls[0]);}else{SettingsActions.cloneUrlInput(act,urls[i]);}}},_addExtension:function(act,text,pname,chbox,one_pname){var chbox_div='<div class="act_ext">'+
'<div class="input_holder" id="'+act+'_ext_div">'+
'<input type="radio" name="'+act+'_ext_one" id="'+act+'_ext_one" class="checkbox"'+
'data-pname="'+one_pname+'" checked/>'+
'<label for="'+act+'_ext_one">'+
'<span class="fake_checkbox"></span>'+
'<span">One time</span>'+
'<div class="clear"></div>'+
'</label>'+
'<br/>'+
'<input type="radio" name="'+act+'_ext_one" id="'+act+'_ext_one_off" class="checkbox"'+
'/>'+
'<label for="'+act+'_ext_one_off">'+
'<span class="fake_checkbox"></span>'+
'<span">Repeatedly'+
'</span>'+
'<div class="clear"></div>'+
'</label>'+
'</div>'+
'</div>';var thr_div='<div class="act_ext">'+
'<div class="clear">&nbsp;</div>'+
'<div>'+text+'</div>'+
'<div class="hollow_bg">'+
'    <input type="text" id="'+act+'_ext" class="text_input" data-pname="'+
pname+'" value="0"/>'+
'</div>'+
'</div>';$("#"+act+"_checkbox_div").append(thr_div);if(chbox)$("#"+act+"_checkbox_div").append(chbox_div);},addExtension:function(act,text,pname,chbox){var one_pname;one_pname=act+'_onetime';this._addExtension(act,text,pname,chbox,one_pname);},fillExtension:function(act,value){$("#"+act+"_ext").val(value);},fillExtensionCheck:function(act,value){$('#'+act+'_ext_one').prop("checked",value);$('#'+act+'_ext_one_off').prop("checked",!value);}};Zepto(function($){$("#actions").on("click",function(){aCh=getChannelActive();Shelly.loadActions(aCh,function(isok){if(!isok){Messages.showMessage("Could not fetch actions","Device is unavailable",'error');return;}
Messages.hideLoading();for(let[at,value]of Object.entries(Shelly.currentActions.actions)){SettingsActions.setupEl(at);SettingsActions.fillUrls(at,value[0]);}});});});</script> <div id=settings_info class=settings_tab_cont> <div id=info_device> <div class=icon_holder> <div class=icon_dev_set></div> <div class=iac_info> <h2 class=sett_title> <span>Settings </span> </h2> </div> </div> </div> <div id=default_settings> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=def_set class="colapse closed">POWER ON DEFAULT MODE</h2> <div class=clear></div> </div> <div id=def_set class=closed> <div class=input_holder> <input type=radio name=default_mode id=def_on value=on class=checkbox> <label for=def_on> <span class=fake_checkbox></span> <span>ON - Configure <span class=blue>Shelly</span> device to Turn ON, when it has power.</span> <div class=clear></div> </label> </div> <div class=input_holder> <input type=radio name=default_mode id=def_off value=off class=checkbox> <label for=def_off> <span class=fake_checkbox></span> <span>OFF - Configure <span class=blue>Shelly</span> device to Turn OFF, when it has power.</span> <div class=clear></div> </label> </div> <div class=input_holder> <input type=radio name=default_mode id=def_last value=last class=checkbox> <label for=def_last> <span class=fake_checkbox></span> <span>Restore Last Mode - Configure <span class=blue>Shelly</span> device to Restore the last mode it was in, when it has power.</span> <div class=clear></div> </label> </div> </div> </div> <style type=text/css></style> <script type=text/javascript>var SettingsDefaultState={changeDefaultMode:function(mode){var channel=Settings.validateChannel();var dev_type=Settings.validateDevice(true);Settings.change("settings/"+dev_type+"/"+channel+"?default_state="+mode.val());},fillDefaultModeSet:function(){if(Settings.checkIfActive()){return;}else{var default_set;var channel=Settings.validateChannel();var dev_type=Settings.validateDevice(false);default_set=Shelly.currentSettings[dev_type+'s'][channel]['default_state'];$('#def_'+default_set).prop('checked',true);}}};Zepto(function($){$("#default_settings input[type=radio][name=default_mode]").on('change',function(){SettingsDefaultState.changeDefaultMode($(this),$(this).val());});$(document).on('Shelly:settings',function(){SettingsDefaultState.fillDefaultModeSet();});});</script> <div id=appliance_type class=settings_item> <div id=atype_set class=hidden> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=appliance_type_actions class="colapse closed">Appliance type</h2> <div class=clear></div> </div> <div id=appliance_type_actions class=closed> <form id=appliance_type_form> <div class=input_holder> Type: <div class=hollow_bg> <input type=text id=app_type name=app_type class=text_input> </div> <button id=save_appliance_type type=submit> <span class=icon></span> <span>SAVE</span> </button> </div> </form> </div> </div> </div> <style type=text/css></style> <script type=text/javascript>var SettingsApplianceType={fillApplianceTypeSettings:function(){if(Settings.checkIfActive()){return;}
var channel=Settings.validateChannel();if((typeof Shelly.currentSettings.relays==='undefined')||(typeof Shelly.currentSettings.relays[channel].appliance_type==='undefined')){return;}
$('#atype_set').removeClass('hidden');$('#app_type').val(Shelly.currentSettings.relays[channel].appliance_type);},saveApplianceTypeSettings:function(){var channel=Settings.validateChannel();if((typeof Shelly.currentSettings.relays==='undefined')||(typeof Shelly.currentSettings.relays[channel].appliance_type==='undefined')){return;}
var atype=$('#app_type').val();var params={appliance_type:atype,};Settings.changePost("settings/relay/"+channel,params,"Appliance type changed!");},}
Zepto(function($){$(document).on('Shelly:settings',function(){SettingsApplianceType.fillApplianceTypeSettings();});$('#appliance_type_form').on('submit',function(e){e.preventDefault();SettingsApplianceType.saveApplianceTypeSettings();});});</script> <div id=timezone_wrapper> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=timezone_geo class="colapse closed">Time zone and Geo-location</h2> <div class=clear></div> </div> <div id=timezone_geo class=closed> <div class=input_holder> <input type=checkbox name=auto_timezone id=auto_timezone class=checkbox> <label for=auto_timezone> <span class=fake_checkbox></span> <span>Automatically detect Time zone and approximate geo-location</span> <span class=clear></span> </label> </div> <div id=manual_timezone_geo class=input_holder data-disabled-text="In order to change manually the Timezone and Geo-location, please disable Auto-detection of Timezone and Geo-location."> <h4>Timezone Settings</h4> <div> <label for=timezone_select> Local Time zone of the <span class=blue>Shelly</span> device: </label> <div class=hollow_bg> <select name=timezone_select id=timezone_select class=text_input> <option name=UTC>UTC</option> </select> </div> </div> <div> <button id=timezone_autodetect_button class=small_btn> <span class=icon></span> <span>Detect</span> </button> </div> <h4>Daylight saving time: </h4> <div class=input_holder> <input type=radio name=dst id=dst_on class=checkbox> <label for=dst_on> <span class=fake_checkbox></span> <span>Daylight saving time ON</span> <div class=clear></div> </label> </div> <div class=input_holder> <input type=radio name=dst id=dst_off class=checkbox> <label for=dst_off> <span class=fake_checkbox></span> <span>Daylight saving time OFF</span> <div class=clear></div> </label> </div> <div class=input_holder> <input type=radio name=dst id=dst_auto class=checkbox> <label for=dst_auto> <span class=fake_checkbox></span> <span>Daylight saving time offset <span class=blue>AUTO</span> (requires internet connection)</span> <div class=clear></div> </label> </div> <h4>Approximate geo-location</h4> <div class=cols-3> <label for=geolocation_lat> Latitude: </label> <div class=hollow_bg> <input name=geolocation_lat type=number min=-90 max=90 step=0.000001 id=geolocation_lat class=text_input> </div> </div> <div class=cols-3> <label for=geolocation_lng> Longtitude: </label> <span class=clear></span> <div class=hollow_bg> <input name=geolocation_lng type=number min=-180 max=180 step=0.000001 id=geolocation_lng class=text_input> </div> </div> <div class="cols-3 no-padding"> <button id=geo_autodetect_button> <span class=icon></span> <span>Detect</span> </button> </div> <div class=clear></div> <button id=timezone_geo_button type=submit> <span class=icon></span> <span>SAVE</span> </button> <div class=clear></div> </div> </div> </div> <style type=text/css>#settings #geo_autodetect_button{margin:27px 0 0 0}#settings #geo_autodetect_button .icon,#settings #timezone_autodetect_button .icon{background-color:#ffcc00}</style> <script type=text/javascript>var SettingsTimezone={tz_offsets:{},fillTimezone:function(){if(Settings.checkIfActive()){return;}
var timezone=Shelly.currentSettings.timezone||"UTC";var lat=Shelly.currentSettings.lat||"";var lng=Shelly.currentSettings.lng||"";if(lat==500||lng==500){lat=lng="";}
$('#auto_timezone').prop("checked",!!Shelly.currentSettings.tzautodetect);$('#timezone_geo #dst_on').prop("checked",!!Shelly.currentSettings.tz_dst);$('#timezone_geo #dst_off').prop("checked",!!!Shelly.currentSettings.tz_dst);$('#timezone_geo #dst_auto').prop("checked",!!Shelly.currentSettings.tz_dst_auto);if(!!Shelly.currentSettings.tzautodetect){$("#manual_timezone_geo").addClass("disabled");}else{$("#manual_timezone_geo").removeClass("disabled");}
if(!$('#timezone_select option[name="'+timezone+'"]').length){$("#timezone_select").append('<option name="'+timezone+'">'+timezone+'</option>');SettingsTimezone.tz_offsets[timezone]=Shelly.currentSettings.tz_utc_offset;}
$('#timezone_select option[name="'+timezone+'"]').attr('selected','selected');$("#geolocation_lat").val(lat);$("#geolocation_lng").val(lng);},fillTzList:function(){var options_html='';SettingsTimezone.tz_offsets['UTC']=0;SettingsTimezone.fetchTzList(function(data){if(!data)
return;Object.keys(data).forEach(timezone=>{options_html+='<option name="'+timezone+'">'+timezone+(timezone=='UTC'?'':(' (UTC'+(data[timezone]>=0?'+':'')+Math.floor(data[timezone]/3600)+':'+(data[timezone]%3600<600?'0':'')+((data[timezone]%3600)/60)+')'))+'</option>';SettingsTimezone.tz_offsets[timezone]=data[timezone];});$('#timezone_select').html(options_html);SettingsTimezone.fillTimezone();});},fetchTzList:function(cb){Messages.showLoading();Shelly.apiRequest("timezone/tzoffsetlist","",{},function(res){Messages.hideLoading();cb(res.data);},function(err){Messages.hideLoading();Messages.showMessage("Error","Could not get the Time zone list! There is no Internet connection!",'error');cb({"Africa\/Abidjan":0,"Africa\/Accra":0,"Africa\/Addis_Ababa":10800,"Africa\/Algiers":3600,"Africa\/Asmara":10800,"Africa\/Bamako":0,"Africa\/Bangui":3600,"Africa\/Banjul":0,"Africa\/Bissau":0,"Africa\/Blantyre":7200,"Africa\/Brazzaville":3600,"Africa\/Bujumbura":7200,"Africa\/Cairo":7200,"Africa\/Casablanca":0,"Africa\/Ceuta":3600,"Africa\/Conakry":0,"Africa\/Dakar":0,"Africa\/Dar_es_Salaam":10800,"Africa\/Djibouti":10800,"Africa\/Douala":3600,"Africa\/El_Aaiun":0,"Africa\/Freetown":0,"Africa\/Gaborone":7200,"Africa\/Harare":7200,"Africa\/Johannesburg":7200,"Africa\/Juba":10800,"Africa\/Kampala":10800,"Africa\/Khartoum":7200,"Africa\/Kigali":7200,"Africa\/Kinshasa":3600,"Africa\/Lagos":3600,"Africa\/Libreville":3600,"Africa\/Lome":0,"Africa\/Luanda":3600,"Africa\/Lubumbashi":7200,"Africa\/Lusaka":7200,"Africa\/Malabo":3600,"Africa\/Maputo":7200,"Africa\/Maseru":7200,"Africa\/Mbabane":7200,"Africa\/Mogadishu":10800,"Africa\/Monrovia":0,"Africa\/Nairobi":10800,"Africa\/Ndjamena":3600,"Africa\/Niamey":3600,"Africa\/Nouakchott":0,"Africa\/Ouagadougou":0,"Africa\/Porto-Novo":3600,"Africa\/Sao_Tome":0,"Africa\/Tripoli":7200,"Africa\/Tunis":3600,"Africa\/Windhoek":7200,"America\/Adak":-36000,"America\/Anchorage":-32400,"America\/Anguilla":-14400,"America\/Antigua":-14400,"America\/Araguaina":-10800,"America\/Argentina\/Buenos_Aires":-10800,"America\/Argentina\/Catamarca":-10800,"America\/Argentina\/Cordoba":-10800,"America\/Argentina\/Jujuy":-10800,"America\/Argentina\/La_Rioja":-10800,"America\/Argentina\/Mendoza":-10800,"America\/Argentina\/Rio_Gallegos":-10800,"America\/Argentina\/Salta":-10800,"America\/Argentina\/San_Juan":-10800,"America\/Argentina\/San_Luis":-10800,"America\/Argentina\/Tucuman":-10800,"America\/Argentina\/Ushuaia":-10800,"America\/Aruba":-14400,"America\/Asuncion":-14400,"America\/Atikokan":-18000,"America\/Bahia":-10800,"America\/Bahia_Banderas":-21600,"America\/Barbados":-14400,"America\/Belem":-10800,"America\/Belize":-21600,"America\/Blanc-Sablon":-14400,"America\/Boa_Vista":-14400,"America\/Bogota":-18000,"America\/Boise":-25200,"America\/Cambridge_Bay":-25200,"America\/Campo_Grande":-14400,"America\/Cancun":-18000,"America\/Caracas":-14400,"America\/Cayenne":-10800,"America\/Cayman":-18000,"America\/Chicago":-21600,"America\/Chihuahua":-25200,"America\/Costa_Rica":-21600,"America\/Creston":-25200,"America\/Cuiaba":-14400,"America\/Curacao":-14400,"America\/Danmarkshavn":0,"America\/Dawson":-28800,"America\/Dawson_Creek":-25200,"America\/Denver":-25200,"America\/Detroit":-18000,"America\/Dominica":-14400,"America\/Edmonton":-25200,"America\/Eirunepe":-18000,"America\/El_Salvador":-21600,"America\/Fort_Nelson":-25200,"America\/Fortaleza":-10800,"America\/Glace_Bay":-14400,"America\/Godthab":-10800,"America\/Goose_Bay":-14400,"America\/Grand_Turk":-18000,"America\/Grenada":-14400,"America\/Guadeloupe":-14400,"America\/Guatemala":-21600,"America\/Guayaquil":-18000,"America\/Guyana":-14400,"America\/Halifax":-14400,"America\/Havana":-18000,"America\/Hermosillo":-25200,"America\/Indiana\/Indianapolis":-18000,"America\/Indiana\/Knox":-21600,"America\/Indiana\/Marengo":-18000,"America\/Indiana\/Petersburg":-18000,"America\/Indiana\/Tell_City":-21600,"America\/Indiana\/Vevay":-18000,"America\/Indiana\/Vincennes":-18000,"America\/Indiana\/Winamac":-18000,"America\/Inuvik":-25200,"America\/Iqaluit":-18000,"America\/Jamaica":-18000,"America\/Juneau":-32400,"America\/Kentucky\/Louisville":-18000,"America\/Kentucky\/Monticello":-18000,"America\/Kralendijk":-14400,"America\/La_Paz":-14400,"America\/Lima":-18000,"America\/Los_Angeles":-28800,"America\/Lower_Princes":-14400,"America\/Maceio":-10800,"America\/Managua":-21600,"America\/Manaus":-14400,"America\/Marigot":-14400,"America\/Martinique":-14400,"America\/Matamoros":-21600,"America\/Mazatlan":-25200,"America\/Menominee":-21600,"America\/Merida":-21600,"America\/Metlakatla":-28800,"America\/Mexico_City":-21600,"America\/Miquelon":-10800,"America\/Moncton":-14400,"America\/Monterrey":-21600,"America\/Montevideo":-10800,"America\/Montserrat":-14400,"America\/Nassau":-18000,"America\/New_York":-18000,"America\/Nipigon":-18000,"America\/Nome":-32400,"America\/Noronha":-7200,"America\/North_Dakota\/Beulah":-21600,"America\/North_Dakota\/Center":-21600,"America\/North_Dakota\/New_Salem":-21600,"America\/Ojinaga":-25200,"America\/Panama":-18000,"America\/Pangnirtung":-18000,"America\/Paramaribo":-10800,"America\/Phoenix":-25200,"America\/Port-au-Prince":-18000,"America\/Port_of_Spain":-14400,"America\/Porto_Velho":-14400,"America\/Puerto_Rico":-14400,"America\/Punta_Arenas":-10800,"America\/Rainy_River":-21600,"America\/Rankin_Inlet":-21600,"America\/Recife":-10800,"America\/Regina":-21600,"America\/Resolute":-21600,"America\/Rio_Branco":-18000,"America\/Santarem":-10800,"America\/Santiago":-14400,"America\/Santo_Domingo":-14400,"America\/Sao_Paulo":-10800,"America\/Scoresbysund":-3600,"America\/Sitka":-32400,"America\/St_Barthelemy":-14400,"America\/St_Johns":-12600,"America\/St_Kitts":-14400,"America\/St_Lucia":-14400,"America\/St_Thomas":-14400,"America\/St_Vincent":-14400,"America\/Swift_Current":-21600,"America\/Tegucigalpa":-21600,"America\/Thule":-14400,"America\/Thunder_Bay":-18000,"America\/Tijuana":-28800,"America\/Toronto":-18000,"America\/Tortola":-14400,"America\/Vancouver":-28800,"America\/Whitehorse":-28800,"America\/Winnipeg":-21600,"America\/Yakutat":-32400,"America\/Yellowknife":-25200,"Antarctica\/Casey":28800,"Antarctica\/Davis":25200,"Antarctica\/DumontDUrville":36000,"Antarctica\/Macquarie":39600,"Antarctica\/Mawson":18000,"Antarctica\/McMurdo":43200,"Antarctica\/Palmer":-10800,"Antarctica\/Rothera":-10800,"Antarctica\/Syowa":10800,"Antarctica\/Troll":0,"Antarctica\/Vostok":21600,"Arctic\/Longyearbyen":3600,"Asia\/Aden":10800,"Asia\/Almaty":21600,"Asia\/Amman":7200,"Asia\/Anadyr":43200,"Asia\/Aqtau":18000,"Asia\/Aqtobe":18000,"Asia\/Ashgabat":18000,"Asia\/Atyrau":18000,"Asia\/Baghdad":10800,"Asia\/Bahrain":10800,"Asia\/Baku":14400,"Asia\/Bangkok":25200,"Asia\/Barnaul":25200,"Asia\/Beirut":7200,"Asia\/Bishkek":21600,"Asia\/Brunei":28800,"Asia\/Chita":32400,"Asia\/Choibalsan":28800,"Asia\/Colombo":19800,"Asia\/Damascus":7200,"Asia\/Dhaka":21600,"Asia\/Dili":32400,"Asia\/Dubai":14400,"Asia\/Dushanbe":18000,"Asia\/Famagusta":7200,"Asia\/Gaza":7200,"Asia\/Hebron":7200,"Asia\/Ho_Chi_Minh":25200,"Asia\/Hong_Kong":28800,"Asia\/Hovd":25200,"Asia\/Irkutsk":28800,"Asia\/Jakarta":25200,"Asia\/Jayapura":32400,"Asia\/Jerusalem":7200,"Asia\/Kabul":16200,"Asia\/Kamchatka":43200,"Asia\/Karachi":18000,"Asia\/Kathmandu":20700,"Asia\/Khandyga":32400,"Asia\/Kolkata":19800,"Asia\/Krasnoyarsk":25200,"Asia\/Kuala_Lumpur":28800,"Asia\/Kuching":28800,"Asia\/Kuwait":10800,"Asia\/Macau":28800,"Asia\/Magadan":39600,"Asia\/Makassar":28800,"Asia\/Manila":28800,"Asia\/Muscat":14400,"Asia\/Nicosia":7200,"Asia\/Novokuznetsk":25200,"Asia\/Novosibirsk":25200,"Asia\/Omsk":21600,"Asia\/Oral":18000,"Asia\/Phnom_Penh":25200,"Asia\/Pontianak":25200,"Asia\/Pyongyang":32400,"Asia\/Qatar":10800,"Asia\/Qostanay":21600,"Asia\/Qyzylorda":18000,"Asia\/Riyadh":10800,"Asia\/Sakhalin":39600,"Asia\/Samarkand":18000,"Asia\/Seoul":32400,"Asia\/Shanghai":28800,"Asia\/Singapore":28800,"Asia\/Srednekolymsk":39600,"Asia\/Taipei":28800,"Asia\/Tashkent":18000,"Asia\/Tbilisi":14400,"Asia\/Tehran":12600,"Asia\/Thimphu":21600,"Asia\/Tokyo":32400,"Asia\/Tomsk":25200,"Asia\/Ulaanbaatar":28800,"Asia\/Urumqi":21600,"Asia\/Ust-Nera":36000,"Asia\/Vientiane":25200,"Asia\/Vladivostok":36000,"Asia\/Yakutsk":32400,"Asia\/Yangon":23400,"Asia\/Yekaterinburg":18000,"Asia\/Yerevan":14400,"Atlantic\/Azores":-3600,"Atlantic\/Bermuda":-14400,"Atlantic\/Canary":0,"Atlantic\/Cape_Verde":-3600,"Atlantic\/Faroe":0,"Atlantic\/Madeira":0,"Atlantic\/Reykjavik":0,"Atlantic\/South_Georgia":-7200,"Atlantic\/St_Helena":0,"Atlantic\/Stanley":-10800,"Australia\/Adelaide":34200,"Australia\/Brisbane":36000,"Australia\/Broken_Hill":34200,"Australia\/Currie":36000,"Australia\/Darwin":34200,"Australia\/Eucla":31500,"Australia\/Hobart":36000,"Australia\/Lindeman":36000,"Australia\/Lord_Howe":37800,"Australia\/Melbourne":36000,"Australia\/Perth":28800,"Australia\/Sydney":36000,"Europe\/Amsterdam":3600,"Europe\/Andorra":3600,"Europe\/Astrakhan":14400,"Europe\/Athens":7200,"Europe\/Belgrade":3600,"Europe\/Berlin":3600,"Europe\/Bratislava":3600,"Europe\/Brussels":3600,"Europe\/Bucharest":7200,"Europe\/Budapest":3600,"Europe\/Busingen":3600,"Europe\/Chisinau":7200,"Europe\/Copenhagen":3600,"Europe\/Dublin":0,"Europe\/Gibraltar":3600,"Europe\/Guernsey":0,"Europe\/Helsinki":7200,"Europe\/Isle_of_Man":0,"Europe\/Istanbul":10800,"Europe\/Jersey":0,"Europe\/Kaliningrad":7200,"Europe\/Kiev":7200,"Europe\/Kirov":10800,"Europe\/Lisbon":0,"Europe\/Ljubljana":3600,"Europe\/London":0,"Europe\/Luxembourg":3600,"Europe\/Madrid":3600,"Europe\/Malta":3600,"Europe\/Mariehamn":7200,"Europe\/Minsk":10800,"Europe\/Monaco":3600,"Europe\/Moscow":10800,"Europe\/Oslo":3600,"Europe\/Paris":3600,"Europe\/Podgorica":3600,"Europe\/Prague":3600,"Europe\/Riga":7200,"Europe\/Rome":3600,"Europe\/Samara":14400,"Europe\/San_Marino":3600,"Europe\/Sarajevo":3600,"Europe\/Saratov":14400,"Europe\/Simferopol":10800,"Europe\/Skopje":3600,"Europe\/Sofia":7200,"Europe\/Stockholm":3600,"Europe\/Tallinn":7200,"Europe\/Tirane":3600,"Europe\/Ulyanovsk":14400,"Europe\/Uzhgorod":7200,"Europe\/Vaduz":3600,"Europe\/Vatican":3600,"Europe\/Vienna":3600,"Europe\/Vilnius":7200,"Europe\/Volgograd":14400,"Europe\/Warsaw":3600,"Europe\/Zagreb":3600,"Europe\/Zaporozhye":7200,"Europe\/Zurich":3600,"Indian\/Antananarivo":10800,"Indian\/Chagos":21600,"Indian\/Christmas":25200,"Indian\/Cocos":23400,"Indian\/Comoro":10800,"Indian\/Kerguelen":18000,"Indian\/Mahe":14400,"Indian\/Maldives":18000,"Indian\/Mauritius":14400,"Indian\/Mayotte":10800,"Indian\/Reunion":14400,"Pacific\/Apia":46800,"Pacific\/Auckland":43200,"Pacific\/Bougainville":39600,"Pacific\/Chatham":45900,"Pacific\/Chuuk":36000,"Pacific\/Easter":-21600,"Pacific\/Efate":39600,"Pacific\/Enderbury":46800,"Pacific\/Fakaofo":46800,"Pacific\/Fiji":43200,"Pacific\/Funafuti":43200,"Pacific\/Galapagos":-21600,"Pacific\/Gambier":-32400,"Pacific\/Guadalcanal":39600,"Pacific\/Guam":36000,"Pacific\/Honolulu":-36000,"Pacific\/Kiritimati":50400,"Pacific\/Kosrae":39600,"Pacific\/Kwajalein":43200,"Pacific\/Majuro":43200,"Pacific\/Marquesas":-34200,"Pacific\/Midway":-39600,"Pacific\/Nauru":43200,"Pacific\/Niue":-39600,"Pacific\/Norfolk":39600,"Pacific\/Noumea":39600,"Pacific\/Pago_Pago":-39600,"Pacific\/Palau":32400,"Pacific\/Pitcairn":-28800,"Pacific\/Pohnpei":39600,"Pacific\/Port_Moresby":36000,"Pacific\/Rarotonga":-36000,"Pacific\/Saipan":36000,"Pacific\/Tahiti":-36000,"Pacific\/Tarawa":43200,"Pacific\/Tongatapu":46800,"Pacific\/Wake":43200,"Pacific\/Wallis":43200,"UTC":0});});},autodetectLocation:function(cb){Messages.showLoading();Shelly.apiRequest("timezone/autodetect","",{},function(res){Messages.hideLoading();cb(res.data);},function(err){Messages.hideLoading();Messages.showMessage("Error","Could not detect approximate location! There is no Internet connection!",'error');cb(false);});},fillAutodetectLocation:function(){SettingsTimezone.autodetectLocation(function(data){if(!data)
return;$("#geolocation_lat").val(data.latitude);$("#geolocation_lng").val(data.longitude);});},fillAutodetectTimezone:function(){SettingsTimezone.autodetectLocation(function(data){if(!data)
return;var timezone=data.time_zone;if(timezone=="")
timezone="UTC";if(!$('#timezone_select option[name="'+timezone+'"]').length){$("#timezone_select").append('<option name="'+timezone+'">'+timezone+'</option>');}
$('#timezone_select option[name="'+timezone+'"]').attr('selected','selected');});},changeAutoTimezone:function(value){var url="settings?tzautodetect="+value;Messages.showLoading();if(value){Shelly.sendRequest(url,"",{},function(res){Messages.hideLoading();$("#manual_timezone_geo").addClass("disabled");Messages.showMessage("Success",'Settings changed','conf');},function(err){Messages.hideLoading();Messages.showMessage("Error",'Operation failed!','error');});}else{Shelly.sendRequest(url,"",{},function(res){Messages.hideLoading();$("#manual_timezone_geo").removeClass("disabled");Messages.showMessage("Success",'Settings changed','conf');},function(err){Messages.hideLoading();Messages.showMessage("Error",'Operation failed!','error');});}},changeTimezoneGeo:function(){var tzautodetect=$("#auto_timezone").prop("checked");var timezone=$("#timezone_select option:checked").attr('name');var offset=0+SettingsTimezone.tz_offsets[timezone];var lat=$("#geolocation_lat").val();var lng=$("#geolocation_lng").val();var cmd="settings?tzautodetect="+tzautodetect;var dst=0;var dst_auto=0;if($('#timezone_geo #dst_auto').is(":checked")){dst_auto=1;offset+=3600*(0+Shelly.currentSettings.tz_dst);}else{dst=$('#timezone_geo #dst_on').is(":checked")?1:0;offset+=3600*dst;}
if(lat==""&&lng==""){lat=500;lng=500;}
if(lat==""||lng==""){Messages.showMessage("Error","Please, set at the both Lattitude and Longtitude fields, or clear them to disable!",'error');return;}
if(!tzautodetect){cmd+="&timezone="+timezone+"&tz_utc_offset="+offset+"&lat="+lat+"&lng="+lng+"&tz_dst_auto="+dst_auto;if(dst_auto==0){cmd+="&tz_dst="+dst;}}
Settings.change(cmd);}};Zepto(function($){SettingsTimezone.fillTzList();$("#auto_timezone").on('change',function(){var value=$(this).prop("checked");if(value)SettingsTimezone.changeAutoTimezone(value);else SettingsTimezone.changeTimezoneGeo();});$("#timezone_geo_button").on('click',function(){SettingsTimezone.changeTimezoneGeo();});$("#geo_autodetect_button").on('click',function(){SettingsTimezone.fillAutodetectLocation();});$("#timezone_autodetect_button").on('click',function(){SettingsTimezone.fillAutodetectTimezone();});$(document).on('Shelly:settings',function(){SettingsTimezone.fillTimezone();});});</script> <div id=device_name class=settings_item> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=device_name_actions class="colapse closed">Device name</h2> <div class=clear></div> </div> <div id=device_name_actions class=closed> <form id=device_name_form> <div class=input_holder> Name: <div class=hollow_bg> <input type=text id=dev_name name=dev_name class=text_input> </div> <button id=save_device_name type=submit> <span class=icon></span> <span>SAVE</span> </button> </div> </form> </div> </div> <style type=text/css></style> <script type=text/javascript>var SettingsDeviceName={fillDeviceNameSettings:function(){if(Settings.checkIfActive()){return;}
if(typeof Shelly.currentSettings.name==='undefined'){return;}
$('#dev_name').val(Shelly.currentSettings.name);},saveDeviceNameSettings:function(){var devname=$('#dev_name').val();if(devname=='')devname='null';var params={name:devname,};Settings.changePost("settings",params,"Device name changed!");},}
Zepto(function($){$(document).on('Shelly:settings',function(){SettingsDeviceName.fillDeviceNameSettings();});$('#device_name_form').on('submit',function(e){e.preventDefault();SettingsDeviceName.saveDeviceNameSettings();});});</script> <div id=channel_name class=settings_item> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=channel_name_actions class="colapse closed">Channel name</h2> <div class=clear></div> </div> <div id=channel_name_actions class=closed> <form id=channel_name_form> <div class=input_holder> Name: <div class=hollow_bg> <input type=text id=chan_name name=chan_name class=text_input> </div> <button id=save_channel_name type=submit> <span class=icon></span> <span>SAVE</span> </button> </div> </form> </div> </div> <style type=text/css></style> <script type=text/javascript>var SettingsChannelName={fillChannelNameSettings:function(){if(Settings.checkIfActive()){return;}
var channel=Settings.validateChannel();var dev_type=Settings.validateDevice(true);var chan_name;if(dev_type==="relay"){chan_name=Shelly.currentSettings.relays[channel].name;}else if(dev_type==="light"){chan_name=Shelly.currentSettings.lights[channel].name;if(chan_name&&chan_name.length>0){$('#channel_name #channel_name_actions #chan_name').val(chan_name);if($(".channel_btn")){$(".channel_btn[data-channel='"+channel+"'] .channel .channel_name").html(chan_name);}
$(".chan[data-channel='"+channel+"'] .channel .chname").html(chan_name);}
return;}else if(dev_type==="inputs_reader"){var channel=typeof Input!=='undefined'?Input.selectedInput:0;chan_name=Shelly.currentSettings.inputs[channel].name;$('#input_page #chan_name').val(chan_name);return;}else{return;}
$('#channel_page #chan_name').val(chan_name);},saveChannelNameSettings:function(){var channel=Settings.validateChannel();var dev_type=Settings.validateDevice(true);if(dev_type==="color"){var chan_name=$('#bulb_page #chan_name').val();}else if(dev_type==="light"){var chan_name=$('#chan_name').val();}else if(dev_type==="inputs_reader"){var chan_name=$('#input_page #chan_name').val();dev_type="input";var channel=typeof Input!=='undefined'?Input.selectedInput:0;}else{var chan_name=$('#channel_page #chan_name').val();}
if(chan_name=='')chan_name='null';Settings.change("settings/"+dev_type+"/"+channel+"?name="+chan_name);},}
Zepto(function($){$(document).on('Shelly:settings',function(){SettingsChannelName.fillChannelNameSettings();});$('#channel_name_form').on('submit',function(e){e.preventDefault();SettingsChannelName.saveChannelNameSettings();});});</script> <div id=led_wrapper> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=led_settings class="colapse closed">LED LIGHT CONTROL</h2> <div class=clear></div> </div> <div id=led_settings class=closed> <div class=input_holder> <input type=checkbox name=led_status_disable id=led_status_disable class=checkbox> <label for=led_status_disable> <span class=fake_checkbox></span> <span>Disable Wi-Fi status light.</span> <span class=clear></span> </label> </div> <div class=input_holder> <input type=checkbox name=led_power_disable id=led_power_disable class=checkbox> <label for=led_power_disable> <span class=fake_checkbox></span> <span>Disable Power On state light.</span> <span class=clear></span> </label> </div> </div> </div> <style type=text/css></style> <script type=text/javascript>var SettingsLed={fillLedDisable:function(){if(Settings.checkIfActive()){return;}
$("#led_status_disable").prop("checked",!!Shelly.currentSettings.led_status_disable);$("#led_power_disable").prop("checked",!!Shelly.currentSettings.led_power_disable);},changeLedStatusDisable:function(value){Settings.change("settings?led_status_disable="+!!value);},changeLedPowerDisable:function(value){Settings.change("settings?led_power_disable="+!!value);}};Zepto(function($){$("#led_status_disable").on('change',function(){SettingsLed.changeLedStatusDisable($(this).prop("checked"));});$("#led_power_disable").on('change',function(){SettingsLed.changeLedPowerDisable($(this).prop("checked"));});$(document).on('Shelly:settings',function(){SettingsLed.fillLedDisable();});});</script> <div id=fw_settings class=settings_item> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=fw_set class="colapse closed ">Firmware Update</h2> <div class=clear></div> </div> <div id=fw_set class=closed> <div class=input_holder> <button id=check_update_manual type=button> <span class=icon></span> <span>CHECK FOR NEW FIRMWARE</span> </button> <span> Current version: <span class="fw_version blue">.</span> </span><br> <span class="text has_update"> New version: <span class="fw_version_new blue"></span> </span> <span class="text no_update"> You have latest version on your device! </span> <div class=clear></div> <button id=check_update type=button> <span class=icon></span> <span>UPDATE FIRMWARE VERSION</span> </button> <div class=clear></div> </div> <div id=betafw class=input_holder> <span class="text has_update"> New BETA version: <span class="beta_version blue"></span> is available. </span> <span class="text no_update"> No new BETA version available. </span> <div class=clear></div> <button id=beta_check_update type=button> <span class=icon></span> <span>UPDATE WITH BETA VERSION</span> </button> <div class=clear></div> </div> </div> </div> <style type=text/css>#settings_info #fw_settings .icon,.update_icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAQMAAADYVuV7AAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAQpJREFUOMvFlMFxwyAURGHIDLeoBNIJLaUDXJpLcQk6+uDR5hs8/KeMdPHF3J6M2NWy3yG8vS6EK+FGWAl3woOwEbQDColCopAgVOVCSXKhIrlQk1xIAHvFt2XhAHvfj666uWgT7NieaTTanvkJ0R5D5hIgg0Dy1qP66bA8eoi/w8C9xzs8lPUZfBxQ1+eVpBd0K3kcWLuVNKAN2A6gm4wHMOxH8W4+CbRz7vr8S3eB7KIqFqcl/orX4nSwPSN+W9/2eCRu66v/2OblVxaz9SuftU5oQlgmJFmz0ARv36J82j5BxuB6VOWgf41fMSQYpoIhMVHMVSYkQtTpzDZCJRTCQsiERIjv/0n9AQWLuu44/ypvAAAAAElFTkSuQmCC);background-color:#FF6600;background-size:74%}</style> <script type=text/javascript>var SettingsFirmwareUpdate={checkFirmUpdate:function(){var current_fw=Shelly.currentStatus.update.old_version;var new_version=Shelly.currentStatus.update.new_version;var beta_version=Shelly.currentStatus.update.beta_version;$('span.fw_version').text(current_fw);$('span.fw_version_new').text(new_version);var beta_updated=beta_version===current_fw;if(beta_version!==undefined&&!beta_updated)$('span.beta_version').text(beta_version);if(Shelly.currentStatus.update.has_update){$('#device_settings .device_bulk_status').show();$('#check_update').show();$('span.has_update').show();$('span.no_update').hide();}else{$('#device_settings .device_bulk_status').hide();$('span.has_update').hide();$('span.no_update').show();$('#check_update').hide();}
if(beta_version!==undefined){$('#betafw').show();if(beta_updated){$('#betafw span.no_update').show();$('#betafw span.has_update').hide();$("#betafw #beta_check_update").hide()}else{$('#betafw span.no_update').hide();$('#betafw span.has_update').show();$("#betafw #beta_check_update").show()}}
else $('#betafw').hide();if($('#fw_set').hasClass('updating')){if(Shelly.currentStatus.update.status!=='updating'){Messages.hideLoading();Messages.hideMsg();if(new_version===current_fw){Messages.showMessage("Error","Firmware update could not be completed, please try again.",'error');}
$('#fw_set').removeClass('updating');window.location.reload();}else{Messages.upgradeFirmMsg();}}},firmwareUpgrade:function(el,beta){Messages.showMessage('Confirm?','Are you sure you want to update the device\'s firmware? This can take up to 5 minutes?','yes_no',function(res){if(res){Messages.showLoading();el.addClass('updating');var req='ota?update=1';if(beta){var req='ota?beta=1';}
Shelly.sendRequest(req,"",{},function(res){Shelly.updateConf('status');window.setTimeout(function(){Messages.hideLoading();Messages.hideMsg();el.removeClass('updating');Messages.showMessage("Error","The firmware update failed",'error');},300000);},function(err){Messages.hideLoading();Messages.showMessage("Error","Could not update the firmware on your device.",'error');});}});}};Zepto(function($){$('#beta_fw').hide();$('#check_update').on('click',function(){SettingsFirmwareUpdate.firmwareUpgrade($('#fw_set'),false);});$('#beta_check_update').on('click',function(){SettingsFirmwareUpdate.firmwareUpgrade($('#fw_set'),true);});$('#check_update_manual').on('click',function(){Shelly.sendRequest("ota/check","",{},{},function(err){Messages.hideLoading();Messages.showMessage("Error","Could not check for new firmware your device.",'error');});});$(document).on('Shelly:status',function(){SettingsFirmwareUpdate.checkFirmUpdate();});});</script> <div id=factory_reset> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=fac_res class="colapse closed">Factory reset</h2> <div class=clear></div> </div> <div id=fac_res class=closed> <div class=input_holder> <span>Resetting your <span class=blue>Shelly</span> will bring it to its factory settings, it will disconnect from your WiFi network and all associated users, including you, will be removed from this device.</span> <br><br> <span class=blue>WARNING: Factory resetting of this device will remove it from your account and you will have to add it as it is new one (while you are in the range of your device) before you can control it again!</span> <button id=factory_reset_btn type=button> <span class=icon></span> <span>FACTORY RESET</span> </button> </div> </div> </div> <style type=text/css>#settings_info #factory_reset_btn .icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAQMAAADYVuV7AAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAASNJREFUOMvNkzGOxCAMRYkoXNJux0VW4mZLjpajcATKFChe840T0I400laTAvIisB3/b+c+/fF8PJC43e8bM+8GQaAYRIHTIAtc05X7kgeM4CRnskUI8kJcLZgsFi41W3rk/jGO2LhLPNIciL+7e9NPAnoYQHo1Iytp0AQImi6ihCjQbqgAPRALgE672SxOOgD+L+QByJ13wPYGeACK70sb+z+gC1UNCKpdCh5q9Fxs4vY+of0sa64KucsZm5YDQ4RLC41dJuk3IEBALgCCPLnit9VRsaAhG+Shon1Dtf5Q+IEIu7b3e1gD8OUmfdwLSGWCPMMw3DaZQhI+dpFSHiNpOrMYdjNfRJPOF4ZdrLyYfLH/MhjryNA8TMuYLQO4juZnPr83VPCXmhc5IQAAAABJRU5ErkJggg==);background-size:30px}</style> <script type=text/javascript>var SettingsFactRes={doFactRes:function(){if(Settings.checkIfActive()){return;}else{var url="settings/?reset=1";var key=Shelly.currentSettings.wifi_ap.ssid;Messages.showMessage('Confirm?','Factory reset will wipe all current settings, the device will restart and create an access point with the default name. Are you sure?','yes_no',function(res){if(res){Messages.showLoading();Shelly.sendRequest(url,"",{},function(res){Messages.hideLoading();$('body').addClass('stop-scrolling');Messages.showMessage("Success",'Settings changed','conf');$('#overlay #message p').html('The device is returning to its factory settings. \n\
. To continue operating it connect to its Access Point with WiFi network name <span class="blue">'+key+'</span> and address <a href="http://192.168.33.1"> 192.168.33.1</a> in your browser.');$('#overlay').removeClass('hidden');Shelly.updateConf('settings');},function(err){Messages.hideLoading();Messages.showMessage("Error",'Could not reset the deivce.','error');});}});}}}
Zepto(function($){$('#factory_reset_btn').on('click',function(){SettingsFactRes.doFactRes();});});</script> <div id=device_reboot> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=dev_reb class="colapse closed">Device reboot</h2> <div class=clear></div> </div> <div id=dev_reb class=closed> <div class=input_holder> <span>Reboot your <span class=blue>Shelly</span> device.</span> <br><br> <button id=dev_reboot_btn type=button> <span class=icon></span> <span>DEVICE REBOOT</span> </button> </div> </div> </div> <style type=text/css>#settings_info #dev_reboot_btn .icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAQMAAADYVuV7AAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAASNJREFUOMvNkzGOxCAMRYkoXNJux0VW4mZLjpajcATKFChe840T0I400laTAvIisB3/b+c+/fF8PJC43e8bM+8GQaAYRIHTIAtc05X7kgeM4CRnskUI8kJcLZgsFi41W3rk/jGO2LhLPNIciL+7e9NPAnoYQHo1Iytp0AQImi6ihCjQbqgAPRALgE672SxOOgD+L+QByJ13wPYGeACK70sb+z+gC1UNCKpdCh5q9Fxs4vY+of0sa64KucsZm5YDQ4RLC41dJuk3IEBALgCCPLnit9VRsaAhG+Shon1Dtf5Q+IEIu7b3e1gD8OUmfdwLSGWCPMMw3DaZQhI+dpFSHiNpOrMYdjNfRJPOF4ZdrLyYfLH/MhjryNA8TMuYLQO4juZnPr83VPCXmhc5IQAAAABJRU5ErkJggg==);background-size:30px}</style> <script type=text/javascript>var SettingsReboot={doReboot:function(){var start=11;Messages.showMessage('Confirm?','Device will restart. Are you sure?','yes_no',function(res){if(res){Messages.showLoading();Messages.hideMsg();$('#foot_mes').addClass('hidden');Shelly.sendRequest('reboot',"",{},function(res){setInterval(function(){start--;if(start<0){start=0;}
Messages.showMessage("Restarting device","The page will refresh after "+start+" seconds");},1000);setTimeout(function(){window.location.reload();},10000)},function(err){Messages.hideLoading();Messages.showMessage("Error","Could not reboot the device.",'error');});}});}};Zepto(function($){$('#dev_reboot_btn').on('click',function(e){e.preventDefault();SettingsReboot.doReboot();});});</script> <div id=discoverable> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=disc class="colapse closed">Device discoverable</h2> <div class=clear></div> </div> <div id=disc class=closed> <div class=input_holder id=device_discoverable_holder> <input type=checkbox name=device_discoverable_enable id=device_discoverable_enable class=checkbox> <label for=device_discoverable_enable> <span class=fake_checkbox></span> <span>Make device discoverable</span> <span class=clear></span> </label> </div> </div> </div> <style type=text/css></style> <script type=text/javascript>var SettingsDiscoverable={fillEnabled:function(){if(Settings.checkIfActive()){return;}
if(typeof Shelly.currentSettings.discoverable!=='undefined'){var enabled=!!Shelly.currentSettings.discoverable;$('#device_discoverable_enable').prop('checked',enabled);}},changeEnabled:function(enabled){if(enabled){var endpoint="settings?discoverable=true";}else{var endpoint="settings?discoverable=false";}
Settings.change(endpoint);}};Zepto(function($){$('#device_discoverable_enable').on('change',function(){SettingsDiscoverable.changeEnabled($(this).prop("checked"));});$(document).on('Shelly:settings',function(){SettingsDiscoverable.fillEnabled();});});</script> <div id=eco_mode_settings class=settings_item> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=eco_mode_set class="colapse closed">Eco mode</h2> <div class=clear></div> </div> <div id=eco_mode_set class=closed> <div class=input_holder> <input type=checkbox name=enable_eco_mode id=enable_eco_mode class=checkbox> <label for=enable_eco_mode> <span class=fake_checkbox></span> <span>ECO MODE - Device will consume less energy and run at lower temperature. Device will reboot if you Disable/Enable it.</span> <div class=clear></div> </label> </div> </div> </div> <style type=text/css></style> <script type=text/javascript>Zepto(function($){$("#enable_eco_mode").on('change',function(){Settings.change("settings/?eco_mode_enabled="+($(this).is(':checked')?1:0));});$(document).on('Shelly:settings',function(){$("#enable_eco_mode").prop('checked',Shelly.currentSettings.eco_mode_enabled);});});</script> <div id=above_device_info></div> <div id=device_info class=settings_item> <div class=set_box> <div class=settings_icon></div> <h2 data-colapse=device_information_set class="colapse closed ">Device Info</h2> <div class=clear></div> </div> <div id=device_information_set class=closed> <div class=input_holder> <label> <span> Device ID: <span class="device_id blue"></span> </span> </label> <div class=clear></div> </div> <div class=input_holder id=wifi_ssid> <label> <span> WiFi connected to SSID: <span class="wifi_ssid blue"></span> </span> </label> </div> <div class=input_holder id=wifi_rssi> <label> <span> WiFi RSSI: <span class="wifi_rssi blue"></span> </span> </label> </div> <div class=input_holder id=device_voltage> <label> <span> Supply voltage: <span class=device_voltage></span> </span> </label> </div> <div class=input_holder id=enable_debug_log> <button> <span class=icon></span> <span>Enable Debug Log</span> </button> <span>Do not activate logging without reason. It will slow down the device and cause aging of the flash memory.</span> </div> <div class=input_holder id=disable_debug_log> <button> <span class=icon></span> <span>Disable Debug Log</span> </button> </div> <div class=input_holder id=download_debug_log> <a href=/debug/log1 target=_blank> <span class=download_log>Download previous log</span> </a> </div> <div class=input_holder id=download_debug_log> <a href=/debug/log target=_blank> <span class=download_log>Download current log</span> </a> </div> </div> </div> <style type=text/css>#settings #disable_debug_log .icon{background-color:#ff3b30}#settings #download_debug_log .download_log{color:#fff}</style> <script type=text/javascript>var SettingsDeviceInfo={showInfo:function(){if(typeof Shelly.currentSettings=='undefined')return;if(typeof Shelly.currentSettings.device=='undefined')return;var rssi=0;var ssid='';var voltage=-1;if((typeof Shelly.currentStatus!='undefined')&&(typeof Shelly.currentStatus.wifi_sta!='undefined')){rssi=Shelly.currentStatus.wifi_sta.rssi;ssid=Shelly.currentStatus.wifi_sta.ssid;}
if((typeof Shelly.currentStatus!='undefined')&&(typeof Shelly.currentStatus.voltage!='undefined')){voltage=Shelly.currentStatus.voltage;}
var hostname=Shelly.currentSettings.device.hostname;var id_hex=hostname.split('-');id_hex=id_hex[id_hex.length-1];var id_dec=parseInt(id_hex,16);$('#device_information_set .device_id').html(id_hex+' ('+id_dec+')');if(rssi!=0){$('#device_information_set .wifi_ssid').html(ssid);$('#device_information_set #wifi_ssid').show();$('#device_information_set .wifi_rssi').html(rssi+' dBm');$('#device_information_set #wifi_rssi').show();}else{$('#device_information_set #wifi_rssi').hide();$('#device_information_set #wifi_ssid').hide();}
if(voltage>=0){$('#device_information_set .device_voltage').html(voltage+' V');$('#device_information_set #device_voltage').show();}else{$('#device_information_set #device_voltage').hide();}},debugLogStatus:function(){if(Shelly.currentSettings['debug_enable']){$('#enable_debug_log').hide();$('#disable_debug_log').show();}else{$('#enable_debug_log').show();$('#disable_debug_log').hide();}},enableDebugLog:function(){Settings.change("settings?debug_enable=true");},disableDebugLog:function(){Settings.change("settings?debug_enable=false");}};Zepto(function($){$(document).on('Shelly:settings',function(){SettingsDeviceInfo.showInfo();SettingsDeviceInfo.debugLogStatus();});$(document).on('Shelly:status',function(){SettingsDeviceInfo.showInfo();});$('#enable_debug_log button').on('click',function(){SettingsDeviceInfo.enableDebugLog();});$('#disable_debug_log').on('click',function(e){SettingsDeviceInfo.disableDebugLog();});});</script> </div> <style type=text/css>.device_bulk_status{display:none;width:13%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAACVBMVEUAAGf/VAD/VQCdccSQAAAAAXRSTlMAQObYZgAAAEdJREFUCNdVirENwCAMBE8UrlNlBuJJMgpiCo/ACBQRMp4St/nipNM93A4l4kVWd9RKAnEqOBe/pVYeaOjgy7NMdHeD2JnFOD3jDjSD4HKnAAAAAElFTkSuQmCC);background-size:cover;position:absolute;height:13%;top:6%;right:6%}#settings_info div.settings_icon,#settings_info .icon_holder .icon_dev_set{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAQMAAACQp+OdAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAN1JREFUKM+tkrsRwyAQRI8hIHQJlKLGPEKlUYpKUEjA6Ly7YEnj2ATM434ce5iZ5cO0ovsmyO7DVNy7wLFmyAhKXpPvjD3hZfTScGhMgjkxjYER7sBUbuFU0c2iqi7VUtN9AF2Yd3uxKHcYo+z0gg9bNkEjwBUAai50K+MF3dYHIPGG1d7GLED/N1yV1x84v6AOqU5nz4DQv83rOZS2Wb6gEvD2oUaCLMeUZQolHYaGQ0yoKp3Np/ISu9Q5i+WY08k4FdZ4+RY1wcSZVo1oTvmeO36CrmFQHdKW0x7rA4T7k/2AYAtPAAAAAElFTkSuQmCC)}</style> <script type=text/javascript></script> </div> </div> </div> <style type=text/css>#channel_list .channel,#channel_list .consum_val_ch{float:left;line-height:63px}div.channel span:not(.set_icon){padding-left:6%;padding-right:2%}.shelly_channel div,#dev_info{background-color:#43484B}#channel_page{display:none}#overpower{display:none;font-size:20px}div.channel,div.consum_val_ch{width:45%;text-align:left}.shelly_channel>div,#dev_info{width:96%}.device_info span{font-size:18px}#dev_info .channel{text-align:left;position:absolute;top:40px;font-size:18px;left:5%;width:140px}.channel{font-weight:bold}#dev_info .channel .set_icon{height:20px}#dev_info .cons_icon{height:25px}.set_icon{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAQMAAADaua+7AAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAEpJREFUCNdjYIABPgYGZjkGBvZ/QPr/AiD+wMD+/weDPJC2b37AYN/4gEG+8QMDf+MPBv5mID4MkgOK/T/AwA/EDCD8G4g/MCADACS0HJdnqiB0AAAAAElFTkSuQmCC) no-repeat;width:25px;height:18px;display:inline-block;background-position:50%;vertical-align:text-bottom}.shelly_channel div,#dev_info{margin:auto;margin-bottom:12px}.shelly_channel div{height:63px;cursor:pointer}.channel_btn .consumption,.channel_btn .unit_cons{font-size:22px;font-weight:bold}.consumption_set{display:none;cursor:pointer}.cons_icon{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAuAQMAAAABcetxAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAG5JREFUCNc9zrENxCAUBNGxCAhdAqW4NFPalUIJFxKc+N4FHwFPyNaOgBQNcnzh3BR/m1zxMRXuBRCTAcfihyL9ZZZyaHaGrpPy0lTSD1FVWrg5jCqUvlGFqxk9gLtudBjGg6NvPEgeJA9y/ZN0Hmz5T0enCBK+AAAAAElFTkSuQmCC) no-repeat;width:9%;height:22px;display:inline-block;background-size:contain;vertical-align:text-bottom}.shelly_channel .power_on_off_icon{width:10%;float:right}#dev_info .power_on_off_icon,.shelly_channel .power_on_off_icon span{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAzUExURQAAAAAAAP///////wAAAAAAAAAAAAAAAAAAAAAAAP///////////////////////////zuW2yAAAAAQdFJOUwADQLwvIBA2JClo25wthw0VEwp8AAAB70lEQVRYw+1X25aDIAwUQSgCyv9/7SYge7hE0dKzZx+ah2qRTCZDwDhNX/vPJhctVDChF/nYW6Oj0MEEAuknGBKj6ldmGtnIJ+7JD+24vwnB9OEemUcR0ojS7EZ4HULDdZFhOgM54V8Y7pKQMbxoNANVRSRxhcDA/7VAHEpygNDw8BIh+p9O6Tz+nSDOhGJMXCKw6H8lNNMRgZ4COaL/tcqIABPpBED/c/6JA2QBKlNJqPCkWygsxFEnBO7UqlQ0BSRACMC9JYQkKCABAnf23s+3piKsbglQABNui4YsocBq3QHg7NqqQNHKR3YOvgcA/PC9jFbnsKiaFfpnAJ5X+aqlkUDkQ6sPrhEg/MmyWNoVw/rKSe3RP4mIF78XIghRa1hUIcbcslXYCgqsUWyqR/gRMQHspQp9gDTfwY1LiA8BYglvZgtX+y5AslsAmYjGe1NMKAYIEetltCn3w1xBiVjGupDmqvZ4samIQmpK2RyFEA3LwFyWcrOZQu3xmIXjvtzV1IHQbOdQ/55v6xbc861AbWfiQIkIydbegUKcU878uhvXP/2oQ3W2iGHs3K6Y+vyxPvxiGX+1Db9cx1/v3QZj6jQY4y1OmvJ+kxXatJE2L2s0Rd1oinuN5nirO95sRyWG2v0PfHB84JPna39qPwYvJAReMtgwAAAAAElFTkSuQmCC) no-repeat;background-size:100%}#dev_info .power_on_off_icon.on,.shelly_channel .power_on_off_icon span.on{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABCUExURQAAAP///z3N/z3N/z3N/z3N/2fX/z3N/z3N/z3N/////////////////////2XX/z3N/////z3N/z3N/z3N/////xBVRCIAAAAUdFJOUwBAMq4nSAfzzpW8aNucLhVmh11ef5zGXAAAAd5JREFUWMPtV9uSgyAMrReuIt7K///qVpCVQBQ6dHb2oXmoU0wOyUkC8fH4yn+WfhacPV/CuJj7d61bYW1PYaJ9w5zwJyKclO6OmluIEi+ogK7DUATNUsfPqLfWqtN2OxnhGTpbr9hFAZPOv7kNg3hzZJ/eQ5Ds/uxChbCMD/0R5nSlMB0EXfBA3evuhmjqwuC4istfd8+yQxDXBPBMog83MRrsGzblCmWyTPKrDBaU+5UixwmQZkRp4DgDSX4aY4xGs91iKUgd2AEa1IU4ESwNbBj1AaDHIWGBIW6BNSpftgfA60fSeDcY7px4tdsHAEbG8c4pBWvov7GmDsD+CaLYUhJ45BR19p7E/WEoDJinHFLowBJkYQEu0JRFm9qIgSkAmCALsbpbCSG9vvaFZHMCHc4BuBJe1GKfYwHAEwPwAgHSEGISlTEKKIAFhMQ4jWPURBq4hKQxLqQmqj0JmmpNCykpZXUUgpO9DNRtKSfNZGtPuii0NLCrkWZK29nWv5HLsFjzsBWwdkYOFIfgZcgdKMiRptWvudLZIw09VJtxx1BjU3Co1h/r1RdL/dVWfbnWX+/VA0b9iFM/ZJ0IN2MeKR80Vz9oruWDZv2oWz9sf2Dc/8AHxwc+eb7yp/IDlLBGEWfl2hIAAAAASUVORK5CYII=) no-repeat;background-size:100%}#dev_info .power_on_off_icon.off,.shelly_channel .power_on_off_icon span.off{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAzUExURQAAAAAAAP///////wAAAAAAAAAAAAAAAAAAAAAAAP///////////////////////////zuW2yAAAAAQdFJOUwADQLwvIBA2JClo25wthw0VEwp8AAAB70lEQVRYw+1X25aDIAwUQSgCyv9/7SYge7hE0dKzZx+ah2qRTCZDwDhNX/vPJhctVDChF/nYW6Oj0MEEAuknGBKj6ldmGtnIJ+7JD+24vwnB9OEemUcR0ojS7EZ4HULDdZFhOgM54V8Y7pKQMbxoNANVRSRxhcDA/7VAHEpygNDw8BIh+p9O6Tz+nSDOhGJMXCKw6H8lNNMRgZ4COaL/tcqIABPpBED/c/6JA2QBKlNJqPCkWygsxFEnBO7UqlQ0BSRACMC9JYQkKCABAnf23s+3piKsbglQABNui4YsocBq3QHg7NqqQNHKR3YOvgcA/PC9jFbnsKiaFfpnAJ5X+aqlkUDkQ6sPrhEg/MmyWNoVw/rKSe3RP4mIF78XIghRa1hUIcbcslXYCgqsUWyqR/gRMQHspQp9gDTfwY1LiA8BYglvZgtX+y5AslsAmYjGe1NMKAYIEetltCn3w1xBiVjGupDmqvZ4samIQmpK2RyFEA3LwFyWcrOZQu3xmIXjvtzV1IHQbOdQ/55v6xbc861AbWfiQIkIydbegUKcU878uhvXP/2oQ3W2iGHs3K6Y+vyxPvxiGX+1Db9cx1/v3QZj6jQY4y1OmvJ+kxXatJE2L2s0Rd1oinuN5nirO95sRyWG2v0PfHB84JPna39qPwYvJAReMtgwAAAAAElFTkSuQmCC) no-repeat;background-size:100%}.shelly_channel .power_on_off_icon span{top:9.5px;right:20px}.shelly_channel .power_on_off_icon{position:relative}.shelly_channel .power_on_off_icon span{position:absolute;height:46px;width:46px}#dev_info{height:100px;position:relative}#dev_info .consum_value{width:100%;text-align:center;line-height:100px;font-size:25px;font-weight:bold}#dev_info .unit{font-size:18px}#dev_info .power_on_off_icon,#dev_info .input_on_off_icon,#dev_info .input1_on_off_icon,#dev_info .input2_on_off_icon{position:absolute;top:25px;right:20px;width:52px;height:52px;cursor:pointer;background-size:contain}#dev_info .input_on_off_icon.off,.shelly_channel .input_on_off_icon.off{z-index:-1;background:none;background-size:100%}#dev_info .input_on_off_icon.on,.shelly_channel .input_on_off_icon.on{z-index:10;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAP1BMVEX///89zf89zf89zf89zf9n1/89zf89zf89zf////////////////////9l1/89zf////89zf89zf89zf////8tkTD/AAAAAXRSTlMAQObYZgAAACxJREFUWMPt0sEJADAMA7F4/6UzhEshIP19L88A8E2Sdt8VBASeBOorAwD3LB5aADlrKs6zAAAAAElFTkSuQmCC) no-repeat;background-size:100%}#dev_info .ext_switch_on_off_icon{position:absolute;top:25px;right:72px;width:52px;height:52px;display:none}#dev_info .ext_switch_on_off_icon.on{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAACjklEQVRo3u2YQUhUQRjH/zNv3+ouQYXk1mFPWXbavQZ5jSyCdutg1FEJkoIQi06F3YK9tkq0hPcSAzP1HnQIa/ew4bo+L2loLtgrVt6bee/rkJaaGbFvXI35wcBj5r0Z/t9/5uObB2g0Go1Go9FoaqWFiP1pLL7NWK2EVE1cZow6R96fF/ubW0G+AwBgvMH8sjiVY2xkzwkCgI98310RjZ1ivgcAIG4g/G3lNYC9KciFsSwMDoD/6OAAwVhWuWZI9Vli9OuZADDF63G105P/e9cWfbvNodzV06GnvRNHmA+HGBhMUFN/r7ANM7LBLQAUMiMXb945uHjtoQkBxghEDA03BtKfLj8eljXviKAik3754d7S4RN9ABZWnQBAB8B4wybTHIAtg/1cOhZbLN1/drb1QSBbPIhJThaIvUkwSr2aflJpbun8l28PLVm5oTNHu9bm2DUOrZEancpWYsevE9uYEDaYtDrW/Lnc/7z9WHegSUjFwVwTtd07KsQoy3LD51q7mxZK/euy9frMrUyMMoe2c0qlmB0hNTqVbZskapskujQ2nf0vKu8LY+XB9IQ1qO8gu5WOobf8yot3XEeiXmQymSgR1dQymUxUR1IFlmUN2LbtENHXWppt287s7OyjuooplUq3hRAUFFJKKpfLt+pW+hBROhQK7tJrGAaIqKNuglzX9YJ23XEcuWOC8vn85tpPKtjJ8i9rBncFTyaTVCgUkqZpthNRJRwOx4NW09jYGC8Wi12MsSYhxFgikcgrTQRzc3M9UkpSjZSS5ufne5T/JPE8z3BdF6ZpKg2cEAKe5xnKBVWr1fFKpQLO+YpKQb7vR6rV6rjSqM3MzOx4gWlZli5qNRqNRqPRaLbmO2u/IIPjRUT+AAAAAElFTkSuQmCC) no-repeat}#dev_info .ext_switch_on_off_icon.off{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAACFUlEQVRo3u2Yv47aMBzHbSe+wumWUyU6MXeDp0Dq0IFOfYE+QHWojPcEWXvqcMu9Q4fefg8ADKCQP0wghIRUpVK4OLa/HapKFF1PUOJCkD+SF8ey/fFP+fmXEGKxWCwWi8Vi2RcA9F+e7YtramJKKXq93ttarfZaa50RQghj7MVisfAppV9LGaUwDB+UUhBCQAgBpRSiKHowuaZrcnLHcb4zxghj7I8+k2uyU3t3meHEoLfpOzqhVqvlAqgDqAF4BaDW6XQuOefVzbGc82q3271cHwug3m633aMK9Wg0usYv5gDmWuu5UuoRGyilHrXW89/jAMD3/eujvHOCILjFjkRRdGv6btoL3/dvtpUJguCmFJlmG6nSyDwhpdc8dCllnotUaWWekiq9zFpNdxfH8Z39BjkUnuedA/hrS9P0YrVaXTw3xvO886OQieP4S5IkGYAf+7QkSbLJZPL5oDLj8fhTnucoCiklwjD8eLDiFMA71y2upnQchwB4fzAhIYQqOupZlsmDCVFafD2575z2i/WkhPr9Pt1ICrLoDW3OublmoX99ms0mBoNBk3P+BsDy7OysXrRQpVKpD4fDD5TSl3mef2s0Gn2jIZ1Op1dSSphGSonZbHa16/52vkSUUo4QgnDOjR5cnudEKeUYF0rT9H65XBLG2MqkkNa6mqbpvdFTi6Lov2fFOI5PLhNbLBaLxWKxFMRPbUT2sm2zWF0AAAAASUVORK5CYII=) no-repeat}.shelly_channel .input_on_off_icon,.shelly_channel .input1_on_off_icon,.shelly_channel .input2_on_off_icon{position:absolute;top:9.5px;right:20px;width:46px;height:46px}.animation{display:none}.animation:after{content:'';position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWAQMAAAAGz+OhAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAATJJREFUSMftlkFuhDAMRTOTBbvJEXIUjjY5GkfhCCxZoHENZKr4+7dM1apSKyyBxFNMcPi2fgg1sowBIonIAEyRLH4ZLuw3NrXosiF5tKzbmZSG5coGt4Vd98xt3xcJY/uGnS2EzYbdfR21NntambCkeT2cS7duacpQtqZle6bXcMbfjwsC/a2xALspwy5TNcQJWK9KmYHdy64oI2NlVuzaFkXVaFmnykygzvU5O2WPemEHrAw7hbPe5U5fYPgt0/ZOy+YPGNb280wcW4Jgd5+sMn9Wv/GPXtUL09p3tMt7hjHWb1jHyPvX9fnA5wGbG26+FD6HcF4lPtfO+G8R32/oVawkEvE0mXgf5puIT6yeaz7ya8zXxU885pHvTMR3Pr3oeJBLPSarjXll5qmp925nxRvThsrYgZ0foQAAAABJRU5ErkJggg==);background-size:cover;background-position:50%;-webkit-animation:spin 2s linear infinite}.power_on_off_icon .animation:after{right:17px;height:50px;width:50px;top:7px}#dev_info .animation:after{height:56px;width:56px;right:18px;top:23px}#channel_page .timer_info_chpg .timer_channel_value{margin-right:4%}</style> <script type=text/javascript>var timer_channel_exists=new Array(1);var reset_timer_channel=new Array(1);var timer_title_previous=new Array(1);var timer_value=new Array(1);var allow_timer_value_auto_update=new Array(1);var timer_value_auto_update_skip_a_beat=new Array(1);var TimerChannel={updateValue:function(ri,timer_value){if(timer_value<60){var s=timer_value;$("#timer_remaining_"+ri+'_value').html(""+s+"s");$("#timer_remaining_chpg_"+ri+'_value').html(""+s+"s");}else if(timer_value<3600){var m=Math.floor(timer_value/60);var s=timer_value%60;if(s==0){$("#timer_remaining_"+ri+'_value').html(""+m+"m");$("#timer_remaining_chpg_"+ri+'_value').html(""+m+"m");}else{$("#timer_remaining_"+ri+'_value').html(""+m+"m"+" "+s+"s");$("#timer_remaining_chpg_"+ri+'_value').html(""+m+"m"+" "+s+"s");}}else{var h=Math.floor(timer_value/3600);var m=Math.floor((timer_value%3600)/60);var s=(timer_value%3600)%60;if(m==0&&s==0){$("#timer_remaining_"+ri+'_value').html(""+h+"h");$("#timer_remaining_chpg_"+ri+'_value').html(""+h+"h");}else if(m==0){$("#timer_remaining_"+ri+'_value').html(""+h+"h"+" "+s+"s");$("#timer_remaining_chpg_"+ri+'_value').html(""+h+"h"+" "+s+"s");}else if(s==0){$("#timer_remaining_"+ri+'_value').html(""+h+"h"+" "+m+"m");$("#timer_remaining_chpg_"+ri+'_value').html(""+h+"h"+" "+m+"m");}else{$("#timer_remaining_"+ri+'_value').html(""+h+"h"+" "+m+"m"+" "+s+"s");$("#timer_remaining_chpg_"+ri+'_value').html(""+h+"h"+" "+m+"m"+" "+s+"s");}}},updateChannel:function(ri){if(1==1){$("#timer_info_chpg_0").removeClass('hidden');}
var currentRelay=Shelly.currentStatus.relays[ri];if(currentRelay.has_timer){var timer_title;if(currentRelay.ison){timer_title="AUTO OFF:";}else{timer_title="AUTO ON:"}
if(timer_title!=timer_title_previous[ri]){reset_timer_channel[ri]=true;}
timer_value[ri]=currentRelay.timer_remaining;if(timer_channel_exists[ri]){if(reset_timer_channel[ri]){$("#timer_remaining_"+ri+'_title').html(timer_title);$("#timer_remaining_chpg_"+ri+'_title').html(timer_title);TimerChannel.updateValue(ri,timer_value[ri]);$("#timer_remaining_"+ri).show();$("#timer_remaining_chpg_"+ri).show();$("#timer_info_"+ri).removeClass('hidden');reset_timer_channel[ri]=false;allow_timer_value_auto_update[ri]=true;timer_value_auto_update_skip_a_beat[ri]=true;}
}else{appendTimerChan('timer_remaining_'+ri,'#timer_info_'+ri,timer_title);appendTimerChan('timer_remaining_chpg_'+ri,'#timer_info_chpg_'+ri,timer_title);$("#timer_info_"+ri).removeClass('hidden');TimerChannel.updateValue(ri,timer_value[ri]);reset_timer_channel[ri]=false;allow_timer_value_auto_update[ri]=true;timer_value_auto_update_skip_a_beat[ri]=true;timer_channel_exists[ri]=true;}
timer_title_previous[ri]=timer_title;}else{if(timer_channel_exists[ri]){$("#timer_remaining_"+ri).hide();$("#timer_remaining_chpg_"+ri).hide();$("#timer_info_"+ri).addClass('hidden');reset_timer_channel[ri]=true;allow_timer_value_auto_update[ri]=false;}}}};var Channel={selectedChannel:-1,openChannelPage:function(el){if(Settings.checkIfActive()){return;}
var channelNum=el.data('channel');if(Channel.selectedChannel==channelNum){return;}
Channel.selectedChannel=channelNum;$('#channel_numb').text(channelNum+1);$('#channel_page').data("channel",channelNum);Channel.updateStatus();$(document).trigger('Shelly:settings');$('#channel_page').show();$('#device_settings, #channel_list').hide();$("#timer_info_chpg_"+Channel.selectedChannel).removeClass('hidden');},closeChannelPage:function(){Channel.selectedChannel=-1;for(var ri=0;ri<1;ri++){$("#timer_info_chpg_"+ri).addClass('hidden');}},checkIfOverpower:function(chan_num){if(Settings.checkIfActive()||!Shelly.currentStatus.relays||!Shelly.currentStatus.relays[chan_num])
{return;}
return Shelly.currentStatus.relays[chan_num]['overpower']==true||Shelly.currentStatus.relays[chan_num]['overpower']=="true";},updateStatus:function(){if(Settings.checkIfActive()){return;}
if(Shelly.currentSettings.hasOwnProperty('mode')&&Shelly.currentSettings.mode==='roller'){return;}
if(!Shelly.currentStatus.hasOwnProperty('relays')){return;}
for(var ri=0;ri<1;ri++){var currentRelay=Shelly.currentStatus.relays[ri];if(currentRelay.ison)
$(".chan[data-channel='"+ri+"'] .state").addClass('on').removeClass('off');else
$(".chan[data-channel='"+ri+"'] .state").addClass('off').removeClass('on');if((typeof Shelly.currentStatus.inputs=='object')&&(typeof Shelly.currentStatus.inputs[ri]=='object')){if(Shelly.currentStatus.inputs[ri].input)
$(".chan[data-channel='"+ri+"'] .input_on_off_icon").addClass('on').removeClass('off');else
$(".chan[data-channel='"+ri+"'] .input_on_off_icon").addClass('off').removeClass('on');}
if(Object.keys(Shelly.currentSettings).length>0){var cur_name=Shelly.currentSettings.relays[ri].name;if(cur_name&&cur_name.length>0){if($(".channel_btn")){$(".channel_btn[data-channel='"+ri+"'] .channel .channel_name").html(cur_name);}
$(".chan[data-channel='"+ri+"'] .channel .chname").html(cur_name);}}
TimerChannel.updateChannel(ri);}
if(Shelly.currentSettings&&Shelly.currentSettings.ext_switch_enable){if(Shelly.currentStatus&&Shelly.currentStatus.ext_switch&&Shelly.currentStatus.ext_switch[0]){if(Shelly.currentStatus.ext_switch[0].input){$("#dev_info .ext_switch_on_off_icon").removeClass("off");$("#dev_info .ext_switch_on_off_icon").addClass("on");}else{$("#dev_info .ext_switch_on_off_icon").removeClass("on");$("#dev_info .ext_switch_on_off_icon").addClass("off");}}
$("#dev_info .ext_switch_on_off_icon").show();}else{$("#dev_info .ext_switch_on_off_icon").hide();}
if(Channel.selectedChannel==-1){$('#ext_sensors_on_main_page').show();}else{$('#ext_sensors_on_main_page').hide();}
if(1===1){if(1===0){return;}else{if(this.checkIfOverpower(0)){$("#overpower").text('Overpower '+Math.round(Shelly.currentStatus.meters[0].overpower)+'W').show();$("#consumption_enab").hide();}else{$("#consumption_enab").show();if(Shelly.currentStatus.hasOwnProperty('meters'))
$(".consumption").text(Math.round(Shelly.currentStatus.meters[0].power));else if(Shelly.currentStatus.hasOwnProperty('emeters'))
$(".consumption").text(Math.round(Shelly.currentStatus.emeters[0].power));$("#overpower").hide();}}}else{var overpower=false;var overall_consumption=0;for(var mi=0;mi<1;mi++){var currentMeter=Shelly.currentStatus.meters[mi];overall_consumption+=currentMeter.power;if(this.checkIfOverpower(mi)){overpower=true;$(".chan[data-channel='"+mi+"'] #overpower").text('Overpower '+Math.round(currentMeter.overpower)+'W').show();$(".chan[data-channel='"+mi+"'] .consumption").hide();$(".chan[data-channel='"+mi+"'] .unit_cons").hide();}else{$("#consumption_enab").eq(mi).show();$("#consumption_enab span").eq(mi).show();$(".chan[data-channel='"+mi+"'] #overpower").hide();$(".chan[data-channel='"+mi+"'] .consumption").show().text(Math.round(currentMeter.power));$(".chan[data-channel='"+mi+"'] .unit_cons").show();}}
if(overpower){$('.overall_consumption .consumption').hide();$(".overall_consumption #overpower").text('Overpower').show();$('.overall_consumption .unit_cons').hide();}else{$('.overall_consumption .consumption').text(Math.round(overall_consumption)).show();$(".overall_consumption #overpower").hide();$('.overall_consumption .unit_cons').show();}}},updateCurentRelayStatus:function(channel){if(Settings.checkIfActive()){return;}
var status=Shelly.currentStatus.relays[channel].ison;status?(status='off'):(status='on');$('.power_on_off_icon').eq(channel).find('.animation').show();$('#dev_info .animation').show();Shelly.sendRequest('relay/'+channel+'?turn='+status,'Get',{},function success(){Shelly.updateConf('status');$('.animation').hide();},function error(){console.log("error");});}};Zepto(function($){var timersAutoUpdate=setInterval(function(){for(var ri=0;ri<1;ri++){if(allow_timer_value_auto_update[ri]){if(timer_value_auto_update_skip_a_beat[ri]){timer_value_auto_update_skip_a_beat[ri]=false;continue;}
timer_value[ri]--;if(timer_value[ri]<0){timer_value[ri]=0;}
TimerChannel.updateValue(ri,timer_value[ri]);}}},1000);$('.channel_btn').on('click',function(){Channel.openChannelPage($(this));});$(document).on('Shelly:status',function(){Channel.updateStatus();});$(document).on('Shelly:settings',function(){Channel.updateStatus();});$('.state').on('click',function(e){var channel_num=$(this).closest('.chan').attr('data-channel');Channel.updateCurentRelayStatus(channel_num);e.stopImmediatePropagation();});$('.logo').on('click',function(){Channel.closeChannelPage();});});</script> </div> <div id=footer> <div>Allterco Robotics Ltd.</div> <div><a href=mailto:support@shelly.cloud>support@shelly.cloud</a> <span>|</span> <a href=https://shelly.cloud/ target=_blank>https://shelly.cloud</a></div> </div> </div> <div id=message_holder> <div class=message> <div id=close_msg></div> <div id=title_mes></div> <div id=content_mes></div> <div id=msg_status></div> <div id=foot_mes> <div class=actions> <div class=btnbox_msg> <button href=# class="btn btn_yes" value=Yes>Yes</button> </div> <div class=btnbox_msg> <button href=# class="btn btn_no" value=No>No</button> </div> </div> </div> <div id=reboot_mes> <div class=actions> <div class=singlebtnbox_msg> <button href=# class="btn btn_reboot" value="Reboot Now">Reboot now</button> </div> </div> </div> </div> </div> </body> </html>
